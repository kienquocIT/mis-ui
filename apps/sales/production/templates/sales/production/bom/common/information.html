{% load i18n %}

<style>
    #labor-summary-table th, #labor-summary-table td {
        padding-bottom: 0;
        padding-top: 0;
    }
    #labor-summary-table thead th, #labor-summary-table tbody td {
        border: none;
    }
</style>

<div class="row">
    <div class="col-6 col-md-4 col-lg-2">
        <div class="border border rounded pt-3 mb-2" style="min-height: 7vh">
            <div class="row">
                <div class="col-12 text-center">
                    <div class="form-check">
                        <input type="radio" id="for-production" name="bom-type" class="form-check-input" checked>
                        <label class="form-check-label" for="for-production">{% trans 'For production' %}</label>
                    </div>
                </div>
                <div class="col-12 text-center">
                    <div class="form-check form-check-sm">
                        <input type="checkbox" id="is-outsourcing" class="form-check-input">
                        <label class="form-check-label text-primary" for="is-outsourcing">{% trans 'Outsourcing' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
        <div class="border border rounded pt-4 mb-2" style="min-height: 7vh">
            <div class="row">
                <div class="col-12 text-center">
                    <div class="form-check">
                        <input type="radio" id="for-service" name="bom-type" class="form-check-input">
                        <label class="form-check-label" for="for-service">{% trans 'For service' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
        <div class="border border rounded pt-4 mb-2" style="min-height: 7vh">
            <div class="row">
                <div class="col-12 text-center">
                    <div class="form-check">
                        <input type="radio" id="for-sale" name="bom-type" class="form-check-input">
                        <label class="form-check-label" for="for-sale">{% trans 'For sale' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-10 mb-2">
        <h5 class="text-primary text-decoration-underline fw-bold">{% trans 'General Information' %}</h5>
    </div>
    <div class="col-2 text-right">
        <button type="button" id="btn-copy-bom" class="btn btn-outline-blue btn-xs" data-bs-toggle="modal" data-bs-target="#modal-select-BOM"><i class="fas fa-copy"></i> {% trans 'Copy BOM' %}</button>
    </div>
    <div class="col-12 col-md-12 col-lg-6">
        <div class="form-group">
            <label for="product" class="form-label required">{% trans 'Product' %}</label>
            <select class="form-select select2" id="product" data-url="{% url 'ProductListForBOMAPI' %}"></select>
            <span class="small fst-italic text-muted" id="hint-for-finished-goods">{% trans 'Select Finished goods or Goods' %}</span>
            <span class="small fst-italic text-muted" hidden id="hint-for-service">{% trans 'Only select Services' %}</span>
            <span class="small fst-italic text-muted" hidden id="hint-for-goods">{% trans 'Only select Goods' %}</span>
        </div>
    </div>
    <div class="col-6 col-md-6 col-lg-3">
        <div class="form-group">
            <label for="price" class="form-label">{% trans 'Sum price' %}</label>
            <input disabled readonly class="form-control form-control-line mask-money" id="price" value="0">
        </div>
    </div>
    <div class="col-6 col-md-6 col-lg-3">
        <div class="form-group">
            <label for="time" class="form-label">{% trans 'Sum time' %} (h)</label>
            <input disabled readonly type="number" class="form-control form-control-line" id="time" value="0">
        </div>
    </div>
</div>

{#for production#}

<div id="normal-production-space" class="mb-20">
    <div class="row mt-5">
        <div class="col-12 mb-2">
            <h5 class="text-primary text-decoration-underline fw-bold">{% trans 'Process description' %}</h5>
        </div>
        <div class="col-12">
            <table class="table nowrap w-100" id="process-description-table">
                <thead class="bg-light">
                <tr>
                    <th style="min-width: 30px"></th>
                    <th style="min-width: 200px">{% trans 'Task name' %}</th>
                    <th style="min-width: 250px">{% trans 'Labor' %}</th>
                    <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                    <th style="min-width: 150px">{% trans 'UOM' %}</th>
                    <th style="min-width: 200px">{% trans 'Unit price' %}</th>
                    <th style="min-width: 200px">{% trans 'Subtotal price' %}</th>
                    <th style="min-width: 200px">{% trans 'Note' %}</th>
                    <th style="min-width: 30px"></th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            <button type="button" class="mt-2 btn btn-outline-primary btn-xs" id="add-new-process-description">
    <span>
        <span class="icon">
            <span class="feather-icon">
                <i class="far fa-plus-square"></i>
            </span>
        </span>
        <span>{% trans 'Add new row' %}</span>
    </span>
</button>
        </div>
        <div class="col-12 col-md-12 col-lg-6 mt-5">
            <div class="border rounded p-2">
                <table class="table nowrap w-100" id="labor-summary-table">
                    <thead>
                        <tr>
                            <th class="w-20 fw-bold text-primary">{% trans 'Labor' %}</th>
                            <th class="w-20 fw-bold text-primary">{% trans 'Quantity' %}</th>
                            <th class="w-20 fw-bold text-primary">{% trans 'UOM' %}</th>
                            <th class="w-20 fw-bold text-primary">{% trans 'Unit price' %}</th>
                            <th class="w-20 fw-bold text-primary">{% trans 'Subtotal price' %}</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-12 mb-2">
            <h5 class="text-primary text-decoration-underline fw-bold">{% trans 'Materials/Components' %}</h5>
        </div>
        <div class="col-12">
            <div class="table-responsive-x-100-y-max">
                <table class="table nowrap w-100" id="material-table">
                    <thead class="bg-light">
                    <tr>
                        <th style="min-width: 30px"></th>
                        <th style="min-width: 100px">{% trans 'Code' %}</th>
                        <th style="min-width: 250px">{% trans 'Material/Component' %}</th>
                        <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                        <th style="min-width: 150px">{% trans 'UOM' %}</th>
                        <th style="min-width: 200px">{% trans 'Standard cost' %}</th>
                        <th style="min-width: 200px">{% trans 'Subtotal price' %}</th>
                        <th style="min-width: 100px" class="text-center">{% trans 'Disassemble' %}</th>
                        <th style="min-width: 200px">{% trans 'Note' %}</th>
                        <th style="min-width: 30px"></th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-12 mb-2">
            <h5 class="text-primary text-decoration-underline fw-bold">{% trans 'Tools' %}</h5>
        </div>
        <div class="col-12">
            <div class="table-responsive-x-100-y-max">
                <table class="table nowrap w-100" id="tools-table">
                    <thead class="bg-light">
                    <tr>
                        <th style="min-width: 30px"></th>
                        <th style="min-width: 100px">{% trans 'Code' %}</th>
                        <th style="min-width: 250px">{% trans 'Tool' %}</th>
                        <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                        <th style="min-width: 150px">{% trans 'UOM' %}</th>
                        <th style="min-width: 200px">{% trans 'Note' %}</th>
                        <th style="min-width: 30px"></th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{#for product tion outsourcing#}

<div id="outsourcing-production-space" hidden class="mb-20">
    <div class="row mt-5">
        <div class="col-12">
            <h5 class="text-primary fw-bold"><i class="fas fa-puzzle-piece"></i> <span class="text-decoration-underline">{% trans 'Materials/Components' %}</span></h5>
            <table class="table nowrap w-100" id="material-table-outsourcing">
                <thead class="bg-light">
                <tr>
                    <th style="min-width: 30px"></th>
                    <th style="min-width: 100px">{% trans 'Code' %}</th>
                    <th style="min-width: 250px">{% trans 'Material/Component' %}</th>
                    <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                    <th style="min-width: 150px">{% trans 'UOM' %}</th>
                    <th style="min-width: 200px">{% trans 'Standard cost' %}</th>
                    <th style="min-width: 200px">{% trans 'Subtotal price' %}</th>
                    <th style="min-width: 100px" class="text-center">{% trans 'Disassemble' %}</th>
                    <th style="min-width: 200px">{% trans 'Note' %}</th>
                    <th style="min-width: 30px"></th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            <button type="button" class="btn btn-outline-primary btn-xs mt-2" id="add-new-outsourcing-material">
                <span>
                    <span class="icon">
                        <span class="feather-icon">
                            <i class="far fa-plus-square"></i>
                        </span>
                    </span>
                    <span>{% trans 'Add new row' %}</span>
                </span>
            </button>
        </div>
    </div>
</div>

{% block modalData %}
    <div class="offcanvas offcanvas-end" style="width: 90%" tabindex="-1" id="select-material-modal" aria-labelledby="offcanvasTopLabel">
        <div class="offcanvas-header">
            <h5 id="offcanvasRightLabel">{% trans 'Select materials/components' %}</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <table id="select-material-table" data-url="{% url 'ProductMaterialListForBOMAPI' %}" class="table w-100 nowrap">
                <thead class="bg-light">
                    <tr>
                        <th style="min-width: 30px"></th>
                        <th style="min-width: 30px"></th>
                        <th style="min-width: 100px">{% trans 'Code' %}</th>
                        <th style="min-width: 200px">{% trans 'Material/Component' %}</th>
                        <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                        <th style="min-width: 120px">{% trans 'UOM' %}</th>
                        <th style="min-width: 150px">{% trans 'Standard cost' %}</th>
                        <th style="min-width: 150px">{% trans 'Subtotal price' %}</th>
                        <th style="min-width: 100px" class="text-center">{% trans 'Disassemble' %}</th>
                        <th style="min-width: 200px">{% trans 'Note' %}</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <button type="button" class="btn btn-primary mt-5" id="btn-get-selected-material">{% trans 'Select' %}</button>
        </div>
    </div>

    <div class="offcanvas offcanvas-end" style="width: 70%" tabindex="-1" id="select-tool-modal" aria-labelledby="offcanvasTopLabel">
        <div class="offcanvas-header">
            <h5 id="offcanvasRightLabel">{% trans 'Select tools' %}</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <table id="select-tool-table" data-url="{% url 'ProductToolListForBOMAPI' %}" class="table w-100 nowrap">
                <thead class="bg-light">
                    <tr>
                        <th style="min-width: 30px"></th>
                        <th style="min-width: 30px"></th>
                        <th style="min-width: 100px">{% trans 'Code' %}</th>
                        <th style="min-width: 250px">{% trans 'Tool' %}</th>
                        <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                        <th style="min-width: 150px">{% trans 'UOM' %}</th>
                        <th style="min-width: 200px">{% trans 'Note' %}</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <button type="button" class="btn btn-primary mt-5" id="btn-get-selected-tool">{% trans 'Select' %}</button>
        </div>
    </div>

    <div class="modal fade" id="replacement-material-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter" aria-hidden="true">
        <div class="modal-dialog modal-lg" style="min-width: 70%" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans 'Select replacement material/component' %}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="replacement-material-table-warning" class="alert alert-warning" role="alert">
                        {% trans 'Please select main material/component first!' %}
                    </div>
                    <table id="replacement-material-table" data-url="{% url 'ProductMaterialListForBOMAPI' %}" class="table w-100 nowrap">
                        <thead class="bg-light">
                            <tr>
                                <th style="min-width: 30px"></th>
                                <th style="min-width: 30px"></th>
                                <th style="min-width: 100px">{% trans 'Code' %}</th>
                                <th style="min-width: 200px">{% trans 'Material/Component' %}</th>
                                <th style="min-width: 100px">{% trans 'Quantity' %}</th>
                                <th style="min-width: 120px">{% trans 'UOM' %}</th>
                                <th style="min-width: 100px" class="text-center">{% trans 'Disassemble' %}</th>
                                <th style="min-width: 200px">{% trans 'Note' %}</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
                    <button type="button" class="btn btn-primary" id="btn-get-replacement-material">{% trans 'Select' %}</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-select-BOM" tabindex="-1" role="dialog" aria-labelledby="modal-select-BOM" aria-hidden="true">
        <div class="modal-dialog modal-lg" style="min-width: 80%" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans 'Select BOM to copy' %}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-hover nowrap w-100" id="table-select-bom-copy" data-url="{% url 'BOMListAPI' %}">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>{% trans 'BOM' %}</th>
                                    <th>{% trans 'Product' %}</th>
                                    <th>{% trans 'Opportunity' %}</th>
                                    <th></th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Cancel' %}</button>
                    <button type="button" id="btn-accept-copy-bom" class="btn btn-primary">{% trans 'Copy' %}</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
