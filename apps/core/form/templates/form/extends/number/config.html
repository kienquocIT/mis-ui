{% load i18n string_utils define_action %}

<div class="drawer-config d-none" id="form-number">
    <form>
        {% csrf_token %}

        {% assign_out_random nameIdx as rNameIdx %}
        <div class="form-group mb-3">
            <label for="{{ rNameIdx }}" class="form-label">
                {% trans 'Name of field' %}
            </label>
            <input type="text" class="form-control" id="{{ rNameIdx }}" name="name">
            <small class="form-text text-muted">
                {% trans 'Corresponds to a stored data field' %}.
                {% trans 'Employs this name to autofill form fields' %}.
            </small>
        </div>

        <hr style="background-color: #2a3746"/>

        {% include 'form/extends/base/title.html' %}
        {% include 'form/extends/base/instruction.html' %}
        {% include 'form/extends/base/size.html' %}
        {% include 'form/extends/base/placeholder.html' %}

        <div class="form-group mb-3">
            {% assign_out_random titleForReportIdx as rTitleForReportIdx %}
            <label for="{{ rTitleForReportIdx }}" class="form-label">{% trans 'Title main value for report' %}</label>
            <input type="text" id="{{ rTitleForReportIdx }}" name="label_for_report" class="form-control"/>
            <small class="form-text text-muted">{% trans 'The name represented in the report of the value' %}</small>
        </div>

        <hr style="background-color: #2a3746"/>

        <div class="form-group mb-3">
            {% random_str as rInitValueIdx %}
            <label for="{{ rInitValueIdx }}" class="form-label">{% trans 'Initial value' %}</label>
            <input type="number" class="form-control" id="{{ rInitValueIdx }}" name="init_value"/>
        </div>

        <div class="form-group mb-1">
            {% random_str as rMinIdx %}
            {% random_str as rMaxIdx %}

            <label class="form-label mb-0">{% trans 'Field number size' %}</label>
            <br/>
            <small
                    class="form-text text-muted"
            >
                {% trans 'Set the MIN is negative numbers to allow users to enter negative numbers' %}
            </small>
            <div class="d-flex">
                <div class="form-group mb-0" style="width: 48%">
                    <input type="number" class="form-control" id="{{ rMinIdx }}" name="min"/>
                    <label
                            class="form-label text-muted form-text mb-0" for="{{ rMinIdx }}"
                    ><small>{% trans 'Min' %}</small></label>
                </div>
                <div style="width: 4%;"></div>
                <div class="form-group mb-0" style="width: 48%;">
                    <input type="number" class="form-control" id="{{ rMaxIdx }}" name="max"/>
                    <label
                            class="form-label text-muted form-text mb-0" for="{{ rMaxIdx }}"
                    ><small>{% trans 'Max' %}</small></label>
                </div>
            </div>
        </div>

        <hr style="background-color: #2a3746"/>

        <div class="form-group mb-3">
            {% random_str as rUnitLabelEntriesIdx %}
            {% random_str as rUnitCodeIdx %}
            {% random_str as rUnitPlacementIdx %}
            {% random_str as rUnitWidthPercentIdx %}
            {% random_str as rUnitSizeIdx %}
            {% random_str as rUnitWidthPxIdx %}
            {% random_str as rUnitTextAlignIdx %}

            <div class="w-100">
                <div class="form-group">
                    <label for="{{ rUnitLabelEntriesIdx }}" class="form-label">{% trans 'Label of unit at report' %}</label>
                    <input type="text" name="unit_label_for_report" class="form-control" id="{{ rUnitLabelEntriesIdx }}"/>
                </div>
            </div>

            <div class="d-flex">
                <div class="flex-basic-40 unit-config-main m-1">
                    <label for="{{ rUnitCodeIdx }}" class="form-label" style="width: 100%;">{% trans 'Unit' %}</label>
                    <input type="text" class="form-control" name="unit_code" id="{{ rUnitCodeIdx }}">
                </div>
                <div class="flex-basic-60 unit-config-main m-1" style="display: none;">
                    <div class="form-group">
                        <label for="{{ rUnitPlacementIdx }}" class="form-label">{% trans 'Unit placement' %}</label>
                        <select
                                id="{{ rUnitPlacementIdx }}"
                                class="input-radio-select"
                                name="unit_placement"
                        >
                            <option value="prefix">{% trans 'Prefix' %}</option>
                            <option value="suffix">{% trans 'Suffix' %}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="unit-config-group" style="display: none;">
                <div class="d-flex">
                    <div class="flex-basic-40 m-1">
                        <div class="form-group">
                            <label for="{{ rUnitWidthPxIdx }}" class="form-label">{% trans 'Width - px' %}</label>
                            <input type="number" min=10 max=1000 step="10" name="unit_width_px" class="form-control" id="{{ rUnitWidthPxIdx }}"/>
                        </div>
                    </div>
                    <div class="flex-basic-60 m-1">
                        <div class="form-group">
                            <label for="{{ rUnitTextAlignIdx }}" class="form-label">
                                {% trans 'Text align' %}
                            </label>
                            <select
                                    id="{{ rUnitTextAlignIdx }}"
                                    class="input-radio-select"
                                    name="unit_text_align"
                            >
                                <option value="left">{% trans 'Left' %}</option>
                                <option value="center" selected>{% trans 'Center' %}</option>
                                <option value="right">{% trans 'Right' %}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr style="background-color: #2a3746"/>

        <div class="form-group mb-3">
            {% random_str as rOnInputToIdx %}
            <label class="form-label" for="{{ rOnInputToIdx }}">{% trans 'Validate the value type' %}</label>
            <select id="{{ rOnInputToIdx }}" class="input-radio-select" name="validate_value_type">
                <option value="unset" title="{% trans 'Unset' %}">-</option>
                <option value="int">{% trans 'Integers' %}</option>
                <option value="float">{% trans 'Float' %}</option>
            </select>
        </div>

        <hr style="background-color: #2a3746"/>

        {% include 'form/extends/base/validation.html' %}

        <hr style="background-color: #2a3746"/>

        {% include 'form/extends/base/visibility.html' %}

    </form>
</div>
<script>
    $(document).ready(function (){
        $(`#{{ rUnitCodeIdx }}`).on('change', function (){
            let main$ = $(this).closest('.unit-config-main');
            let mainSub$ = main$.siblings('.unit-config-main');
            let secondGroup$ = $(this).closest('form').find('.unit-config-group');
            if ($(this).val()) {
                mainSub$.show("slide", { direction: "right" }, 200);
                secondGroup$.slideDown();
            } else {
                mainSub$.hide("slide", { direction: "right" }, 200);
                secondGroup$.slideUp();
            }
        })
    })
</script>