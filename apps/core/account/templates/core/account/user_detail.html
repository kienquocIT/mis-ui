{% extends 'base.html' %}
{% load i18n %}
{% block cssHeader %}

    <style>
        button {
            border: 0 solid;
        }

        .btn-primary {
            width: 10%;
        }

        #btn-resetpw {
            width: 50%;
        }

        form {
            border-bottom: 0.1em solid #dcdcdc;
        }
    </style>
{% endblock %}
{% block pageAction %}
    <a
            class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret flex-shrink-0 d-lg-inline-block d-none"
             data-bs-toggle="tooltip" data-bs-placement="top" title=""
            data-bs-original-title="Save"
            id ="action"
    >
        <span class="icon">
            <span class="feather-icon">
                <i data-feather="save"></i>
            </span>
        </span>
    </a>
    <a
            class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret flex-shrink-0 d-lg-inline-block d-none"
            href="#" data-bs-toggle="tooltip" data-bs-placement="top" title=""
            data-bs-original-title="Refresh"
    >
        <span class="icon">
            <span class="feather-icon">
                <i data-feather="refresh-cw"></i>
            </span>
        </span>
    </a>
{% endblock %}
{% block pageContent %}
    <div style="padding-left: 20Px;padding-top: 20px; padding-right: 20px;">
        <div class="row">
            <div class="col-1"></div>
        </div>
        <form data-url="" data-url-redirect="/" data-method="PUT" id="form-edit-user">
            {% csrf_token %}
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <label class="form-label">First Name</label>
                        <input class="form-control" type="text" value="{{ data.0.user.first_name }}" name="first_name" id="inp-firstname">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label class="form-label">Last Name</label>
                        <input class="form-control" type="text" value="{{ data.0.user.last_name }}" name="last_name" id="inp-lastname">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input class="form-control" type="text" value="{{ data.0.user.full_name }}" name="full_name" id="inp-fullname">
            </div>

            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input class="form-control" type="text" value="{{ data.0.user.email }}" name="email">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                            <label class="form-label">{% trans "Select Company" %}</label>
                            <select class="form-select" name="company" disabled>
                                <option selected>FPT Telecom</option>
                                <option value="1">MT Solution</option>
                            </select>
                        </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input class="form-control" type="text" value="{{ data.0.user.username }}" name="username">
                    </div>
                </div>
                <div class="col-3">
                    <button type="button" id="btn-resetpw" style="margin-top: 1.2em" class="btn btn-primary">Đổi mật
                        khẩu
                    </button>
                </div>
            </div>
{#            <div class="row" style="margin-bottom: 1em">#}
{#                <button type="submit" class="btn btn-primary">Cập nhật</button>#}
{#            </div>#}
        </form>
        <br>
        <div class="row" style="border: 0.01em solid #dcdcdc">
            <h6>License</h6>
        </div>

        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Company Name</th>
                <th scope="col">Employee</th>
                <th scope="col">License</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th scope="row">1</th>
                <td>FPT Telecom</td>
                <td>Lê Minh</td>
                <td>Sale, eOffice</td>
            </tr>
            <tr>
                <th scope="row">2</th>
                <td>FTEL Telecom</td>
                <td>Lê Minh</td>
                <td>Sale, HRM</td>
            </tr>
            </tbody>
        </table>
    </div>
{% endblock %}
{% block jsFooter %}
    <script>
        $('#inp-fullname').val($('#inp-lastname').val() + ' ' + $('#inp-firstname').val());
        $("#form-edit-user").submit(function (event) {
            event.preventDefault();
            let csr = $("input[name=csrfmiddlewaretoken]").val();
            let frm = new SetupFormSubmit($(this));
            $.fn.callAjax(frm.dataUrl, frm.dataMethod, frm.dataForm, csr)
                .then(
                    (res) => {
                        $('.alert-success').show(1000);
                        setTimeout(location.reload.bind(location), 3000);
                    },
                    (err) => {
                        $('.alert-danger').show(1000);
                        console.log(err)
                    }
                )
        });
    </script>
{% endblock %}
