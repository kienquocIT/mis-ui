{"version":3,"file":"index.js","mappings":"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","sources":["webpack://grapesjs-plugin-page-template/webpack/universalModuleDefinition","webpack://grapesjs-plugin-page-template/webpack/bootstrap","webpack://grapesjs-plugin-page-template/webpack/runtime/define property getters","webpack://grapesjs-plugin-page-template/webpack/runtime/hasOwnProperty shorthand","webpack://grapesjs-plugin-page-template/webpack/runtime/make namespace object","webpack://grapesjs-plugin-page-template/./src/locale/en.js","webpack://grapesjs-plugin-page-template/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-plugin-page-template\"] = factory();\n\telse\n\t\troot[\"grapesjs-plugin-page-template\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default {\n    'grapesjs-plugin-page-template': {\n        loadErrorTxt: \"Load Errors\",\n        templateTxt: \"Templates\",\n        renderTemplateTxt: \"Render Templates\",\n        areYouSure: 'Are you sure?',\n        okTxt: \"Ok\",\n        cancelTxt: \"Cancel\",\n    },\n};","import en from './locale/en';\n\nexport default (editor, opts = {}) => {\n    const urlTemplateList = opts?.['urlTemplateList'] || '/test/templates';\n    const urlTemplateDetail = opts?.['urlTemplateDetail'] || '/test/template/{pk}';\n\n    const options = {\n        ...{\n            i18n: {},\n            // default options\n        }, ...opts\n    };\n\n    editor.I18n && editor.I18n.addMessages({\n        en,\n        ...options.i18n,\n    });\n\n    editor.Panels.addButton('options', {\n        id: 'choose-template',\n        className: 'fa fa-clock-o',\n        command: function (editor) {\n            editor.Modal.open({\n                title: editor.I18n.t(\"grapesjs-plugin-page-template.templateTxt\"),\n                content: `\n                <div>\n                    <div style=\"width: 100%;\">\n                        5 results\n                    </div>\n                    <div id=\"group-template-list\" style=\"width: 100%;display: flex;flex-wrap: wrap;\"></div>\n                </div>\n                `,\n                attributes: {\n                    class: 'my-small-modal',\n                },\n            });\n        }\n    });\n\n    editor.on('modal', function (prop) {\n        if (prop.attributes.class === 'my-small-modal' && prop.open === true) {\n            if (urlTemplateList === '/test/templates') {\n                $.mockjax({\n                    url: '/test/templates',\n                    type: 'GET',\n                    contentType: \"application/json\",\n                    responseText: {\n                        data: {\n                            'template_list': [\n                                { id: 1, title: 'Template 2', 'image': 'https://dummyimage.com/1280x1500/44b3cf/fff' },\n                                { id: 2, title: 'Template 3', 'image': 'https://dummyimage.com/1280x1500/7de020/fff' },\n                                { id: 3, title: 'Template 4', 'image': 'https://dummyimage.com/1280x1500/de21bf/fff' },\n                                { id: 4, title: 'Template 5', 'image': 'https://dummyimage.com/1280x1500/de9221/fff' },\n                            ],\n                        }\n                    },\n                });\n\n                $.mockjax({\n                    url: /\\/test\\/template\\/(.)*/gm,\n                    type: 'GET',\n                    contentType: \"application/json\",\n                    responseText: {\n                        data: {\n                            template_detail: {\n                                project_data: {\n                                    \"assets\": [],\n                                    \"styles\": [\n                                        {\n                                            \"selectors\": [\n                                                {\n                                                    \"name\": \"gjs-row\",\n                                                    \"private\": 1\n                                                }\n                                            ],\n                                            \"style\": {\n                                                \"display\": \"flex\",\n                                                \"justify-content\": \"flex-start\",\n                                                \"align-items\": \"stretch\",\n                                                \"flex-wrap\": \"nowrap\",\n                                                \"padding\": \"10px\"\n                                            }\n                                        },\n                                        {\n                                            \"selectors\": [\n                                                {\n                                                    \"name\": \"gjs-row\",\n                                                    \"private\": 1\n                                                }\n                                            ],\n                                            \"style\": {\n                                                \"flex-wrap\": \"wrap\"\n                                            },\n                                            \"mediaText\": \"(max-width: 768px)\",\n                                            \"atRuleType\": \"media\"\n                                        },\n                                        {\n                                            \"selectors\": [\n                                                {\n                                                    \"name\": \"gjs-cell\",\n                                                    \"private\": 1\n                                                }\n                                            ],\n                                            \"style\": {\n                                                \"min-height\": \"75px\",\n                                                \"flex-grow\": \"1\",\n                                                \"flex-basis\": \"100%\"\n                                            }\n                                        }\n                                    ],\n                                    \"pages\": [\n                                        {\n                                            \"frames\": [\n                                                {\n                                                    \"component\": {\n                                                        \"type\": \"wrapper\",\n                                                        \"stylable\": [\n                                                            \"background\",\n                                                            \"background-color\",\n                                                            \"background-image\",\n                                                            \"background-repeat\",\n                                                            \"background-attachment\",\n                                                            \"background-position\",\n                                                            \"background-size\"\n                                                        ],\n                                                        \"attributes\": {\n                                                            \"id\": \"ijpg\"\n                                                        },\n                                                        \"components\": [\n                                                            {\n                                                                \"name\": \"Row\",\n                                                                \"droppable\": \".gjs-cell\",\n                                                                \"resizable\": {\n                                                                    \"tl\": 0,\n                                                                    \"tc\": 0,\n                                                                    \"tr\": 0,\n                                                                    \"cl\": 0,\n                                                                    \"cr\": 0,\n                                                                    \"bl\": 0,\n                                                                    \"br\": 0,\n                                                                    \"minDim\": 1\n                                                                },\n                                                                \"classes\": [\n                                                                    {\n                                                                        \"name\": \"gjs-row\",\n                                                                        \"private\": 1\n                                                                    }\n                                                                ],\n                                                                \"attributes\": {\n                                                                    \"id\": \"iarj\"\n                                                                },\n                                                                \"components\": [\n                                                                    {\n                                                                        \"name\": \"Cell\",\n                                                                        \"draggable\": \".gjs-row\",\n                                                                        \"stylable-require\": [\n                                                                            \"flex-basis\"\n                                                                        ],\n                                                                        \"unstylable\": [\n                                                                            \"width\"\n                                                                        ],\n                                                                        \"resizable\": {\n                                                                            \"tl\": 0,\n                                                                            \"tc\": 0,\n                                                                            \"tr\": 0,\n                                                                            \"cl\": 0,\n                                                                            \"cr\": 1,\n                                                                            \"bl\": 0,\n                                                                            \"br\": 0,\n                                                                            \"minDim\": 1,\n                                                                            \"bc\": 0,\n                                                                            \"currentUnit\": 1,\n                                                                            \"step\": 0.2,\n                                                                            \"keyWidth\": \"flex-basis\"\n                                                                        },\n                                                                        \"classes\": [\n                                                                            {\n                                                                                \"name\": \"gjs-cell\",\n                                                                                \"private\": 1\n                                                                            }\n                                                                        ],\n                                                                        \"components\": [\n                                                                            {\n                                                                                \"type\": \"typed\",\n                                                                                \"strings\": [\n                                                                                    \"Text row one\",\n                                                                                    \"Text row two\",\n                                                                                    \"Text row three\"\n                                                                                ],\n                                                                                \"type-speed\": 40,\n                                                                                \"scriptUpdated\": 1\n                                                                            }\n                                                                        ]\n                                                                    }\n                                                                ]\n                                                            }\n                                                        ]\n                                                    },\n                                                    \"id\": \"HI6klSU7l1b7m1Tn\"\n                                                }\n                                            ],\n                                            \"type\": \"main\",\n                                            \"id\": \"yfOeVHY8bxCeQFdC\"\n                                        }\n                                    ]\n                                },\n                            }\n                        },\n                    },\n                });\n            }\n\n            if (!$.fn.callAjaxPublic) {\n                $.fn.callAjaxPublic = function (config) {\n                    return new Promise(\n                        (resolve, reject) => {\n                            let { url, method } = config;\n                            let ctx = {\n                                url: url,\n                                type: method, // dataType: 'json',\n                                contentType: \"application/json\",\n                                processData: true,\n                                data: 'GET',\n                                headers: {\n                                },\n                                success: function (rest, textStatus, jqXHR) {\n                                    resolve(rest);\n                                },\n                                error: function (jqXHR, textStatus, errorThrown) {\n                                    let resp_data = jqXHR.responseJSON;\n                                    if (resp_data && typeof resp_data === 'object') {\n                                        reject(resp_data);\n                                    } else if (jqXHR.status === 204) reject({ 'status': 204 });\n                                },\n                            }\n                            return $.ajax(ctx);\n                        }\n                    )\n                }\n            }\n\n            function loadTemplates(data) {\n                return `\n                    <div style=\"width: calc(100% / 3 - 10px);margin-right: 5px;margin-left: 5px;\">\n                        <p>${data.title}</p>\n                        <div class=\"row-show-template\" style=\"position: relative\">\n                            <img src=\"${data.image}\" style=\"width: 100%;overflow: hidden\" />\n                            <button \n                                type=\"button\"\n                                class=\"btn-show-template\"\n                                style=\"\n                                    position: absolute;top: 0;right: 0;\n                                    padding-left: 20px;padding-right: 20px;padding-top: 15px;padding-bottom: 15px;\n                                    background-color: green;color: white;\n                                    border: 0px;\n                                \" \n                                data-url=\"${urlTemplateDetail.replaceAll('{pk}', data.id)}\"\n                                data-title=\"${data.title}\"\n                            >+</button>\n                        </div>\n                    </div>\n                `\n            }\n            function fireLoading(title) {\n                Swal.fire({\n                    title: title,\n                    text: 'Loading...',\n                    icon: 'info',\n                    didOpen: () => {\n                        Swal.showLoading();\n                    },\n                    allowOutsideClick: false,\n                    willClose: () => {\n                        Swal.hideLoading();\n                    },\n                })\n            }\n\n            fireLoading(editor.I18n.t(\"grapesjs-plugin-page-template.templateTxt\"));\n            $.fn.callAjaxPublic({\n                url: urlTemplateList,\n                method: 'GET',\n            }).then(\n                (resp) => {\n                    let data = resp?.['data']?.['template_list'] || [];\n                    let itemGroup = $('#group-template-list');\n\n                    if (data && Array.isArray(data) && itemGroup.length > 0) {\n                        data.map(\n                            (item) => {\n                                itemGroup.append(\n                                    loadTemplates(item)\n                                )\n                            }\n                        )\n\n                        $('.btn-show-template').on('click', function () {\n                            let url = $(this).attr('data-url');\n                            Swal.fire({\n                                title: editor.I18n.t(\"grapesjs-plugin-page-template.areYouSure\"),\n                                text: $(this).attr('data-title'),\n                                icon: 'question',\n                                allowOutsideClick: false,\n                                showCancelButton: true,\n                                confirmButtonText: editor.I18n.t(\"grapesjs-plugin-page-template.okTxt\"),\n                                cancelButtonText: editor.I18n.t(\"grapesjs-plugin-page-template.cancelTxt\"),\n                            }).then(\n                                (result) => {\n                                    if (result.isConfirmed) {\n                                        editor.runCommand('core:canvas-clear');\n                                        fireLoading(editor.I18n.t(\"grapesjs-plugin-page-template.renderTemplateTxt\"));\n                                        $.fn.callAjaxPublic({\n                                            url: url,\n                                            method: 'GET',\n                                        }).then(\n                                            (resp) => {\n                                                let data = resp?.['data']?.['template_detail'] || {};\n                                                if (data && typeof data === 'object' && data.hasOwnProperty('project_data')) {\n                                                    editor.loadProjectData(data.project_data);\n                                                }\n                                                Swal.close();\n                                            },\n                                            (errs) => {\n                                                Swal.fire({\n                                                    title: editor.I18n.t('grapesjs-plugin-page-template.loadErrorTxt'),\n                                                    icon: \"error\",\n                                                });\n                                            }\n                                        )\n                                        editor.Modal.close();\n                                    }\n                                    \n                                }\n                            )\n\n\n                        })\n                    }\n\n                    Swal.close();\n                },\n                (errs) => {\n                    Swal.fire({\n                        title: editor.I18n.t('grapesjs-plugin-page-template.loadErrorTxt'),\n                        icon: \"error\",\n                    });\n                },\n            )\n        }\n    })\n\n};"],"names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","loadErrorTxt","templateTxt","renderTemplateTxt","areYouSure","okTxt","cancelTxt","editor","opts","arguments","length","undefined","urlTemplateList","urlTemplateDetail","options","i18n","I18n","addMessages","en","Panels","addButton","id","className","command","Modal","open","title","t","content","attributes","class","on","loadTemplates","data","image","replaceAll","fireLoading","Swal","fire","text","icon","didOpen","showLoading","allowOutsideClick","willClose","hideLoading","$","mockjax","url","type","contentType","responseText","template_detail","project_data","fn","callAjaxPublic","config","Promise","resolve","reject","method","ctx","processData","headers","success","rest","textStatus","jqXHR","error","errorThrown","resp_data","responseJSON","status","ajax","then","resp","itemGroup","Array","isArray","map","item","append","attr","showCancelButton","confirmButtonText","cancelButtonText","result","isConfirmed","runCommand","loadProjectData","close","errs"],"sourceRoot":""}