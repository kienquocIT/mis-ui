{% extends 'base.html' %}
{% load static i18n %}
{% block cssHeader %}
    <!-- Data Table CSS -->
    <link
            href="{% static 'vendors/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}"
            rel="stylesheet"
            type="text/css"
    />

    <!-- Select2 -->
    <link
            href="{% static 'vendors/select2/dist/css/select2.min.css' %}"
            rel="stylesheet"
            type="text/css"
    />

    <!-- Customize -->
    <link rel="stylesheet" href="{% static 'assets/css/core/hr/group/group_create.css' %}">

    <style>
        #upload-area {
            height: 150px;
        {#width: 150px;#} line-height: 150px;
            background-size: auto 100%;
            background-repeat: no-repeat;
            background-position: center top;
            text-align: center;
            cursor: pointer;
        }
    </style>
{% endblock %}
{% block pageAction %}
    <a
            class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret d-lg-inline-block d-none btn_support_submit"
            href="#" data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="save"
            data-bs-original-title="Save"
            data-form-id="frm_group_update"
    >
        <span class="btn-icon-wrap">
            <span class="feather-icon">
                <i data-feather="save"></i>
            </span>
        </span>
    </a>
{% endblock %}

{% block pageContent %}
    <form id="frm_group_update" class="needs-validation" data-url="/hr/group/{{ data.data.doc_id }}" data-method="PUT" novalidate data-url-redirect="{% url 'GroupList' %}" data-doc-id="{{ data.data.doc_id }}">
        {% csrf_token %}
        <div class="container-fluid">
            <div class="row">
                <div class="col-3">
                    <div class="card position-sticky" style="top: 10px; margin-top: 0; border: 0; box-shadow: none">
                        <div class="card-body" style="margin-top: -25px">
                            <div class="row">
                                <a class="nav-link active" href="#section5">
                                    <div class="form-group">
                                        <label class="form-label"><b>{% trans 'Input General Information' %}</b></label>
                                    </div>
                                </a>
                            </div>

                            <div class="row" style="margin-bottom: 10px">
                                <div class="col-12">
                                    <div class="border-line" style="border-bottom: solid; border-bottom-color: #007D88; margin-left: 3px">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <a class="nav-link active" href="#section6">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <b>{% trans 'Add Employees, Manager' %}</b>
                                        </label>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-9">
                    <div
                            data-bs-spy="scroll" data-bs-target="#scrollspy_demo_v" data-bs-smooth-scroll="true"
                            class="position-relative "
                    >
                        <!-- Section Input General Information -->
                        <div id="section5">
                            <div class="row">
                                <div class="col-4">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">{% trans 'Select Group Level' %}</label>
                                            <select
                                                    class="form-select" id="select-box-group-level-update"
                                                    data-url="{% url 'GroupLevelListAPI' %}"
                                                    data-method="GET"
                                                    name="group_level"
                                            >
                                                <option selected>Select...</option>
                                            </select>
                                            <span class="form-text text-muted">{% trans 'Level link to this group' %}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-8">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">{% trans 'Select Parent Group' %}</label>
                                            <select
                                                    class="form-select" id="select-box-group-update"
                                                    data-url="{% url 'GroupListAPI' %}"
                                                    data-method="GET"
                                                    name="parent_n"
                                            >
                                                <option selected>Select...</option>
                                            </select>
                                            <span class="form-text text-muted">{% trans 'Group parent of this group' %}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <label class="form-label">
                                        {% trans 'Reference Group Title' %}
                                    </label>
                                    <input
                                            type="text" class="form-control" placeholder="" name="first_name"
                                            id="reference-group-title"
                                            disabled
                                    >
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <label class="form-label">
                                        {% trans 'Input Display Group Title' %}
                                    </label>
                                    <input
                                            type="text" class="form-control" placeholder="Group Title A"
                                            name="title" id="group-title-update"
                                    >
                                    <span class="form-text text-muted">{% trans 'Name of Group' %}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <label class="form-label">
                                        {% trans 'Input Group Code' %}
                                    </label>
                                    <input
                                            type="text" class="form-control" placeholder="Group Code" name="code"
                                            id="group-code-update"
                                    >
                                    <span class="form-text text-muted">{% trans 'Code of Group' %}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <label class="form-label">
                                        {% trans 'Description' %}
                                    </label>
                                    <textarea
                                            class="form-control" rows="4" cols="50" name="description"
                                            id="group-description-update"
                                    ></textarea>
                                    <span class="form-text text-muted">{% trans 'Desciption of Group' %}</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section Add Employees, Manager -->
                        <div id="section6">
                            <div class="form-group">
                                <button
                                        type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
                                        aria-controls="offcanvasExample"
                                        style="background: none;border: none; color: #007D88"
                                >
                                <span
                                        class="btn-add-tenant" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                        title="{% trans 'Add Employee to group' %}" style=""
                                >
                                    <i class="fas fa-plus-circle"></i>
                                    {% trans 'Add employee to group' %}
                                </span>
                                </button>
                            </div>

                            <div
                                    class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight"
                                    aria-labelledby="offcanvasTopLabel"
                                    style="width: 70%; margin-top: 4em;"
                            >
                                <div class="offcanvas-header">
                                    <h5 id="offcanvasRightLabel">{% trans "Add Employee" %}</h5>
                                </div>

                                <div class="offcanvas-body form-group">
                                    <table
                                            id="datable-employee-list-popup-update" class="table nowrap w-100 mb-5"
                                            data-url="{% url 'EmployeeListAPI' %}"
                                            data-method="GET"
                                    >
                                        <thead>
                                        <tr>
                                            <th>Code</th>
                                            <th>Full Name</th>
                                            <th>Role</th>
                                            <th>Date Joined</th>
                                            <th>Username</th>
                                            <th>Status</th>
                                            <th>
                                                <span class="form-check">
                                                    <input
                                                            type="checkbox"
                                                            class="form-check-input check-select-all"
                                                            id="customCheck1"
                                                    >
                                                    <label class="form-check-label" for="customCheck1"></label>
                                                </span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                    <br><br>
                                    <div class="row">
                                        <div class="col-8"></div>
                                        <div
                                                class="col-2" data-bs-dismiss="offcanvas"
                                                aria-label="Close" style="padding-left: 50px"
                                        >
                                            <span
                                                    class="btn btn-primary" id="button-add-group-employee"
                                            >{% trans "Add" %}</span>
                                        </div>
                                        <div
                                                class="col-2" data-bs-dismiss="offcanvas"
                                                aria-label="Close"
                                        >
                                            <span class="btn btn-light">{% trans 'Cancel' %}</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <table
                                    id="datable-group-employee-show-update" class="table nowrap w-100 mb-5"
                            >
                                <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>Employee Name</th>
                                    <th>Role</th>
                                    <th>Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>

                            <div class="row">
                                <div class="col-6">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">
                                                {% trans '1st Manager System Title' %}
                                            </label>
                                            <input
                                                    type="text" class="form-control" placeholder=""
                                                    name="first_name"
                                                    id="first-manager-system-title"
                                                    disabled
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">
                                                {% trans '2nd Manager System Title' %}
                                            </label>
                                            <input
                                                    type="text" class="form-control" placeholder=""
                                                    name="first_name"
                                                    id="second-manager-system-title"
                                                    disabled
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-6">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">
                                                {% trans 'Input Display 1st Manager Title' %}
                                            </label>
                                            <input
                                                    type="text" class="form-control" placeholder="First Manager A"
                                                    name="first_manager_title" id="group-first-manager-title-update"
                                            >
                                            <span class="form-text text-muted">{% trans 'Title of 1st manager' %}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">
                                                {% trans 'Input Display 2nd Manager Title' %}
                                            </label>
                                            <input
                                                    type="text" class="form-control" placeholder="Second Manager A"
                                                    name="second_manager_title" id="group-second-manager-title-update"
                                            >
                                            <span class="form-text text-muted">{% trans 'Title of 2nd manager' %}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-6">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">{% trans 'First Manager Assign To' %}</label>
                                            <select
                                                    class="form-select" id="select-box-first-manager-update"
                                                    data-url="{% url 'EmployeeListAPI' %}"
                                                    data-method="GET"
                                                    name="first_manager"
                                            >
                                                <option selected>Select...</option>
                                            </select>
                                            <span class="form-text text-muted">{% trans 'Assign to one employee' %}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="row">
                                        <div class="form-group">
                                            <label class="form-label">{% trans 'Second Manager Assign To' %}</label>
                                            <select
                                                    class="form-select" id="select-box-second-manager-update"
                                                    data-url="{% url 'EmployeeListAPI' %}"
                                                    data-method="GET"
                                                    name="second_manager"
                                            >
                                                <option selected>Select...</option>
                                            </select>
                                            <span class="form-text text-muted">{% trans 'Assign to one employee' %}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <div class="form-check form-switch form-switch-lg mb-1" style="padding-left: 0">
                        <label class="form-label">
                            {% trans 'Active organization group after created' %}
                            <span class="field-required">(*)</span>
                        </label>
                        <input
                                type="checkbox"
                                class="form-check-input"
                                name="is_active" checked
                                required
                                style="margin-left: 0"
                        >
                    </div>
                </div>
            </div>
        </div>
    </form>
{% endblock %}


{% block jsFooter %}
    <!-- Data Table JS -->
    <script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-bs5/js/dataTables.bootstrap5.min.js' %}"></script>
    <script src="{% static 'vendors/jasny-bootstrap/dist/js/jasny-bootstrap.min.js' %}"></script>

    <!-- Select2 -->
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>

    <!-- Moment JS -->
    <script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
    <!-- Customize JS -->
    <script src="{% static 'assets/js/additional-methods.min.js' %}"></script>

    <script src="{% static 'assets/js/core/hr/group/group_update.js' %}"></script>
{% endblock %}