{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block cssHeader %}
    <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" type="text/css">
{% endblock %}
{% block jsHeader %}
{% endblock %}
{% block pageAction %}
    <button class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret flex-shrink-0 d-lg-inline-block d-none"
            href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" type="submit" form="frmDetailShipping"
            data-bs-original-title="Save">
        <span class="icon">
            <span class="feather-icon">
                <i data-feather="save"></i>
            </span>
        </span>
    </button>

    <a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret flex-shrink-0 d-lg-inline-block d-none"
       href="#" data-bs-toggle="tooltip" data-bs-placement="top" title=""
       data-bs-original-title="Refresh">
        <span class="icon">
            <span class="feather-icon">
                <i data-feather="refresh-cw"></i>
            </span>
        </span>
    </a>
{% endblock %}
{% block pageContent %}
    <form id="frmDetailShipping" data-method="PUT" data-url-detail="{% url "ShippingDetailAPI" pk=0 %}"
          data-url-redirect="{% url "ShippingList" %}">
        {% csrf_token %}
        <!--Field required-->
        <div class="row">
            <div class="col-4 form-group">
                <label class="form-label required">{% trans "Title" %}</label>
                <input type="text" class="form-control" placeholder="Input Name" name="title" id="inpTitle">
            </div>
            <div class="col-4 form-group">
                <label class="form-label required">{% trans "Margin" %}</label>
                <span class="input-affix-wrapper affix-wth-text ">
                <input class="form-control" type="number" name="margin" id="inpMargin">
                <span class="input-suffix">%</span>
            </span>
            </div>
            <div class="col-4 form-group">
                <label class="form-label required">{% trans "Currency" %}</label>
                <select id="chooseCurrency" class="select2 form-control" data-method="GET"
                        data-url="{% url "CurrencyListAPI" %}" name="currency"></select>
            </div>
        </div>
        <div class="row mt-3">
            <h5>{% trans "Cost Method" %}</h5>
        </div>
        <div class="row mt-3">
            <div class="col-6">
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input mt-1 ratioMethod" type="radio" value="0" name="cost_method"
                           checked id="check-method-0">
                    <label class="form-check-label" for="check-method-0">{% trans "Fixed price" %}</label>
                </div>
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input mt-1 ratioMethod" type="radio" value="1" name="cost_method"
                           id="check-method-1">
                    <label class="form-check-label" for="check-method-1">{% trans "Formula" %}</label>
                </div>
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input mt-1 ratioMethod" type="radio" value="2" name="cost_method"
                           disabled id="check-method-2">
                    <label class="form-check-label" for="check-method-2">{% trans "Service provider" %}</label>
                </div>
            </div>
        </div>

        <!--Tab Fixed price-->
        <div class="row mt-3">
            <div class=" col-4 form-group">
                <label class="form-label">{% trans "Amount" %}</label>
                <input class="form-control mask-money" type="text" data-return-type="number" placeholder="Input Amount" id="inputAmount"
                       name="fixed_price">
            </div>
        </div>
    </form>
    <!--Tab Formula-->
    <div class="condition-content hidden">
        <div class="row mt-3">
            <div class="col-2">
                <button type="button" class="btn btn-link btn-animated" id="btnAddCondition">
                <span><span class="icon"><span class="feather-icon"><i
                        data-feather="plus"></i></span></span><span>{% trans "Add New Condition" %}</span></span>
                </button>
            </div>
        </div>
        <div class="line-condition">
            <div class="formulaCondition">
                <div class="row">
                    <div class="col-3 form-group">
                        <label class="form-label">{% trans "At Location" %}</label>
                        <select class="select2 form-control chooseCity" id="chooseCityDefault" multiple
                                name="location"></select>
                    </div>
                    <div class="col-3 form-group">
                        <label class="form-label">{% trans "If" %}</label>
                        <select class="form-select" id="chooseUnit">
                            <option></option>
                            {% for item in data.unit %}
                                <option value="{{ item.id }}">{{ item.title }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-1 mt-2 form-group">
                        <label class="form-label"></label>
                        <select class="form-select chooseOperator" name="comparison_operators">
                            <option value="1"><</option>
                            <option value="2">></option>
                            <option value="3">≤</option>
                            <option value="4">≥</option>
                        </select>
                    </div>
                    <div class="col-4 mt-2 form-group">
                        <label class="form-label"></label>
                        <span class="input-affix-wrapper affix-wth-text">
                            <input type="number" class="form-control inpThreshold"
                                   aria-describedby="basic-addon1">
                            <span class="input-suffix spanUnit"></span>
                        </span>
                    </div>
                    <div class="col-1"></div>
                </div>
                <div class="row">
                    <div class="col-3"></div>
                    <div class="col-9 row">
                        <div class="col-3">
                            <div class="form-label-group ml-3">
                                <input type="checkbox" class="form-check-input cbFixedPrice" checked>
                                <label class="form-label">{% trans "Fixed price" %}</label>
                            </div>
                            <input type="text" class="form-control inpAmount mask-money" data-return-type="number" name="amount_condition">
                        </div>
                        <div class="col-4 mt-5 hidden divNotFixed">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">+</span>
                                </div>
                                <input type="text" class="form-control inpAmountExtra mask-money"
                                       aria-label="Amount (to the nearest dollar)" data-return-type="number">
                                <div class="input-group-append">
                                    <span class="input-group-text">*</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-5 mt-5 hidden divNotFixed">
                            <label class="form-label displayUoMGroup mt-1"></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-1 ">
                    <button type="button" class="btn btn-link btn-animated btnAddFormula">
                    <span><span class="icon"><span class="feather-icon"><i
                            data-feather="plus"></i></span></span><span>{% trans "Add If" %}</span></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--Tab hidden to Add condition and Add formula for condition-->
    <div class="hidden" id="ifInCondition">
        <div class="formulaCondition newFormula">
            <div class="row mt-3">
                <div class="col-3 form-group"></div>
                <div class="col-3 form-group">
                    <label class="form-label">{% trans "If" %}</label>
                    <input type="text" class="form-control inpUnit" readonly value="">
                </div>
                <div class="col-1 mt-2 form-group">
                    <label class="form-label"></label>
                    <select class="form-select chooseOperator" name="comparison_operators">
                        <option value="1"><</option>
                        <option value="2">></option>
                        <option value="3">≤</option>
                        <option value="4">≥</option>
                    </select>
                </div>
                <div class="col-4 mt-2 form-group">
                    <label class="form-label"></label>
                    <span class="input-affix-wrapper affix-wth-text">
                        <input type="number" class="form-control inpThreshold"
                               aria-describedby="basic-addon1">
                        <span class="input-suffix spanUnit"></span>
                    </span>
                </div>
                <div class="col-1"></div>
            </div>
            <div class="row">
                <div class="col-3"></div>
                <div class="col-9 row">
                    <div class="col-3">
                        <div class="form-label-group ml-3">
                            <input type="checkbox" class="form-check-input cbFixedPrice" checked>
                            <label class="form-label">{% trans "Fixed price" %}</label>
                        </div>
                        <input type="text" class="form-control inpAmount mask-money" data-return-type="number" name="amount_condition">
                    </div>
                    <div class="col-4 mt-5 hidden divNotFixed">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">+</span>
                            </div>
                            <input type="text" class="form-control inpAmountExtra mask-money"
                                   aria-label="Amount (to the nearest dollar)" data-return-type="number">
                            <div class="input-group-append">
                                <span class="input-group-text">*</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-3 mt-5 hidden divNotFixed">
                        <label class="form-label displayUoMGroup mt-1"></label>
                    </div>
                    <div class="col-2 mt-5">
                        <a class="btn btn-icon btn-del btn btn-icon btn-flush-danger flush-soft-hover btn-rounded btnDelFormula">
                        <span class="btn-icon-wrap"><span class="feather-icon"><i
                                data-feather="trash-2"></i></span></span>
                        </a></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-2"></div>
            <div class="col-1 ">
                <button type="button" class="btn btn-link btn-animated btnAddFormula">
                    <span><span class="icon"><span class="feather-icon"><i
                            data-feather="plus"></i></span></span><span>{% trans "Add If" %}</span></span>
                </button>
            </div>
        </div>
    </div>
    <div class="hidden" id="newCondition">
        <div class="line-condition newLine">
            <div class="formulaCondition">
                <div class="row">
                    <div class="col-3 form-group">
                        <label class="form-label">{% trans "At Location" %}</label>
                        <select class="form-control chooseCity" multiple>
                            <option value="1">Other cities</option>
                            {% for item in data.cities %}
                                <option value="{{ item.id }}">{{ item.title }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-3 form-group">
                        <label class="form-label">{% trans "If" %}</label>
                        <input type="text" class="form-control inpUnit" readonly value="">
                    </div>
                    <div class="col-1 mt-2 form-group">
                        <label class="form-label"></label>
                        <select class="form-select chooseOperator" name="comparison_operators">
                            <option value="1"><</option>
                            <option value="2">></option>
                            <option value="3">≤</option>
                            <option value="4">≥</option>
                        </select>
                    </div>
                    <div class="col-4 mt-2 form-group">
                        <label class="form-label"></label>
                        <span class="input-affix-wrapper affix-wth-text">
                            <input type="number" class="form-control inpThreshold"
                                   aria-describedby="basic-addon1">
                            <span class="input-suffix spanUnit"></span>
                        </span>
                    </div>
                    <div class="col-1">
                        <button type="button" class="btn btn-link btn-animated btnDelCondition">
                            <span><span class="icon"><span class="feather-icon"></span></span><span
                                    class="text-danger">{% trans "Delete" %}</span></span>
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3"></div>
                    <div class="col-9 row">
                        <div class="col-3">
                            <div class="form-label-group ml-3">
                                <input type="checkbox" class="form-check-input cbFixedPrice" checked>
                                <label class="form-label">{% trans "Fixed price" %}</label>
                            </div>
                            <input type="text" class="form-control inpAmount mask-money" data-return-type="number" name="amount_condition">
                        </div>
                        <div class="col-4 mt-5 hidden divNotFixed">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">+</span>
                                </div>
                                <input type="text" class="form-control inpAmountExtra mask-money"
                                       aria-label="Amount (to the nearest dollar)" data-return-type="number">
                                <div class="input-group-append">
                                    <span class="input-group-text">*</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-5 mt-5 hidden divNotFixed">
                            <label class="form-label displayUoMGroup mt-1"></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-1 ">
                    <button type="button" class="btn btn-link btn-animated btnAddFormula">
                    <span><span class="icon"><span class="feather-icon"><i
                            data-feather="plus"></i></span></span><span>{% trans "Add If" %}</span></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--City Data-->
    {{ data.cities | json_script:"id-city-list" }}
    {{ data.unit | json_script:"id-unit-list" }}

{% endblock %}
{% block jsFooter %}
    <script src="{% static 'assets/js/masterdata/saledata/shipping/shipping_detail.js' %}"></script>
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>
{% endblock %}
