{% load i18n string_utils %}

<div class="table-responsive">
    <table
            id="permissions_list_new" class="table nowrap w-100"
            data-change-enable="{% if add_new_enabled == "true" %}true{% else %}false{% endif %}"
            data-msg-general="{% trans 'General' %}"
            data-msg-all="{% trans 'All' %}"
            data-msg-of-me="{% trans "Themselves" %}"
            data-msg-staff="{% trans "Their staff" %}"
            data-msg-same-group="{% trans "Member in their group" %}"
            data-msg-all-employee="{% trans "All users" %}"

            data-url-app-detail="{% url 'ApplicationDetailAPI' pk='__pk__' %}"
    >
        <thead>
        <tr>
            <th>{% trans 'Application' %}</th>
            <th>{% trans 'All' %}</th>
            <th id="headingPermitView">{% trans 'View' %}</th>
            <th id="headingPermitCreate">{% trans 'Create' %}</th>
            <th id="headingPermitEdit">{% trans 'Edit' %}</th>
            <th id="headingPermitDelete">{% trans 'Delete' %}</th>
            <th>
                {% trans 'Jurisdiction' %}
                <i
                        class="fa-solid fa-circle-info"
                        data-bs-toggle="tooltip" data-bs-placement="bottom"
                        title="{% trans 'The permission scope will not include the person for whom the permission is configured, except for the scope Themselves.' %}"
                ></i>
            </th>
            <th>
                {% trans 'Space' %}
                <i
                        class="fa-solid fa-circle-info"
                        data-bs-toggle="tooltip" data-bs-placement="bottom"
                        title="{% trans 'Only for view' %}. {% trans 'Allow the action to access data in both the general space and another space.' %}"
                ></i>
            </th>
            <th></th>
        </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
        <tr id="idx-new-row-add">
            <td>
                {# get_from: employee, role, opportunity, project #}
                <select
                        id="new-row-app"
                        class="form-select"
                        data-base-url="{% url 'PlanAppGetAppListAPI' pk=pk %}?get_from={{get_from}}&pageSize=-1"
                        data-url="{% url 'PlanAppGetAppListAPI' pk=pk %}?get_from={{get_from}}&pageSize=-1"
                        data-keyResp="app_list"
                        data-keyText="title_i18n"
                >
                </select>
                <label for="new-row-app" class="d-none"></label>
            </td>
            <td>
                <div class="form-check form-switch mb-1">
                    <input
                            type="checkbox"
                            class="form-check-input"
                            id="new-row-all"
                            disabled
                    >
                    <label for="new-row-all" class="d-none"></label>
                </div>
            </td>
            <td>
                <div class="form-check form-switch mb-1">
                    <input
                            type="checkbox"
                            class="form-check-input"
                            id="new-row-view"
                            disabled
                    >
                    <label for="new-row-view" class="d-none"></label>
                </div>
            </td>
            <td>
                <div class="form-check form-switch mb-1">
                    <input
                            type="checkbox"
                            class="form-check-input"
                            id="new-row-create"
                            disabled
                    >
                    <label for="new-row-create" class="d-none"></label>
                </div>
            </td>
            <td>
                <div class="form-check form-switch mb-1">
                    <input
                            type="checkbox"
                            class="form-check-input"
                            id="new-row-edit"
                            disabled
                    >
                    <label for="new-row-edit" class="d-none"></label>
                </div>
            </td>
            <td>
                <div class="form-check form-switch mb-1">
                    <input
                            type="checkbox"
                            class="form-check-input"
                            id="new-row-delete"
                            disabled
                    >
                    <label for="new-row-delete" class="d-none"></label>
                </div>
            </td>
            <td>
                <select class="form-select" id="new-row-range" disabled>
                    <option value="" selected></option>
                    {% if range_allowed|val_in_arr:"1" == '1' %}
                        <option value="1">{% trans "Themselves" %}</option>
                    {% endif %}
                    {% if range_allowed|val_in_arr:"2" == '1' %}
                        <option value="2">{% trans "Their staff" %}</option>
                    {% endif %}
                    {% if range_allowed|val_in_arr:"3" == '1' %}
                        <option value="3">{% trans "Member in their group" %}</option>
                    {% endif %}
                    {% if range_allowed|val_in_arr:"4" == '1' %}
                        <option value="4">{% trans "All users" %}</option>
                    {% endif %}
                </select>
                <label for="new-row-range" class="d-none"></label>
            </td>
            <td>
                <select class="form-select" id="new-row-space" disabled>
                    <option value="" selected></option>
                    <option value="0" disabled>{% trans 'General' %}</option>
                    <option value="1" disabled>{% trans 'All' %}</option>
                </select>
                <label for="new-row-space" class="d-none"></label>
            </td>
            <td>
                <div class="d-flex justify-content-end">
                    <button class="btn btn-primary" id="new-row-add" type="button" disabled>{% trans 'Add' %}</button>
                </div>
            </td>
        </tr>
        </tfoot>
    </table>
</div>