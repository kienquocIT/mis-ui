/*! grapesjs-plugin-page-template - 1.0.21 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["grapesjs-plugin-page-template"]=t():e["grapesjs-plugin-page-template"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};e.r(t),e.d(t,{default:()=>l});const a={'grapesjs-plugin-page-template':{loadErrorTxt:"Load Errors",templateTxt:"Templates",renderTemplateTxt:"Render Templates",areYouSure:'Are you sure?',okTxt:"Ok",cancelTxt:"Cancel"}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=t?.['urlTemplateList']||'/test/templates',n=t?.['urlTemplateDetail']||'/test/template/{pk}',o={i18n:{},...t};e.I18n&&e.I18n.addMessages({en:a,...o.i18n}),e.Commands.add('templates-list',(function(){e.Modal.open({title:e.I18n.t("grapesjs-plugin-page-template.templateTxt"),content:`\n            <div>\n                <div style="width: 100%;">\n                    5 results\n                </div>\n                <div id="group-template-list" style="width: 100%;display: flex;flex-wrap: wrap;"></div>\n            </div>\n            `,attributes:{class:'my-small-modal'}})})),e.on('modal',(function(t){if('my-small-modal'===t.attributes.class&&!0===t.open){function a(e){return`\n                    <div style="width: calc(100% / 3 - 10px);margin-right: 5px;margin-left: 5px;">\n                        <p>${e.title}</p>\n                        <div class="row-show-template" style="position: relative">\n                            <img src="${e.image}" style="width: 100%;overflow: hidden" />\n                            <button \n                                type="button"\n                                class="btn-show-template"\n                                style="\n                                    position: absolute;top: 0;right: 0;\n                                    padding-left: 20px;padding-right: 20px;padding-top: 15px;padding-bottom: 15px;\n                                    background-color: green;color: white;\n                                    border: 0px;\n                                " \n                                data-url="${n.replaceAll('{pk}',e.id)}"\n                                data-title="${e.title}"\n                            >+</button>\n                        </div>\n                    </div>\n                `}function o(e){Swal.fire({title:e,text:'Loading...',icon:'info',didOpen:()=>{Swal.showLoading()},allowOutsideClick:!1,willClose:()=>{Swal.hideLoading()}})}'/test/templates'===l&&($.mockjax({url:'/test/templates',type:'GET',contentType:"application/json",responseText:{data:{template_list:[{id:1,title:'Template 2',image:'https://dummyimage.com/1280x1500/44b3cf/fff'},{id:2,title:'Template 3',image:'https://dummyimage.com/1280x1500/7de020/fff'},{id:3,title:'Template 4',image:'https://dummyimage.com/1280x1500/de21bf/fff'},{id:4,title:'Template 5',image:'https://dummyimage.com/1280x1500/de9221/fff'}]}}}),$.mockjax({url:/\/test\/template\/(.)*/gm,type:'GET',contentType:"application/json",responseText:{data:{template_detail:{project_data:{assets:[],styles:[{selectors:[{name:"gjs-row",private:1}],style:{display:"flex","justify-content":"flex-start","align-items":"stretch","flex-wrap":"nowrap",padding:"10px"}},{selectors:[{name:"gjs-row",private:1}],style:{"flex-wrap":"wrap"},mediaText:"(max-width: 768px)",atRuleType:"media"},{selectors:[{name:"gjs-cell",private:1}],style:{"min-height":"75px","flex-grow":"1","flex-basis":"100%"}}],pages:[{frames:[{component:{type:"wrapper",stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"],attributes:{id:"ijpg"},components:[{name:"Row",droppable:".gjs-cell",resizable:{tl:0,tc:0,tr:0,cl:0,cr:0,bl:0,br:0,minDim:1},classes:[{name:"gjs-row",private:1}],attributes:{id:"iarj"},components:[{name:"Cell",draggable:".gjs-row","stylable-require":["flex-basis"],unstylable:["width"],resizable:{tl:0,tc:0,tr:0,cl:0,cr:1,bl:0,br:0,minDim:1,bc:0,currentUnit:1,step:.2,keyWidth:"flex-basis"},classes:[{name:"gjs-cell",private:1}],components:[{type:"typed",strings:["Text row one","Text row two","Text row three"],"type-speed":40,scriptUpdated:1}]}]}]},id:"HI6klSU7l1b7m1Tn"}],type:"main",id:"yfOeVHY8bxCeQFdC"}]}}}}})),$.fn.callAjaxPublic||($.fn.callAjaxPublic=function(e){return new Promise(((t,a)=>{let{url:l,method:n}=e,o={url:l,type:n,contentType:"application/json",processData:!0,data:'GET',headers:{},success:function(e,a,l){t(e)},error:function(e,t,l){let n=e.responseJSON;n&&'object'==typeof n?a(n):204===e.status&&a({status:204})}};return $.ajax(o)}))}),o(e.I18n.t("grapesjs-plugin-page-template.templateTxt")),$.fn.callAjaxPublic({url:l,method:'GET'}).then((t=>{let l=t?.['data']?.['template_list']||[],n=$('#group-template-list');l&&Array.isArray(l)&&n.length>0&&(l.map((e=>{n.append(a(e))})),$('.btn-show-template').on('click',(function(){let t=$(this).attr('data-url');Swal.fire({title:e.I18n.t("grapesjs-plugin-page-template.areYouSure"),text:$(this).attr('data-title'),icon:'question',allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:e.I18n.t("grapesjs-plugin-page-template.okTxt"),cancelButtonText:e.I18n.t("grapesjs-plugin-page-template.cancelTxt")}).then((a=>{a.isConfirmed&&(e.runCommand('core:canvas-clear'),o(e.I18n.t("grapesjs-plugin-page-template.renderTemplateTxt")),$.fn.callAjaxPublic({url:t,method:'GET'}).then((t=>{let a=t?.['data']?.['template_detail']||{};a&&'object'==typeof a&&a.hasOwnProperty('project_data')&&e.loadProjectData(a.project_data),Swal.close()}),(t=>{Swal.fire({title:e.I18n.t('grapesjs-plugin-page-template.loadErrorTxt'),icon:"error"})})),e.Modal.close())}))}))),Swal.close()}),(t=>{Swal.fire({title:e.I18n.t('grapesjs-plugin-page-template.loadErrorTxt'),icon:"error"})}))}}))};return t})()));
//# sourceMappingURL=index.js.map