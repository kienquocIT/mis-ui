{% load i18n string_utils %}

{% random_str 10 True as id_modal %}

<div
        class="card p-1 dad-file-control-group"
        {% if id %} id="{{ id }}" {% endif %}
        data-url="{% url 'AttachmentUpload' %}"
        data-msg-upload-exception="{% trans 'Has exception in upload progress' %}"
        data-msg-skip-exist-file="{% trans 'Skip add exist file' %}"
        data-msg-description-file="{% trans 'Descriptions of file' %}"
>
    <div
            class="dm-uploader w-100"
            style="{% if is_show_dad == False %} display: none; {% endif %}"
    >
        <div class="row mx-3 my-2">
            <h5>{% trans 'Drag & drop Files here' %}</h5>
        </div>
        <div class="row mb-2 mx-3">
            <div class="col-xs-12 col-sm-6 mb-1">
                <span
                    data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="{% trans 'Open the file Browser' %}"
                >
                    <div
                            class="btn btn-primary btn-block"
                    >
                        <i class="fa-solid fa-computer"></i>
                        <input type="file" title="Click to add Files"/>
                        {% csrf_token %}
                    </div>
                </span>
            </div>
            <div class="col-xs-12 col-sm-6 mb-1">
                <span
                    data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="{% trans 'Open the file Cloud' %}"
                >
                    <button
                        type="button"
                        class="btn btn-primary btn-block btn-select-cloud"
                        data-bs-toggle="modal" data-bs-target="#{{ id_modal }}"
                    >
                        <i class="fa-solid fa-server"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="row mx-3 mb-2">
            <div class="instruction-upload-file-text">

            </div>
            <script type="text/html" class="template-title-error-type">
                {% trans 'File upload type is not support.' %}
            </script>
            <script type="text/html" class="template-title-error-size">
                {% trans 'File upload size exceeds the limit.' %}
            </script>
            <script type="text/html" class="template-title-error-ext">
                {% trans 'File upload size exceeds the limit.' %}
            </script>
            <script type="text/html" class="template-data-error-type">
                <p class="p-0 m-0">
                    {% trans 'Allow uploading files of' %} %%fileaccept%%.
                </p>
            </script>
            <script type="text/html" class="template-data-error-size">
                <p class="p-0 m-0">
                    {% trans 'The file size must be smaller than' %} %%filesizelimit%%.
                </p>
            </script>
        </div>
    </div>
    <div class="min-h-40p pt-2 dm-uploader-results">
        {#        https://cdn-icons-png.flaticon.com/512/3135/3135715.png #}
        {#  li.item with plain text      #}
        <script type="text/html" class="pattern-file-text-plain">
            <li
                    class="media dm-uploader-result-item d-flex align-items-center p-2 state-f-wait"
                    data-file-id="%%fileid%%"
            >
                <img
                        class="mr-3 mw-50p mh-50p" src="%%filecapture%%"
                        alt="Preview"
                >
                <div class="media-body mb-1">
                    <p class="f-item-name">%%filename%%</p>
                    <small class="f-item-info">%%fileinfo%%</small>
                    <input type="text" class="form-control-plaintext file-txt-remark" placeholder="" value="%%fileremark%%" readonly disabled>
                </div>
                <button
                        type="button"
                        class="ml-auto btn btn-rounded btn-icon btn-percent-upload mr-1" disabled
                ></button>
                <button
                        type="button"
                        class="ml-auto btn btn-danger btn-rounded btn-icon btn-destroy-file"
                >
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </li>
        </script>
        {#  -- li.item with plain text      #}

        <div class="dm-uploader-no-files" style="display: none;">
            <div class="d-flex justify-content-center">
                <small class="text-muted text-center empty">{% trans 'No files uploaded' %}.</small>
            </div>
        </div>
        <ul class="p-1 dm-uploader-result-list m-0" style="display: none;"></ul>
    </div>

    <div
            class="modal fade modal-file-cloud" id="{{ id_modal }}" tabindex="-1" role="dialog" aria-labelledby="{{ id_modal }}Label"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans "Open the file Cloud" %}</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body overflow-y-auto overflow-x-hidden mh-50vh">
                    <table
                            class="table nowrap w-100 select-file-cloud"
                            data-url="{% url 'FilesUnusedAPI' %}"
                    >
                        <thead>
                        <tr>
                            <td>#</td>
                            <td>{% trans 'Name' %}</td>
                            <td>{% trans 'Size' %}</td>
                            <td>{% trans 'Remarks' %}</td>
                            <td>{% trans 'Date Created' %}</td>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer selected-file-cloud-group" style="display: none;">
                    <div class="selected-file-cloud d-flex justify-content-start w-100"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
                    <button type="button" class="btn btn-primary save-change-file-cloud" data-bs-dismiss="modal">{% trans 'Save' %}</button>
                </div>
            </div>
        </div>
    </div>
</div>