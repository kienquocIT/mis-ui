{% extends 'base.html' %}
{% load i18n static %}
{% block title %}{% trans 'Good receipt create' %}{% endblock %}
{% block cssHeader %}
    <!-- Daterangepicker CSS -->
    <link href="{% static 'vendors/daterangepicker/daterangepicker.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" type="text/css"/>
{% endblock %}
{% block pageAction %}
    <button class="btn btn-flush-success btn-animated mr-1 font-5" type="submit" form="good_receipt_form"
            data-bs-toggle="tooltip" data-bs-placement="top" title="Save"
            data-bs-original-title="Save">
        <span class="icon">
            <span class="feather-icon">
                <i data-feather="save"></i>
            </span>
        </span>
    </button>
    <button class="btn btn-flush-danger btn-animated font-4" type="button" data-bs-toggle="tooltip"
            data-bs-placement="top" title="Back" data-bs-original-title="Back"
            onclick="window.history.go(-1); return false;">
        <span class="icon">
            <span class="feather-icon">
                <i class="fas fa-step-backward"></i>
            </span>
        </span>
    </button>
{% endblock %}
{% block pageContent %}
    <!-- Form Create-->
    <form id="good_receipt_form" data-url="{% url 'GoodReceiptListAPI' %}" data-method="POST" method="post" novalidate
          data-url-redirect="{% url 'GoodReceiptList' %}" autocomplete="off">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-6 col-xs-12">
                <div class="form-group">
                    <label class="form-label required" for="title">{% trans 'Name' %}</label>
                    <input class="form-control" type="text" name="title" id="title" required>
                </div>
            </div>
            <div class="col-md-6 col-xs-12">
                {#                status #}
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-xs-12">
                <div class="input-group">
                    <label class="form-label w-100" for="supplier">{% trans 'Supplier' %}</label>
                    <div class="input-affix-wrapper">
                        <div class="dropdown input-prefix">
                            <i class="fas fa-info-circle"
                               data-bs-toggle="dropdown"
                               data-dropdown-animation
                               aria-haspopup="true"
                               aria-expanded="false"
                               disabled
                            ></i>
                            <div class="dropdown-menu w-210p mt-2">
                            </div>
                        </div>
                        <select class="form-control dropdown-select_two"
                                name="supplier"
                                id="supplier"
                                data-multiple="false"
                                data-keyResp="account_list"
                                data-url="{% url 'AccountListAPI' %}"
                                data-link-detail="{% url 'AccountDetail' 1 %}"
                                data-params="{'account_types_mapped__account_type_order': 1}"
                                data-format="name"
                                data-template-format="[{'name':'Title', 'value': 'title'},{'name':'Code', 'value': 'code'}]"
                        ></select>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xs-12">
                <div class="form-group">
                    <label class="form-label" for="date_created">{% trans 'Created Date' %}</label>
                    <input class="form-control" type="text" name="date_created" id="date_created" disabled
                           placeholder="{% trans 'DD/MM/YYYY' %}" autocomplete="off" value="{{ data.date_created }}">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-xs-12">
                <div class="row mt-3">
                    <div class="col-xs-12 col-md-4">
                        <div class="form-group mb-0 mt-2">
                            <div class="form-check d-flex justify-content-start align-items-center mr-2">
                                <input type="checkbox" class="form-check-input" name="receipt_for_po"
                                       id="receipt_for_po">
                                <label class="form-check-label"
                                       for="receipt_for_po">{% trans 'Receipt for PO' %}</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-4">
                        <button type="button" class="btn btn-outline-primary btn-animated input-po-click" disabled>
                            {% trans 'Copy From PO' %}
                        </button>
                    </div>
                    <div class="col-xs-12 col-md-4">
                        <span class="po_code title-code text-primary font-4"></span>
                        <input type="hidden" id="po_code" name="po_code">
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xs-12">
                <div class="form-group">
                    <label class="form-label required" for="posting_date">{% trans 'Posting date' %}</label>
                    <input class="form-control" type="text" name="posting_date" id="posting_date"
                           placeholder="{% trans 'DD/MM/YYYY' %}" autocomplete="off"
                           required>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 offset-md-6 col-xs-12 offset-xs-0">
                <div class="row">
                    <div class="col-xs-12 col-md-4">
                        <label class="form-label" for="status">{% trans 'Status' %}</label>
                    </div>
                    <div class="col-xs-12 col-md-8">
                        <input class="form-control" type="text" name="status" id="status" disabled>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-md-5 mt-sm-2">
            <div class="col-xs-12">
                <ul class="nav nav-light nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#tab_block_1">
                            <span class="nav-link-text">{% trans 'Line Detail' %}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#tab_attachments">
                            <span class="nav-link-text">{% trans 'Attachments' %}</span>
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab_block_1">
                        <table id="line_detail_table" class="table nowrap mb-5">
                            <thead>
                            <th>#</th>
                            <th>{% trans 'Product' %}</th>
                            <th>{% trans "Warehouse" %}</th>
                            <th>{% trans "UoM" %}</th>
                            <th>{% trans 'Quantity' %}</th>
                            <th>{% trans "Unit price" %}</th>
                            <th>{% trans "Tax" %}</th>
                            <th>{% trans "Subtotal price" %}</th>
                            <th></th>
                            </thead>
                        </table>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="col-2">
                                    <button type="button" class="btn btn-link btn-animated"
                                            id="btn-add-product">
                                        <span>
                                            <span class="icon">
                                                <i class="bi bi-plus font-5"></i>
                                            </span>
                                            <span>{% trans 'Add product' %}</span>
                                        </span>
                                    </button>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-4 offset-lg-8 offset-sm-6">
                                <div class="d-flex justify-content-between align-items-center">
                                    <p>{% trans 'Pretax Amount' %}: </p>
                                    <span class="pretax mask-money" data-init-money="0"></span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <p>{% trans 'Taxes' %}: </p>
                                    <span class="taxes mask-money" data-init-money="0"></span>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between align-items-center">
                                    <p>{% trans 'Total' %}: </p>
                                    <span class="total mask-money" data-init-money="0"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tab_attachments">
                        <div class="form-group">
                            <button
                                    type="button"
                                    class="form-control btn btn-outline-primary btn-file-upload"
                                    data-f-input-name="attachments"
                                    data-f-input-required="false"
                                    data-f-input-disabled="false"
                                    data-f-name-ele-id="#fileNameTestDisplay"
                            >{% trans 'Click here to upload image' %}</button>
                            <p id="fileNameTestDisplay"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!--Form create end-->
    <input type="hidden" id="trans-factory"
           data-product="{% trans 'Product list is empty' %}"
           data-row-error="{% trans 'Row {} is missing info please verify again.' %}"
           data-po-title="{% trans 'Input your PO code here' %}"
           data-po-save="{% trans 'Save' %}"
    >
    <input type="hidden" id="url-factory"
        data-product="{% url 'ProductListAPI' %}"
        data-product-detail="{% url 'ProductDetail' 1 %}"
        data-warehouse="{% url 'WareHouseListAPI' %}"
        data-uom="{% url 'UnitOfMeasureListAPI' %}"
        data-tax="{% url 'TaxListAPI' %}"
    >

{% endblock %}
{% block jsFooter %}
    <!-- Daterangepicker JS -->
    <script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'vendors/daterangepicker/daterangepicker.js' %}"></script>
    <!-- Select2 -->
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>
    <script src="{% static 'vendors/select2/dist/js/init-select2.js' %}"></script>
    <script src="{% static 'assets/js/masterdata/saledata/goodreceipt/good-receipt.js' %}"></script>
{% endblock %}

