{% load static i18n compress %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% if base.tenant_current_data %}
        <title>{{ base.tenant_current_data.code|upper }} - {{ base.tenant_current_data.title }}</title>
    {% else %}
        <title>MIS - {% block title %}Management Information System{% endblock %}</title>
    {% endif %}
    <meta name="description" content="MIS - Management Information System - quantrimis.com.vn"/>

    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'assets/images/logo/logo-28x16.png' %}">
    <link rel="icon" href="{% static 'assets/images/logo/logo-28x16.png' %}" type="image/x-icon">

    {% compress css %}
        <!-- Data Table CSS -->
        <link
                href="{% static 'vendors/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}" rel="stylesheet"
                type="text/css"
        />
        <link
                href="{% static 'vendors/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css' %}"
                rel="stylesheet" type="text/css"
        />
        <link
                href="{% static 'vendors/bootstrap@4.0.0/dist/css/bootstrap.min.css' %}"
                rel="stylesheet" type="text/css"
        />

        <!-- CSS -->
        <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/loading-spinner.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/font-awesome.min.css' %}">
        <link href="{% static 'assets/css/my-style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/notify.css' %}" rel="stylesheet" type="text/css">
        <style>
            @font-face {
                font-family: "Roboto";
                src: url({% static 'assets/fonts/roboto/Roboto-Regular.ttf' %});
            }
        </style>
        <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/plugins/drawer.css' %}" rel="stylesheet" type="text/css">
        {% block cssHeader %}
        {% endblock %}
    {% endcompress %}
    {% compress js %}
        {% block jsHeader %}{% endblock %}
    {% endcompress %}
</head>
<body>
<!-- Wrapper -->
<div
        class="hk-wrapper" data-layout="vertical" data-layout-style="collapsed" data-menu="light" data-footer="simple"
        data-hover="active"
>
    <p
            style="display: none" id="get-menu-active" data-nav-menu="{{ nav.menu_id_current }}"
            data-nav-tenant="{{ nav.space_code_current }}"
    ></p>
    {% include 'extends/top_nav.html' %}

    <!-- Vertical Nav -->
    <div class="hk-menu">
        {% include 'extends/vertical_nav_brand.html' %}

        {% include 'extends/vertical_nav_main_menu.html' %}
    </div>
    <div id="hk_menu_backdrop" class="hk-menu-backdrop"></div>
    <!-- /Vertical Nav -->

    <!-- Main Content -->
    <div class="hk-pg-wrapper pb-0">
        <div class="hk-pg-body py-0">
            <div class="blogapp-wrap blogapp-sidebar-toggle">
                <nav class="blogapp-sidebar">
                    {% include 'extends/app_sidebar.html' %}
                </nav>
                <div class="blogapp-content">
                    <div class="blogapp-detail-wrap">
                        <header class="blog-header">
                            <div class="d-flex align-items-center">
                                {% include 'extends/breadcrumb.html' %}
                            </div>
                            <div class="blog-options-wrap">
                                {% block pageAction %}{% endblock %}
                                <button
                                        type="button"
                                        class="hidden btn-action-wf btn btn-icon btn-flush-dark btn-rounded flush-soft-hover"
                                        data-value=""
                                        id="btnMainAction"
                                >
                                    <span
                                            class="icon"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="top"
                                            data-bs-original-title="{% trans 'Approval' %}"
                                    ></span>
                                </button>

                                <div class="dropdown hidden">
                                    <button
                                            aria-expanded="false" data-bs-toggle="dropdown"
                                            class="btn btn-default btn-icon btn-flush-dark btn-rounded flush-soft-hover"
                                            type="button"
                                    >
                                        <span
                                                class="icon"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="top"
                                                data-bs-original-title="{% trans 'More actions' %}"
                                        >
                                            ...
                                        </span>
                                    </button>
                                    <div role="menu" class="dropdown-menu" id="idxGroupAction">
                                        {% for key, value in base_workflow.items %}
                                            <li class="hidden btn-action-wf" data-value="{{ key }}">
                                                <div class="dropdown-item"><i
                                                        class="icon-action-wf mr-1 {{ value.1 }}"
                                                ></i> {{ value.0 }}</div>
                                            </li>
                                        {% endfor %}
                                    </div>
                                    {% if base_workflow.length > 0 %}
                                        {% csrf_token %}
                                    {% endif %}
                                </div>

                                <div class="v-separator  d-lg-inline-block d-none"></div>

                                <a
                                        id="btnLogShow"
                                        class="hidden btn btn-icon btn-flush-dark btn-rounded flush-soft-hover ntt-drawer-toggle-link"
                                        data-drawer-target="#drawer_log_data"
                                        data-drawer-active="false"
                                        href="#"
                                        data-bs-toggle="tooltip"
                                        data-bs-placement="top"
                                        data-bs-original-title="{% trans 'Log' %}"
                                        data-url-runtime-detail="{% url 'FlowRuntimeDetailAPI' pk=1 %}"
                                >
                                    <span class="icon">
                                        <i class="fas fa-history"></i>
                                    </span>
                                </a>
                                <a
                                        class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover hk-navbar-togglable flex-shrink-0  d-lg-inline-block d-none"
                                        href="#" data-bs-toggle="tooltip" data-bs-placement="top" title=""
                                        data-bs-original-title="Collapse"
                                >
										<span class="icon">
											<span class="feather-icon"><i data-feather="chevron-up"></i></span>
											<span class="feather-icon d-none"><i data-feather="chevron-down"></i></span>
										</span>
                                </a>
                            </div>
                            <div class="hk-sidebar-togglable active"></div>
                        </header>
                        <div class="blog-body">
                            <div data-simplebar class="nicescroll-bar">
                                {% block pageContent %}
                                {% endblock %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Page Body -->
    </div>
    <!-- /Main Content -->

    <!-- spinner loading -->
    <div id="loadingContainer" class="loading-container hidden">
        <div class="my-spinner">
            <div class="my-circle my-circle-1"></div>
            <div class="my-circle my-circle-2"></div>
            <div class="my-circle my-circle-3"></div>
            <div class="my-circle my-circle-4"></div>
            <div class="my-circle my-circle-5"></div>
        </div>
    </div>
    <!-- /spinner loading -->
    <!-- Message translate usually -->
    <div class="hidden">
        <span id="msg-user-language">{{ base.language }}</span>
        <span id="msg-datatable-language-config">
            {% if base.language == 'vi' %}
                {% static 'assets/js/cdn-clone/datatable/i18n/vi.json' %}
            {% elif base.language == 'en' %}
                {% static 'assets/js/cdn-clone/datatable/i18n/en.json' %}
            {% else %}
                <!-- Proud of Vietnamese products -->
                {% static 'assets/js/cdn-clone/datatable/i18n/vi.json' %}
            {% endif %}
        </span>
        <span id="urlCompanyConfig" data-url="{% url 'CompanyConfigDetailAPI' %}"></span>
        <span id="urlCompanyConfigData"></span>

        <span id="urlCompanyConfig1" data-url="{% url 'CompanyConfigDetailAPI' %}"></span>
        <span id="urlCompanyConfigData1"></span>

        <span id="msgFieldRequired">{% trans 'This field is required' %}</span>
        <span id="msgSuccess">{% trans 'Successfully' %}</span>
        <span id="flagIsDebug" data-is-debug={{ is_debug }}></span>
        <span id="flagNotifyKey" data-value={{ is_notify_key }}></span>
        <span id="idWFRuntime" data-runtime-id=""></span>
        <span id="idUrlTaskDetail" data-url="{% url 'FlowRuntimeTaskDetailAPI' pk=1 %}"></span>
    </div>
    <!-- /Message translate usually -->
    <!-- /Message translate base -->
    <input
            type="hidden" id="base-trans-factory" data-view-detail="{% trans 'View detail' %}"
            data-more-info="{% trans 'More Information' %}"
            data-draft="{% trans 'Draft' %}"
            data-created="{% trans 'Created' %}"
            data-added="{% trans 'Added' %}"
            data-finish="{% trans 'Finish' %}"
            data-cancel="{% trans 'Cancel' %}"
            data-loading="{% trans 'Loading' %}"
            data-success="{% trans 'Successfully' %}"
    >
    <!-- /Message translate base -->

    <!-- Render Company Config -->
    {{ config|json_script:"idConfigValue" }}
    <!-- // Render Company Config -->

    <div class="hidden">
        {% block dataHiddenGroup %}{% endblock %}
    </div>

    <!-- Drawer Log and Activity -->
    <div
            data-simplebar
            class="ntt-drawer ntt-drawer-right nicescroll-bar"
            data-drawer-width="500"
            data-drawer-push="true"
            id="drawer_log_data"
            data-url="{% url 'FlowRuntimeDiagramDetailAPI' pk=1 %}"
    >
        <div class="ntt-drawer-header">
            <div><span class="ntt-drawer-header-text"></span></div>
            <button class="btn btn-icon btn-xs btn-rounded bg-dark-hover ntt-drawer-close">
                <span class="icon">
                    <span aria-hidden="true"><i class="fas fa-times"></i></span>
                </span>
            </button>
        </div>
        <div class="ntt-drawer-body">
            <div class="ntt-drawer-content-wrap">
                <ul class="nav nav-light nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#tab_block_diagram">
                            <span class="nav-link-text">{% trans 'Diagram' %}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#tab_block_activities">
                            <span class="nav-link-text">{% trans 'Activities' %}</span>
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab_block_diagram">
                        <div class="spinner-grow" id="idxDataRuntimeLoading" role="status">
                            <span class="sr-only">{% trans 'Loading' %}...</span>
                        </div>
                        <div class="hidden" id="idxDataRuntimeNotFound">
                            <b>
                                {% trans "The document approved because the feature config don't apply workflow" %}
                            </b>
                        </div>
                        <div id="idxDataRuntime" class="hidden" style="width: calc(100% - 3px)">

                        </div>
                    </div>
                    <div class="tab-pane fade" id="tab_block_activities">
                        <span id="elementTypingText"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- // Drawer Log and Activity -->
</div>
<!-- /Wrapper -->

{% compress js %}
    <!-- jQuery -->
    <script src="{% static 'vendors/jquery/dist/jquery.min.js' %}"></script>
    <script src="{% static 'vendors/jquery-validate/jquery.validate.min.js' %}"></script>

    <!-- Bootstrap Core JS -->
    <script src="{% static 'vendors/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>

    <!-- FeatherIcons JS -->
    <script src="{% static 'assets/js/feather.min.js' %}"></script>

    <!-- Fancy Dropdown JS -->
    <script src="{% static 'assets/js/dropdown-bootstrap-extended.js' %}"></script>

    <!-- Simplebar JS -->
    <script src="{% static 'vendors/simplebar/dist/simplebar.min.js' %}"></script>

    <!-- Data Table JS -->
    <script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-bs5/js/dataTables.bootstrap5.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-select/js/dataTables.select.min.js' %}"></script>

    <!-- Select2 JS -->
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>

    <!-- Init JS -->
    <script src="{% static 'assets/js/notify.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-notify.min.js' %}"></script>
    <script src="{% static 'assets/js/init.js' %}"></script>
    <script src="{% static 'assets/js/chips-init.js' %}"></script>
    <script src="{% static 'assets/js/init-loader.js' %}"></script>
    <script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/drawer.js' %}"></script>

    <!-- Typing text JS -->
    <script src="{% static 'assets/js/plugins/typed.umd.js' %}"></script>
    <script>
        new Typed('#elementTypingText', {
            strings: [
                `Page is developing...`,
            ],
            typeSpeed: 50,
        });
    </script>
    <!-- // Typing text JS -->

    <script>
        function active_menu(item) {
            if (item.length > 0) {
                item.first().addClass('active')
                let parent = item.first().parents('.nav-item');
                if (parent.length > 0) {
                    parent.first().addClass('active');
                    active_menu(parent.first());
                }
            }
            return null;
        }

        function menu_handler() {
            let nav_data = $('#get-menu-active');
            let menu_id_active = nav_data.attr('data-nav-menu');
            if (menu_id_active) {
                let ele_menu = $('#' + menu_id_active);
                if (ele_menu) {
                    active_menu(ele_menu);
                }
            }
            let tenant_code_active = nav_data.attr('data-nav-tenant');
            if (tenant_code_active) $('#menu-tenant').children('option[value=' + tenant_code_active + ']').attr('selected', 'selected');
        }

        <!-- ## function utils -->

        $(document).on('focus', 'input.mask-money', function () {
            return MaskMoney2.focusInputMoney($(this));
        });
        $(document).on('blur', 'input.mask-money', function () {
            return MaskMoney2.blurInputMoney($(this));
        });
        $(document).on('input', 'input.mask-money', function () {
            return MaskMoney2.realtimeInputMoney($(this));
        });

        $(document).ready(function () {
            <!-- Loading table ajax -->
            $(document).find('table').each((idx, tbl) => {
                if (!$(tbl).attr('load-data-hide-spinner')) {
                    $(tbl).on('preXhr.dt', (e, settings, data) => $.fn.showLoading());
                    $(tbl).on('draw.dt', () => $.fn.hideLoading());
                }
            });
            <!-- ## Loading table ajax -->

            <!-- Active menu -->
            menu_handler();
            <!-- ## Active menu -->

            <!-- Init Mask Money -->
            $.fn.initMaskMoney2();
            <!-- ## Init Mask Money -->

            <!-- Init select2 -->
            $(".select2").select2();
            <!-- ## Init select2 -->
        });
    </script>
    {% block jsFooter %}
    {% endblock %}
{% endcompress %}
</body>
</html>