{% extends 'base.html' %}
{% load static i18n %}
{% block title %}
    {% trans 'Attendance Table' %}
{% endblock %}
{% block cssHeader %}
    <link href="{% static 'vendors/datatables.net-rowgroup/css/dataTables.rowGroup.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/flatpickr/themes/airbnb.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/flatpickr/flatpickr.min.css' %}" rel="stylesheet" type="text/css"/>
{% endblock %}
{% block pageAction %}
{% endblock %}
{% block pageContent %}
    {{ data.data.current_period | json_script:"current_period" }}

    <div class="row">
        <div class="col-12">
            <div class="row">
                <!-- Filter area -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">{% trans "Attendance Filter" %}</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 col-md-5 col-lg-5">
                                <label class="form-label"
                                       for="txt_title">{% trans 'Department / Employee Filter' %}</label>
                                <div id="select_employee" class="form-control d-flex align-items-center"
                                     style="cursor: pointer;">
                                    <span class="employee-icon"><i class="fa-solid fa-user-group"></i></span>
                                    <span class="employee-text ms-2">{% trans "All Department & Employee" %}</span>
                                </div>
                            </div>
                            <div class="col-12 col-md-2 col-lg-2">
                                <div class="form-group">
                                    <label class="form-label" for="date_from">{% trans 'From' %}</label>
                                    <div class="input-affix-wrapper">
                                        <input type="text" name="date_from" id="date_from"
                                               class="form-control flat-picker" autocomplete="off">
                                        <div class="input-suffix">
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-2 col-lg-2">
                                <div class="form-group">
                                    <label class="form-label" for="date_to">{% trans 'To' %}</label>
                                    <div class="input-affix-wrapper">
                                        <input type="text" name="date_to" id="date_to"
                                               class="form-control flat-picker" autocomplete="off">
                                        <div class="input-suffix">
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-1 col-lg-1 d-flex align-items-center">
                                <button id="apply_filter" class="btn btn-success text-white">
                                    <i class="fa-solid fa-filter"></i> {% trans 'Apply Filter' %}
                                </button>
                            </div>
                            <div class="col-12 col-md-2 col-lg-2"></div>
                    </div>
                </div>
                <!-- Table -->
                <div class="col-12 mt-3" id="space_main_table_employee"></div>
            </div>
        </div>
    </div>

    <div class="d-flex align-content-between hidden" id="table-note">
        <span class="mr-5">{% trans "P: Present" %}</span>
        <span class="mr-5">{% trans "A: Absent" %}</span>
        <span class="mr-5">{% trans "L: Leave" %}</span>
        <span class="mr-5">{% trans "B: Business Trip" %}</span>
        <span class="mr-5">{% trans "H: Holiday" %}</span>
        <span class="mr-5">{% trans "W: Weekend" %}</span>
        <span class="mr-5">{% trans "O: Overtime" %}</span>
        <span class="mr-5">{% trans "OB: Overtime on business trip" %}</span>
    </div>
{% endblock %}
{% block modalData %}
    {% include 'hrm/attendance/attendance/dept_employee_modal.html' %}
    {% include 'hrm/attendance/attendance/offcanvas_detail.html' %}
{% endblock %}
{% block dataHiddenGroup %}
    <input type="text" id="url-factory"
           data-md-employee="{% url 'EmployeeListAllAPI' %}"
           data-md-group="{% url 'GroupDDListAPI' %}">
    <input type="text" id="group-checked">
    <input type="text" id="employee-checked">
    <input type="text" id="url-attendance-data" data-attendance="{% url "AttendanceListAPI" %}">
{% endblock %}
{% block jsFooter %}
    <script src="{% static 'vendors/datatables.net-rowgroup/js/dataTables.rowGroup.min.js' %}"></script>
    <script src="{% static 'vendors/flatpickr/flatpickr.min.js' %}"></script>
    {% if base.language == 'vi' %}
        <script src="{% static 'vendors/flatpickr/i18n/vn.js' %}"></script>
    {% endif %}
    <script src="{% static 'assets/hrm/attendance/js/attendance/attendance_common.js' %}"></script>
{% endblock %}