{% load static i18n compress %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% if base.tenant_current_data %}
        <title>{{ base.tenant_current_data.code|upper }} - {{ base.tenant_current_data.title }}</title>
    {% else %}
        <title>MIS - {% block title %}Management Information System{% endblock %}</title>
    {% endif %}
    <meta name="description" content="MIS - Management Information System - quantrimis.com.vn"/>

    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'assets/images/logo/logo-28x16.png' %}">
    <link rel="icon" href="{% static 'assets/images/logo/logo-28x16.png' %}" type="image/x-icon">

    {% compress css %}
        <!-- Data Table CSS -->
        <link
                href="{% static 'vendors/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}" rel="stylesheet"
                type="text/css"
        />
        <link
                href="{% static 'vendors/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css' %}"
                rel="stylesheet" type="text/css"
        />
        <link
                href="{% static 'vendors/bootstrap@4.0.0/dist/css/bootstrap.min.css' %}"
                rel="stylesheet" type="text/css"
        />

        <!-- CSS -->
        <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/font-awesome.min.css' %}">
        <link href="{% static 'assets/css/my-style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/notify.css' %}" rel="stylesheet" type="text/css">
        <style>
            @font-face {
                font-family: "Roboto";
                src: url({% static 'assets/fonts/roboto/Roboto-Regular.ttf' %});
            }
        </style>
        {% block cssHeader %}
        {% endblock %}
    {% endcompress %}
    {% compress js %}
        {% block jsHeader %}{% endblock %}
    {% endcompress %}
</head>
<body>
<!-- Wrapper -->
<div
        class="hk-wrapper" data-layout="vertical" data-layout-style="collapsed" data-menu="light" data-footer="simple"
        data-hover="active"
>
    <p
            style="display: none" id="get-menu-active" data-nav-menu="{{ nav.menu_id_current }}"
            data-nav-tenant="{{ nav.space_code_current }}"
    ></p>
    {% include 'extends/top_nav.html' %}

    <!-- Vertical Nav -->
    <div class="hk-menu">
        {% include 'extends/vertical_nav_brand.html' %}

        {% include 'extends/vertical_nav_main_menu.html' %}
    </div>
    <div id="hk_menu_backdrop" class="hk-menu-backdrop"></div>
    <!-- /Vertical Nav -->

    <!-- Main Content -->
    <div class="hk-pg-wrapper pb-0">
        <div class="hk-pg-body py-0">
            <div class="blogapp-wrap blogapp-sidebar-toggle">
                <nav class="blogapp-sidebar">
                    {% include 'extends/app_sidebar.html' %}
                </nav>
                <div class="blogapp-content">
                    <div class="blogapp-detail-wrap">
                        <header class="blog-header">
                            <div class="d-flex align-items-center">
                                {% include 'extends/breadcrumb.html' %}
                            </div>
                            <div class="blog-options-wrap">

                                {% block pageAction %}{% endblock %}

                                <div class="v-separator  d-lg-inline-block d-none"></div>
                                <a
                                        class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover hk-navbar-togglable flex-shrink-0  d-lg-inline-block d-none"
                                        href="#" data-bs-toggle="tooltip" data-bs-placement="top" title=""
                                        data-bs-original-title="Collapse"
                                >
										<span class="icon">
											<span class="feather-icon"><i data-feather="chevron-up"></i></span>
											<span class="feather-icon d-none"><i data-feather="chevron-down"></i></span>
										</span>
                                </a>
                            </div>
                            <div class="hk-sidebar-togglable active"></div>
                        </header>
                        <div class="blog-body">
                            <div data-simplebar class="nicescroll-bar">
                                {% block pageContent %}
                                {% endblock %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Page Body -->
    </div>
    <!-- /Main Content -->

    <!-- spinner loading -->
    <div id="loadingContainer" class="loading-container hidden">
        <div class="my-spinner">
            <div class="my-circle my-circle-1"></div>
            <div class="my-circle my-circle-2"></div>
            <div class="my-circle my-circle-3"></div>
            <div class="my-circle my-circle-4"></div>
            <div class="my-circle my-circle-5"></div>
        </div>
    </div>
    <!-- /spinner loading -->
    <!-- Message translate usually -->
    <div class="hidden">
        <span id="msg-user-language">{{ base.language }}</span>
        <span id="msg-datatable-language-config">
            {% if base.language == 'vi' %}
                {% static 'assets/js/cdn-clone/datatable/i18n/vi.json' %}
            {% elif base.language == 'en' %}
                {% static 'assets/js/cdn-clone/datatable/i18n/en.json' %}
            {% else %}
                <!-- Proud of Vietnamese products -->
                {% static 'assets/js/cdn-clone/datatable/i18n/vi.json' %}
            {% endif %}
        </span>
        <span id="urlCompanyConfig" data-url="{% url 'CompanyConfigDetailAPI' %}"></span>
        <span id="urlCompanyConfigData"></span>
    </div>
    <!-- /Message translate usually -->
</div>
<!-- /Wrapper -->

{% compress js %}
    <!-- jQuery -->
    <script src="{% static 'vendors/jquery/dist/jquery.min.js' %}"></script>
    <script src="{% static 'vendors/jquery-validate/jquery.validate.min.js' %}"></script>

    <!-- Bootstrap Core JS -->
    <script src="{% static 'vendors/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>

    <!-- FeatherIcons JS -->
    <script src="{% static 'assets/js/feather.min.js' %}"></script>

    <!-- Fancy Dropdown JS -->
    <script src="{% static 'assets/js/dropdown-bootstrap-extended.js' %}"></script>

    <!-- Simplebar JS -->
    <script src="{% static 'vendors/simplebar/dist/simplebar.min.js' %}"></script>

    <!-- Data Table JS -->
    <script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-bs5/js/dataTables.bootstrap5.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-select/js/dataTables.select.min.js' %}"></script>

    <!-- Select2 JS -->
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>

    <!-- Mask Money jQuery -->
    <script src="{% static 'assets/js/cdn-clone/jquery/jquery.maskMoney.min.js' %}"></script>

    <!-- Init JS -->
    <script src="{% static 'assets/js/notify.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-notify.min.js' %}"></script>
    <script src="{% static 'assets/js/init.js' %}"></script>
    <script src="{% static 'assets/js/chips-init.js' %}"></script>
    <script src="{% static 'assets/js/init-loader.js' %}"></script>
    <script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'vendors/filter-multi-select-main/dist/filter-multi-select-bundle.min.js' %}"></script>
    <script>
        $(document).ready(function () {
            <!-- function utils -->
            function active_menu(item) {
                if (item.length > 0) {
                    item.first().addClass('active')
                    let parent = item.first().parents('.nav-item');
                    if (parent.length > 0) {
                        parent.first().addClass('active');
                        active_menu(parent.first());
                    }
                }
                return null;
            }

            function menu_handler() {
                let nav_data = $('#get-menu-active');
                let menu_id_active = nav_data.attr('data-nav-menu');
                if (menu_id_active) {
                    let ele_menu = $('#' + menu_id_active);
                    if (ele_menu) {
                        active_menu(ele_menu);
                    }
                }
                let tenant_code_active = nav_data.attr('data-nav-tenant');
                if (tenant_code_active) $('#menu-tenant').children('option[value=' + tenant_code_active + ']').attr('selected', 'selected');
            }

            function init_mask_money() {
                $.fn.getCompanyCurrencyConfig().then((currencyConfig)=>{
                    if (currencyConfig) {
                        $('input[type=text].mask-money').each((idx, item) => {
                            $(item).initInputCurrency(currencyConfig);
                        });
                        $('.mask-money-value').each((idx, item)=>{
                            $(item).parseCurrencyDisplay(currencyConfig);
                        });
                    } else throw  Error('Currency config is not found.')
                });
            }

            <!-- ## function utils -->

            <!-- Loading table ajax -->
            $(document).find('table').each((idx, tbl) => {
                $(tbl).on('preXhr.dt', (e, settings, data) => $.fn.showLoading());
                $(tbl).on('draw.dt', () => $.fn.hideLoading());
            });
            <!-- ## Loading table ajax -->

            <!-- Active menu -->
            menu_handler();
            <!-- ## Active menu -->

            <!-- Init Mask Money -->
            init_mask_money();
            <!-- ## Init Mask Money -->
        });
    </script>
    {% block jsFooter %}
    {% endblock %}
{% endcompress %}
</body>
</html>