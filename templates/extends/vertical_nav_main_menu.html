{% load static i18n %}
<!-- Main Menu -->
<div data-simplebar class="nicescroll-bar">
    <div class="menu-content-wrap">
        <div class="menu-group mb-3">
            <div class="nav-header">
                <span class="d-block mb-2">Spaces</span>
                <div
                                class="btn-group w-100"
                                id="menu-tenant"
                                data-space-selected="{{ base.space_current_detail.code }}"
                        >
                            <button
                                    id="menu-tenant-text"
                                    type="button" class="btn btn-outline-dark dropdown-toggle"
                                    data-bs-toggle="dropdown"
                                    data-dropdown-animation aria-haspopup="true" aria-expanded="false"
                            >
                                {% if base.space_current_detail.name %}
                                    {{ base.space_current_detail.icon|safe }} {{ base.space_current_detail.name }}
                                {% else %}
                                    _
                                {% endif %}
                            </button>
                            <div
                                    class="dropdown-menu dropdown-menu-dark" data-url="{% url 'SpaceChangeView' %}"
                                    data-url-redirect="{% url 'HomeView' %}" data-method="PUT"
                            >
                                {% csrf_token %}
                                {% for item in base.space_list %}
                                    {% if item.child|length > 0 %}
                                        {% for item_child in item.child %}
                                            <a
                                                    class="dropdown-item space-item {% if base.space_current_detail.code == item_child.code %} text-success {% endif %}"
                                                    data-space-code="{{ item_child.code }}"
                                                    data-space-name="{{ item_child.name }}"
                                                    href="#"
                                            >
                                                {{ item_child.icon|safe }}
                                                <span class="ml-1">{{ item_child.name }}</span>
                                            </a>
                                        {% endfor %}
                                    {% else %}
                                        <a
                                                class="dropdown-item  {% if base.space_current_detail.code == item_child.code %} text-success {% endif %}"
                                                href="#"
                                        >{{ item.name }}</a>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
            </div>
        </div>
        <div class="menu-group">
            {% if base.menus and base.menus|length > 0 %}
                <div class="nav-header">
                    <span>{% trans 'Menus' %}</span>
                </div>
                <ul class="navbar-nav flex-column">

                    {% for item in base.menus %}
                        {% if item.child|length > 0 %}
                            <li class="nav-item">
                                <a
                                        class="nav-link" href="javascript:void(0);" data-bs-toggle="collapse"
                                        data-bs-target="#{{ item.code }}"
                                        aria-expanded="{% if item.expanded %}true{% else %}false{% endif %}"
                                >
                                <span class="nav-icon-wrap">
                                    <span class="svg-icon menu-child-icon">
                                        {{ item.icon|safe }}
                                    </span>
                                </span>
                                    <span class="nav-link-text">{% trans item.name %}</span>
                                </a>
                                <ul id="{{ item.code }}" class="nav flex-column collapse  nav-children {% if item.expanded %} show {% endif %}">
                                    <li class="nav-item">
                                        <ul class="nav flex-column">
                                            {% for child in item.child %}
                                                <li class="nav-item" id="{{ child.code }}">
                                                    <a class="nav-link" href="{{ child.url }}">
                                                    <span class="nav-icon-wrap">
                                                        <span class="svg-icon menu-child-icon">
                                                            {{ child.icon|safe }}
                                                        </span>
                                                    </span>
                                                        <span class="nav-link-text">
                                                        {% trans child.name %}
                                                    </span>
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        {% else %}
                            <li class="nav-item" id="{{ item.code }}">
                                <a class="nav-link" href="{{ item.url }}">
                                <span class="nav-icon-wrap">
                                    <span class="svg-icon menu-child-icon">
                                        {{ item.icon|safe }}
                                    </span>
                                </span>
                                    <span class="nav-link-text">{% trans item.name %}</span>
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
                <div class="mb-10"></div>
                <!-- // Test -->
            {% endif %}
        </div>
    </div>
</div>
<!-- /Main Menu -->

