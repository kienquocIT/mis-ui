{% extends 'base.html' %}
{% load static i18n %}
{% block title %}{% trans 'Shift assignment' %}{% endblock %}
{% block cssHeader %}
    <link href="{% static 'vendors/fullcalendar/main.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/daterangepicker/daterangepicker.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'vendors/flatpickr/themes/airbnb.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/flatpickr/flatpickr.min.css' %}" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block pageAction %}{% endblock %}

{% block pageSubAction %}
    <div class="nav-pills-bfl" role="group" aria-label="Button group with nested dropdown">
        <button type="button" class="btn nav-link text-smoke" id="config_shift_assignment" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{% trans 'Shift assignment config' %}"><span class="icon"><i class="fa-solid fa-gear"></i></span></button>
    </div>
{% endblock %}

{% block pageContent %}
    <form
            data-url="{% url 'ShiftAssignmentListAPI' %}"
            data-url-redirect="{% url 'ShiftAssignmentList' %}"
            data-method="POST"
            id="frm_shift_assignment"
            method="post"
    >
        {% csrf_token %}


        <div class="row">
            <div class="col-12 col-md-3 col-lg-3 border-right">
                <h5>{% trans 'Applicable object' %}</h5>
                <div data-simplebar class="nicescroll-bar">
                    <div class="form-check form-switch form-switch-lg">
                        <input type="checkbox" class="form-check-input" id="checkbox_all_company">
                        <label class="form-check-label" for="checkbox_all_company">{% trans 'All company' %}</label>
                    </div>

                    <div class="row">
                        <ul class="nav nav-pills-bfl">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="tab" href="#tab_block_1">
                                    <span class="nav-icon-wrap mr-1"><i class="fas fa-user-tie"></i></span>
                                    <span class="nav-link-text">{% trans 'View by employee' %}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab_block_2">
                                    <span class="nav-icon-wrap mr-1"><i class="fas fa-users"></i></span>
                                    <span class="nav-link-text">{% trans 'View by group' %}</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="tab_block_1">
                            <table id="table_employee" class="table nowrap w-100 mb-5">
                                <thead>
                                <tr>
                                    <th class="w-70">{% trans 'Employee' %}</th>
                                    <th class="w-30">{% trans 'Code' %}</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane fade show" id="tab_block_2">
                            <table id="table_group" class="table nowrap w-100 mb-5">
                                {% csrf_token %}
                                <thead>
                                <tr>
                                    <th>{% trans 'Group' %}</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>





                </div>
            </div>
            <div class="col-12 col-md-7 col-lg-7 border-right">
                <div class="calendarapp-wrap" id="calendarapp-wrapper">
                    <div class="calendarapp-content pl-0">
                        <div id="calendar" class="w-100"></div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-2 col-lg-2">
                <div class="row">
                    <h5>{% trans 'Apply for shifts' %}</h5>
                    <br>
                    <br>
                    <div class="form-group w-70">
                        <label class="form-label required" for="apply_from">{% trans 'From' %}</label>
                        <div class="input-affix-wrapper">
                            <input type="text" id="apply_from"
                                   class="form-control flat-picker" name="apply_from" autocomplete="off" required>
                            <div class="input-suffix">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                        </div>
                    </div>
                    <div class="form-group w-70">
                        <label class="form-label required" for="apply_to">{% trans 'To' %}</label>
                        <div class="input-affix-wrapper">
                            <input type="text" id="apply_to"
                                   class="form-control flat-picker" name="apply_to" autocomplete="off" required>
                            <div class="input-suffix">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="shift_current">{% trans 'Current shift' %}</label>
                        <input type="text" class="form-control" id="shift_current" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label required" for="box_shift_apply">{% trans 'Select shift to apply' %}</label>
                        <select
                                class="form-select"
                                id="box_shift_apply"
                                name="shift"
                                data-url="{% url "ShiftMasterDataListAPI" %}"
                                data-method="GET"
                                data-keyResp="shift_list"
                                required
                        ></select>
                    </div>

                    <a href="{% url "ShiftMasterDataList" %}" target="_blank" class="link-primary underline_hover">{% trans 'View shift list' %}</a>
                </div>
                <br>
                <br>
                <div class="d-flex justify-content-end">
                    <button class="btn btn-primary" id="btn-shift-assign" type="submit" form="frm_shift_assignment">{% trans 'Apply' %}</button>
                </div>
            </div>
        </div>

    </form>

{% endblock %}
{% block modalData %}
    {% include 'hrm/attendance/shiftassignment/shift_assignment_offcanvas.html' %}
{% endblock %}
{% block dataHiddenGroup %}
    <input
        type="text"
        id="app-trans-factory"
        data-employee="{% trans 'Employee' %}"
    >
    <input
        type="text"
        id="app-url-factory"
        data-api-shift-assignment="{% url 'ShiftAssignmentListAPI' %}"
        data-api-config="{% url 'ShiftAssignmentConfigDetailAPI' %}"
        data-dd-group="{% url 'GroupDDListAPI' %}"
        data-dd-employee="{% url 'EmployeeListAllAPI' %}"
    >
    <input
            type="text"
            id="groups-checked"
    >
    <input
            type="text"
            id="employees-checked"
    >
{% endblock %}
{% block jsFooter %}
    <script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'vendors/fullcalendar/main.js' %}"></script>
    <script src="{% static 'vendors/daterangepicker/daterangepicker.js' %}"></script>
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>
    <script src="{% static 'vendors/select2/dist/js/init-select2.js' %}"></script>
    <script src="{% static 'vendors/flatpickr/flatpickr.min.js' %}"></script>
    {% if base.language == 'vi' %}
        <script src="{% static 'vendors/flatpickr/i18n/vn.js' %}"></script>
    {% endif %}

    <script src="{% static 'assets/hrm/attendance/js/shiftassignment/shift_assignment_common.js' %}"></script>

{% endblock %}
