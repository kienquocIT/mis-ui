{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block title %}{% trans 'Product Create' %}{% endblock %}
{% block cssHeader %}
    <link href="{% static 'assets/css/masterdata/saledata/accounts/account_create.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'vendors/dropify/dist/css/dropify.min.css' %}" rel="stylesheet" type="text/css"/>
    <link
            href="{% static 'vendors/select2/dist/css/select2.min.css' %}"
            rel="stylesheet"
            type="text/css"
    />
{% endblock %}
{% block jsHeader %}
{% endblock %}
{% block pageAction %}
    <button id="save-account" class="btn btn-outline-primary" type="submit" form="form-create-product">
        <span>
            <span>{% trans 'Save' %}</span>
            <span class="icon">
                <i class="fa-regular fa-floppy-disk"></i>
            </span>
        </span>
    </button>
{% endblock %}
{% block pageContent %}
    <form id="form-create-product"
          data-method="POST"
          data-url="{% url "ProductListAPI" %}"
          data-url-redirect="{% url "ProductList" %}">
        {% csrf_token %}
        <div class="collapse multi-collapse show" id="collapse-area">
            <div class="row">
                <div class="col-12 col-md-3 col-lg-3">
                    <div class="form-group">
                        <input type="file" id="product-image" class="dropify">
                    </div>
                    <div class="form-group">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="check-tab-sale" value="option2">
                            <label class="form-check-label" for="check-tab-sale">{% trans "For Sale" %}</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="check-tab-inventory" value="option1">
                            <label class="form-check-label" for="check-tab-inventory">{% trans "For Inventory" %}</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="check-tab-purchase" value="option3">
                            <label class="form-check-label" for="check-tab-purchase">{% trans "For Purchase" %}</label>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-9 col-lg-9">
                    <div class="row">
                        <div class="col-12 col-md-3 col-lg-3">
                            <div class="form-group">
                                <label class="form-label required" for="code">{% trans "Product Code" %}</label>
                                <input type="text" id="code" class="form-control" oninput="this.value=this.value.toUpperCase()" required>
                            </div>
                        </div>
                        <div class="col-12 col-md-9 col-lg-9">
                            <div class="form-group">
                                <label class="form-label required" for="title">{% trans "Product Name" %}</label>
                                <input type="text" id="title" placeholder="Input Product Name" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="description">{% trans "Description" %}</label>
                        <textarea id="description" placeholder="Input Product Description" class="form-control"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" data-bs-toggle="collapse" data-bs-target="#collapse-area" aria-expanded="false" aria-controls="collapse-area" class="w-100 btn btn-animated btn-icon btn-xs">
            <span class="icon">
                <i class="fas fa-angle-double-up text-primary"></i>
            </span>
        </button>
        <div class="row">
            <div class="col-12">
                <ul class="nav nav-tabs nav-icon nav-light" id="tab-select-table">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#tab_general">
                            <span class="nav-icon-wrap"></span>
                            <span class="nav-link-text">{% trans 'General' %}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" data-bs-toggle="tab" href="#tab_sale" id="link-tab-sale">
                            <span class="nav-icon-wrap"></span>
                            <span class="nav-link-text">{% trans 'Sale' %}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" data-bs-toggle="tab" href="#tab_inventory" id="link-tab-inventory">
                            <span class="nav-icon-wrap"></span>
                            <span class="nav-link-text">{% trans 'Inventory' %}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" data-bs-toggle="tab" id="link-tab-purchase" href="#tab_purchase">
                            <span class="nav-icon-wrap"></span>
                            <span class="nav-link-text">{% trans 'Purchase' %}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" id="link-tab-variants" href="#tab_variants">
                            <span class="nav-icon-wrap"></span>
                            <span class="nav-link-text">{% trans 'Variants' %}</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="tab_general">
                <div class="row">
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "Product Type" %}</label>
                            <select id="general-select-box-product-type" class="form-select select2 select-multiple" data-method="GET"
                                    multiple
                                    data-url="{% url 'ProductTypeListAPI' %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "Product Category" %}</label>
                            <select id="general-select-box-product-category" class="form-select" data-method="GET"
                                    data-url="{% url "ProductCategoryListAPI" %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "UoM Group" %}</label>
                            <select id="general-select-box-uom-group" class="form-select" data-method="GET"
                                    data-url="{% url "UnitOfMeasureGroupListAPI" %}"
                                    data-url-detail="{% url "UnitOfMeasureGroupDetailAPI" pk=0 %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label">{% trans "Traceability method" %}</label>
                            <select id="general-select-box-traceability-method" class="form-select" data-method="GET">
                                    <option value="0">{% trans "None" %}</option>
                                    <option value="1">{% trans "Batch/Lot number" %}</option>
                                    <option value="2">{% trans "Serial number" %}</option>
                                </select>
                        </div>
                    </div>
                </div>
                <div class="row mt-3 mb-3">
                    <div class="col-12 col-md-6 col-lg-6">
                        <span class="text-primary">
                            <i data-feather="package"></i>
                            <label class="text-primary" id="label-dimension">{% trans "Product Dimension and Weight Control" %}</label>
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label">{% trans "Length" %}</label>
                            <span class="input-affix-wrapper affix-wth-text">
                                <input class="form-control inpDimension" id="length">
                                <span class="input-suffix">cm</span>
                            </span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">{% trans "Width" %}</label>
                            <span class="input-affix-wrapper affix-wth-text">
                                <input class="form-control inpDimension" id="width">
                                <span class="input-suffix">cm</span>
                            </span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">{% trans "Height" %}</label>
                            <span class="input-affix-wrapper affix-wth-text">
                                <input class="form-control inpDimension" id="height">
                                <span class="input-suffix">cm</span>
                            </span>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-6">
                                    <label class="form-label">{% trans "Volume" %}</label>
                                </div>
                                <div class="col-6 text-right">
                                    <a href="#" id="to-fix-left"><i class="fas fa-caret-left text-primary"></i></a>
                                    <span style="font-size: small">.00</span>
                                    <a href="#" id="to-fix-right"><i class="fas fa-caret-right text-primary"></i></a>
                                </div>
                            </div>
                            <span class="input-affix-wrapper affix-wth-text">
                                <input class="form-control" id="volume" readonly>
                                <span id="VolumeSpan" class="input-suffix"></span>
                            </span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">{% trans "Weight" %}</label>
                            <span class="input-affix-wrapper affix-wth-text">
                                <input class="form-control" id="weight">
                                <span id="WeightSpan" class="input-suffix"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab_sale">
                <div class="row">
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "Default UoM" %}</label>
                            <select id="sale-select-box-default-uom" class="form-select" data-method="GET"
                                    data-url="{% url "UnitOfMeasureListAPI" %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "Tax Code" %}</label>
                            <select id="sale-select-box-tax-code" class="form-select" data-method="GET"
                                    data-url="{% url "TaxListAPI" %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label">{% trans "Cost" %}</label>
                            <input id="sale-cost" data-return-type="number" type="text" class="form-control mask-money">
                        </div>
                    </div>
                </div>
                <div class="row mt-5">
                    <div class="col-12">
                        <a class="btn btn-primary" data-bs-toggle="collapse" href="#sale-select-price-list" role="button" aria-expanded="false" aria-controls="sale-select-price-list">
                            {% trans "Collapse Price List" %}
                        </a>
                    </div>
                </div>
                <div class="row mt-5">
                    <div style="overflow-y: auto; height: 50vh" class="col-12 col-md-6 col-lg-6 collapse show ul-price-list" id="sale-select-price-list" data-method="GET" data-url="{% url "PriceListAPI" %}">
                        <table class="table nowrap w-100" id="table_price_list" data-method="GET" data-url="{% url "PriceListAPI" %}">
                            <thead>
                            <th></th>
                            <th>{% trans 'Select' %}</th>
                            <th>{% trans 'Price list' %}</th>
                            <th>{% trans 'Price' %}</th>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-8 text-left">
                                    <label class="form-label" for="price_list_for_sale_online">{% trans "Price list for sale online" %}</label>
                                </div>
                                <div class="col-4 text-right form-check form-switch">
                                    <input type="checkbox" class="form-check-input" id="is_publish_website">
                                    <label class="form-check-label" for="is_publish_website">{% trans "Sale online" %}</label>
                                </div>
                            </div>
                            <select id="price_list_for_sale_online" data-url="{% url 'PriceListAPI' %}" class="select2 form-select" data-placeholder="{% trans 'From Price List in left side' %}"></select>
                        </div>
                        <div class="form-check form-check">
                            <div class="row">
                                <div class="col-6 col-lg-8 col-md-8 mt-2">
                                    <input type="checkbox" class="form-check-input" id="available_notify_checkbox">
                                    <label class="form-check-label" for="available_notify_checkbox">{% trans "Notify when available quantity is less than" %}</label>
                                </div>
                                <div class="col-6 col-lg-4 col-md-4">
                                    <input id="less_than_number" type="number" min="0" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab_inventory">
                <div class="row">
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "UoM Name" %}</label>
                            <select id="inventory-select-box-uom-name" class="form-select" data-method="GET"
                                    data-url="{% url 'UnitOfMeasureListAPI' %}">
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label">{% trans "Inventory Level Min" %}</label>
                            <input id="inventory-level-min" type="number" class="form-control" min="0" step="1" placeholder="Input number">
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label">{% trans "Inventory Level Max" %}</label>
                            <input id="inventory-level-max" type="number" class="form-control" min="0" step="1" placeholder="Input number">
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab_purchase">
                <div class="row">
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "Default UoM" %}</label>
                            <select id="purchase-select-box-default-uom" class="form-select" data-method="GET"
                                    data-url="{% url "UnitOfMeasureListAPI" %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label required">{% trans "Tax Code" %}</label>
                            <select id="purchase-select-box-tax-code" class="form-select" data-method="GET"
                                    data-url="{% url "TaxListAPI" %}"></select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab_variants">
                <table class="table nowrap w-100" id="table-variant-attributes">
                    <thead>
                    <th></th>
                    <th class="required">{% trans 'Attributes' %}</th>
                    <th class="required">{% trans 'Values' %}</th>
                    <th></th>
                    <th class="required">{% trans 'Configurations' %}</th>
                    <th></th>
                    </thead>
                    <tbody></tbody>
                </table>

                <div class="row">
                    <div class="col-12">
                        <button id="btn-add-row-variant-attributes" class="btn btn-sm btn-soft-primary mb-3" type="button">
                            <span>
                                <span>{% trans "Add new attributes" %}</span>
                                <span class="icon">
                                    <i class="fas fa-plus-circle"></i>
                                </span>
                            </span>
                        </button>
                    </div>
                </div>

                <div class="modal fade" id="modal-variant-attributes" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">{% trans 'Add Variant Value' %}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row form-group">
                                    <label class="col-4 col-form-label">{% trans 'Attribute name' %}</label>
                                    <div class="col-8">
                                        <input readonly class="form-control" id="attribute-name-modal-input">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <label class="col-4 col-form-label required">{% trans 'Value name' %}</label>
                                    <div class="col-8">
                                        <input class="form-control" id="value-name-modal-input">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" id="add-variant-value-item" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">{% trans 'Add' %}</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="modal-attribute-display" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">{% trans 'Attribute display' %}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row form-group">
                                    <label class="col-3 col-form-label">{% trans 'Select by' %}</label>
                                    <div class="col-9">
                                        <select class="select2 form-select" id="attribute-display-select-by"></select>
                                    </div>
                                </div>
                                <div class="row form-group" hidden id="select-selection-preview">
                                    <div class="col-3"></div>
                                    <div class="col-3">
                                        <div class="form-check">
                                            <input type="radio" id="radio-fill-by-text" name="radio-type-2" class="form-check-input fill-by-selection" checked>
                                            <label class="form-check-label" for="radio4">{% trans 'Fill by text' %}</label>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="form-check">
                                            <input type="radio" id="radio-fill-by-color" name="radio-type-2" class="form-check-input fill-by-selection">
                                            <label class="form-check-label" for="radio5">{% trans 'Fill by color' %}</label>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="form-check">
                                            <input type="radio" id="radio-fill-by-photo" name="radio-type-2" class="form-check-input fill-by-selection">
                                            <label class="form-check-label" for="radio6">{% trans 'Fill by photo' %}</label>
                                        </div>
                                    </div>
                                </div>
                                <label class="w-25 mb-3 mt-5 text-primary">{% trans 'Preview' %}</label>
                                <div class="row form-group" hidden id="dropdown-list-selection-preview">
                                    <select class="select2 form-select" id="dropdown-list-preview"></select>
                                </div>
                                <div class="row form-group" hidden id="radio-selection-preview"></div>
                                <div class="row form-group" hidden id="fill-by-text-preview"></div>
                                <div class="row form-group" hidden id="fill-by-color-preview"></div>
                                <div class="row form-group" hidden id="fill-by-photo-preview"></div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" id="add-attribute-display-item" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">{% trans 'Select' %}</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="modal-variant-item-des" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">{% trans 'Variant Description' %}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row form-group">
                                    <label class="col-3 col-form-label">{% trans 'Variant name' %}</label>
                                    <div class="col-9">
                                        <input class="form-control" id="variant-name">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <label class="col-3 col-form-label">{% trans 'Description' %}</label>
                                    <div class="col-9">
                                        <input class="form-control" id="variant-des">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" id="add-variant-des" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">{% trans 'Save' %}</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row" id="table-variant-items-div" hidden>
                    <table id="table-variant-items" class="table nowrap w-100">
                        <thead class="thead-primary">
                        <tr>
                        <th class="w-5"></th>
                        <th class="w-45">
                            {% trans 'Variant' %}
                            <span class="badge-label text-white"><span class="badge badge-soft-primary" id="table-variant-items-label">0</span></span>
                        </th>
                        <th class="w-5"></th>
                        <th class="w-20">{% trans 'SKU' %}</th>
                        <th class="w-20">{% trans 'Extra Price' %}</th>
                        <th class="w-5">{% trans 'Active' %}</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </form>
    {{ data.unit | json_script:"id-unit-list" }}
    {{ data.currency_list | json_script:"currency_list" }}
{% endblock %}
{% block jsFooter %}
    <script src="{% static "vendors/dropify/dist/js/dropify.min.js" %}"></script>
    <script src="{% static "assets/js/masterdata/saledata/product/product_common.js" %}"></script>
    <script src="{% static "assets/js/masterdata/saledata/product/product_create.js" %}"></script>
{% endblock %}
