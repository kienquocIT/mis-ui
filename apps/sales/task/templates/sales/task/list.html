{% extends 'base.html' %}
{% load static i18n %}
{% block title %}{% trans 'Opportunity Task List' %}{% endblock %}
{% block cssHeader %}
    <link href="{% static 'vendors/dragula/dragula.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/css/perfect-scrollbar.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/daterangepicker/daterangepicker.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/sales/task/css/task.css' %}" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block pageAction %}
    <button
            class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover ntt-drawer-toggle-link"
            data-drawer-target="#drawer_task_create"
            data-drawer-active="false"
            href="#"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            data-bs-original-title="{% trans 'Create' %}"
    >
        <span class="btn-icon-wrap">
            <i class="fa-solid fa-plus"></i>
        </span>
    </button>
{% endblock %}

{% block pageContent %}
    <!-- Navigation task list/kanban-->
    <ul class="nav nav-light nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="tab" href="#tab_block_1">
                <span class="nav-link-text">{% trans 'Kanban' %}</span>
            </a>
        </li>
    </ul>
    <!-- task kanban -->
    <div class="tab-content">
        <div class="tab-pane fade show active" id="tab_block_1">
            <div id="kb_scroll" class="tasklist-scroll position-relative">
                <div id="tasklist_wrap" class="tasklist-wrap">
                </div>
            </div>
        </div>
    </div>

    <div class="hidden">
        <div class="card-parent_template">
            <div class="card card-simple card-border tasklist">
                <div class="card-header card-header-action">
                    <div class="tasklist-handle">
                        <h6 class="text-uppercase fw-bold d-flex align-items-center mb-0">
                            <span class="tasklist-name">All Modules</span><span
                                class="badge badge-pill badge-soft-violet ms-2 task-count">19</span></h6>
                        <div class="card-action-wrap">
                            <button class="btn btn-flush-primary btn-animated btn-add-newtask">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div id="" class="wrap-child">
                    </div>
                </div>
            </div>
        </div>
        <div class="card-child_template">
            <div class="card card-border card-simple tasklist-card">
                <div class="card-header card-header-action">
                    <h6 class="fw-bold card-code">Application Pages</h6>
                    <div class="card-action-wrap">
                        <a class="btn btn-flush-dark flush-soft-hover dropdown-toggle no-caret"
                           href="#" data-bs-toggle="dropdown">
                                            <span class="icon"><span class="feather-icon">
                                                <i data-feather="more-vertical"></i></span></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#" data-bs-toggle="modal"
                               data-bs-target="#task_detail"><span>Edit</span></a>
                            <a class="dropdown-item" href="#"><span>Assign to</span></a>
                            <a class="dropdown-item" href="#"><span>Attach files</span></a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <div class="card-priority d-inline-block"></div>
                        <a href="#" class="card-title d-inline-block"></a>
                    </div>
                    <div class="avatar avatar-rounded avatar-xs" data-toggle="tooltip" title="">
                        <span class="initial-wrap">
                            <img src="" alt="user"
                             class="avatar-img">
                        </span>

                    </div>
                </div>
                <div class="card-footer text-muted justify-content-between">
                    <div>
                        <span class="task-counter">
                            <i class="fa-regular fa-square-check"></i>&nbsp;
                            <span class="checklist_progress">4/8</span>
                        </span>
                        <span class="task-discuss">
                            {% trans 'Sub' %}&nbsp;
                            <span class="sub_task_count circle bg-blue text-white">0</span>
                        </span>
                    </div>
                    <div>
                        <span class="task-deadline">22 Sep, 22</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="priority-badges">
            <div class="badge-icon badge-icon-xxs">
                <div class="badge-icon-wrap">
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" class="polygon" viewBox="0 0 127 139.4">
                    <g data-name="Polygon 7" transform="translate(119 5.675)rotate(90)" fill="currentColor">
                        <path d="M87.3 115L40.7 115C37.3 115 34 114.1 31.2 112.5 28.3 110.8 25.9 108.4 24.2 105.5L0.9 65C-0.8 62.1-1.7 58.8-1.7 55.5 -1.7 52.2-0.8 48.9 0.9 46L24.2 5.5C25.9 2.6 28.3 0.2 31.2-1.5 34-3.1 37.3-4 40.7-4L87.3-4C90.7-4 94-3.1 96.8-1.5 99.7 0.2 102.1 2.6 103.8 5.5L127.1 46C128.8 48.9 129.7 52.2 129.7 55.5 129.7 58.8 128.8 62.1 127.1 65L103.8 105.5C102.1 108.4 99.7 110.8 96.8 112.5 94 114.1 90.7 115 87.3 115Z"/>
                        <path d="M40.7 0C35.3 0 30.3 2.9 27.7 7.5L4.3 48C1.6 52.6 1.6 58.4 4.3 63L27.7 103.5C30.3 108.1 35.3 111 40.7 111L87.3 111C92.7 111 97.7 108.1 100.3 103.5L123.7 63C126.4 58.4 126.4 52.6 123.7 48L100.3 7.5C97.7 2.9 92.7 0 87.3 0L40.7 0M40.7-8L87.3-8C95.5-8 103.2-3.6 107.3 3.5L130.6 44C134.7 51.1 134.7 59.9 130.6 67L107.3 107.5C103.2 114.6 95.5 119 87.3 119L40.7 119C32.5 119 24.8 114.6 20.7 107.5L-2.6 67C-6.7 59.9-6.7 51.1-2.6 44L20.7 3.5C24.8-3.6 32.5-8 40.7-8Z"
                              fill="currentColor"/>
                    </g>
                </svg>
            </div>
        </div>
        <input type="text" id="url-factory" data-task-list="{% url 'OpportunityTaskListAPI' %}"
        />
        {{ data.task_config|json_script:'task_config' }}
    </div>
    {% include  'sales/task/extend/task-form.html' %}
{% endblock %}
{% block jsFooter %}
    <script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'vendors/daterangepicker/daterangepicker.js' %}"></script>
    <script src="{% static 'assets/js/perfect-scrollbar.min.js' %}"></script>
    <script src="{% static 'vendors/dragula/dragula.min.js' %}"></script>
    <script src="{% static 'assets/sales/task/js/extend/create-task.js' %}"></script>
    <script src="{% static 'assets/sales/task/js/list.js' %}"></script>
{% endblock %}
