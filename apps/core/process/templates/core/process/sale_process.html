{% extends 'base.html' %}
{% load static i18n %}
{% block title %}{% trans 'Purchase Request Create' %}{% endblock %}
{% block cssHeader %}
    <link href="{% static 'assets/css/plugins/form-layout.css' %}" rel="stylesheet" type="text/css">
{% endblock %}
{% block pageAction %}
    <button class="btn btn-outline-primary" type="submit" form="frm-update-process">
        <span>
            <span>{% trans 'Save' %}</span>
            <span class="icon">
                <i class="fa-regular fa-floppy-disk"></i>
            </span>
        </span>
    </button>
{% endblock %}
{% block pageContent %}
    <div>
        <ul class="nav nav-light nav-tabs" id="process-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#tab_long_sale">
                    <span class="nav-link-text">{% trans 'Long Sale' %}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#tab_function">
                    <span class="nav-link-text">{% trans 'Function List' %}</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="tab-content">
        <div class="tab-pane fade show active" id="tab_long_sale">
            <form id="frm-update-process" data-method="PUT" data-url="{% url 'SaleProcessAPI' %}">
                <div class="container">
                    <div class="row mb-1">
                        <div class="col-2">
                            <div id="drag-container" class="overflow-auto" style="overflow-x: auto; height: 70vh; overflow-y: hidden">
                                <div class="drag-component" id="component-1"><i class="fas fa-columns"></i> 1</div>
                                <div class="drag-component" id="component-2"><i class="fas fa-columns"></i> 2</div>
                                <div class="drag-component" id="component-3"><i class="fas fa-columns"></i> 3</div>
                                <span id="all-drag-component">...more</span>
                                <div class="drag-component hidden" id="component-4"><i class="fas fa-columns"></i> 4
                                </div>
                                <div class="drag-component hidden" id="component-5"><i class="fas fa-columns"></i> 5
                                </div>
                                <div class="drag-component hidden" id="component-6"><i class="fas fa-columns"></i> 6
                                </div>
                                <div class="border function-list m-1 mt-3">
                                </div>
                            </div>
                        </div>
                        <div class="col-10">
                            <div id="drop-container" class="container drop-content drop-content-dnd overflow-auto pr-lg-5" style="height: 70vh; overflow-y:hidden">

                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="tab-pane fade" id="tab_function">
            <table id="datatable-function-process" class="table nowrap w-100 mb-5" data-method="GET"
                   data-url="{% url 'FunctionProcessListAPI' %}">
                <thead>
                <th class="w-5">#</th>
                <th class="w-65">{% trans "Function Name" %}</th>
                <th class="w-10">{% trans "In Process" %}</th>
                <th class="w-10">{% trans "Free" %}</th>
                <th class="w-10"></th>
                </thead>
            </table>
        </div>
    </div>

    <div class="modal fade" id="modal-subject-process" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans 'Edit Function' %}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input id="position-process-step" class="hidden"/>
                    <div class="form-group">
                        <label class="form-label">{% trans 'Subject' %}</label>
                        <input class="form-control" id="content-function"/>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                            data-bs-dismiss="modal">{% trans 'Cancel' %}</button>
                    <button type="button" class="btn btn-primary"
                            id="btn-save-subject-function">{% trans 'Save' %}</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block dataHiddenGroup %}
    <div id="function-child">
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
        <div class="drag-component-child"></div>
    </div>
    <input type="text" id="url-factory"
           data-url-skip-step="{% url 'SkipProcessStepAPI' pk=0 %}"
           data-url-set-current-step="{% url 'SetCurrentProcessStepAPI' pk=0 %}"
    >
{% endblock %}

{% block jsFooter %}
    <!--CONDITIONS--- required js file for component conditions -->
    <script src="{% static 'vendors/formset/jquery.formset.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/conditions/conditions.js' %}"></script>
    <!--END CONDITIONS -->

    <script src="{% static 'vendors/jquery/dist/jquery-ui.min.js' %}"></script>
    <script src="{% static 'assets/core/process/js/sale_process.js' %}"></script>
{% endblock %}
