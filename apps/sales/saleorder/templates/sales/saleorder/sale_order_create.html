{% extends 'base.html' %}
{% load static i18n %}
{% block cssHeader %}
    <link href="{% static 'assets/sales/quotation/css/quotation_create.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" type="text/css">
{% endblock %}
{% block pageAction %}
    <button class="btn btn-flush-primary flush-soft-hover"
            type="submit" form="frm_quotation_create" data-bs-toggle="tooltip" data-bs-placement="top" title="Save"
            data-bs-original-title="Save">
        <span class="icon">
            <span class="feather-icon">
                <i data-feather="save"></i>
            </span>
            <span class="font-3 ml-1">
                {% trans 'Save' %}
            </span>
        </span>
    </button>
{% endblock %}

{% block pageContent %}
    <div class="row">
        <ul class="nav nav-line nav-tabs nav-light quotation-tabs">
            <li class="nav-item quotation-tab-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#tab_block_1">
                    <span class="nav-link-text"><i class="far fa-file-alt"></i></span>
                </a>
            </li>
            <li class="nav-item quotation-tab-item" id="tab-indicator">
                <a class="nav-link" data-bs-toggle="tab" href="#tab_block_2">
                    <span class="nav-link-text"><i class="fa-regular fa-chart-bar"></i></span>
                </a>
            </li>
        </ul>
    </div>

    <form
            data-url="{% url 'SaleOrderListAPI' %}"
            data-url-redirect="{% url 'SaleOrderList' %}"
            data-method="POST"
            id="frm_quotation_create"
            class="sale-order"
            method="post"
    >
        {% csrf_token %}
        <div class="tab-content">
            <div class="tab-pane fade show active" id="tab_block_1">
                <div class="container-fluid">
                    <div class="collapse multi-collapse show" id="collapseExample">
                        <div class="row">
                            <div class="form-group">
                                <label class="form-label" for="quotation-create-title">{% trans 'Title' %}<span class="required"></span></label>
                                <input
                                        type="text" class="form-control"
                                        placeholder="input title"
                                        name="title"
                                        id="quotation-create-title"
                                        required
                                >
                                <small class="form-text text-muted">{% trans 'title of sale order' %}</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div class="form-group">
                                    <label class="form-label" for="select-box-quotation-create-opportunity">{% trans 'Select Opportunity' %}</label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <span class="input-prefix">
                                                <div class="btn-group dropstart">
                                                    <i
                                                            class="fas fa-info-circle"
                                                            data-bs-toggle="dropdown"
                                                            data-dropdown-animation
                                                            aria-haspopup="true"
                                                            aria-expanded="false"
                                                            disabled
                                                    ></i>
                                                    <div class="dropdown-menu w-210p mt-4"></div>
                                                </div>
                                            </span>
                                            <select
                                                class="form-select" id="select-box-quotation-create-opportunity"
                                                data-url="{% url "OpportunityListAPI" %}"
                                                data-method="GET"
                                                data-link-detail="{% url "OpportunityDetail" 1 %}"
                                                name="opportunity"
                                            ></select>
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Opportunity link to sale order' %}</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="select-box-quotation-create-customer">{% trans 'Select Customer' %}<span class="required"></span></label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <span class="input-prefix">
                                                <div class="btn-group dropstart">
                                                    <i
                                                            class="fas fa-info-circle"
                                                            data-bs-toggle="dropdown"
                                                            data-dropdown-animation
                                                            aria-haspopup="true"
                                                            aria-expanded="false"
                                                            disabled
                                                    ></i>
                                                    <div class="dropdown-menu w-210p mt-4"></div>
                                                </div>
                                            </span>
                                            <select
                                                    class="form-select"
                                                    id="select-box-quotation-create-customer"
                                                    data-url="{% url "AccountForSaleListAPI" %}"
                                                    data-method="GET"
                                                    data-link-detail="{% url "AccountDetail" 1 %}"
                                                    name="customer"
                                                    required
                                            ></select>
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Customer link to sale order' %}</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="select-box-quotation-create-contact">{% trans 'Select Contact' %}<span class="required"></span></label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <span class="input-prefix">
                                                <div class="btn-group dropstart">
                                                    <i
                                                            class="fas fa-info-circle"
                                                            data-bs-toggle="dropdown"
                                                            data-dropdown-animation
                                                            aria-haspopup="true"
                                                            aria-expanded="false"
                                                            disabled
                                                    ></i>
                                                    <div class="dropdown-menu w-210p mt-4"></div>
                                                </div>
                                            </span>
                                            <select
                                                class="form-select"
                                                id="select-box-quotation-create-contact"
                                                data-url="{% url "ContactListAPI" %}"
                                                data-method="GET"
                                                data-link-detail="{% url 'ContactDetail' 1 %}"
                                                name="contact"
                                                required
                                            ></select>
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Contact link to sale order' %}</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="select-box-quotation-create-payment-term">{% trans 'Select Payment Terms' %}<span class="required"></span></label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <span class="input-prefix">
                                                <div class="btn-group dropstart">
                                                    <i
                                                            class="fas fa-info-circle"
                                                            data-bs-toggle="dropdown"
                                                            data-dropdown-animation
                                                            aria-haspopup="true"
                                                            aria-expanded="false"
                                                            disabled
                                                    ></i>
                                                    <div class="dropdown-menu w-210p mt-4"></div>
                                                </div>
                                            </span>
                                            <select
                                                    class="form-select"
                                                    id="select-box-quotation-create-payment-term"
                                                    data-url="{% url "PaymentsTermsListAPI" %}"
                                                    data-link-detail=""
                                                    data-method="GET"
                                                    name="payment_term"
                                                    required
                                            ></select>
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Payment term of sale order' %}</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label class="form-label" for="quotation-create-date-created">{% trans 'Date Created' %}</label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <input
                                                type="text" class="form-control disabled-custom-show"
                                                placeholder="dd/mm/yyyy"
                                                name="date_created"
                                                id="quotation-create-date-created"
                                                disabled
                                            >
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Date create sale order' %}</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="quotation-create-status">{% trans 'Status' %}</label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <input
                                                type="text" class="form-control disabled-custom-show"
                                                value="Open"
                                                name="status"
                                                id="quotation-create-status"
                                                disabled
                                            >
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Status of sale order' %}</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="select-box-quotation-create-sale-person">{% trans 'Select Sale Person' %}<span class="required"></span></label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <span class="input-prefix">
                                                <div class="btn-group dropstart">
                                                    <i
                                                            class="fas fa-info-circle"
                                                            data-bs-toggle="dropdown"
                                                            data-dropdown-animation
                                                            aria-haspopup="true"
                                                            aria-expanded="false"
                                                            disabled
                                                    ></i>
                                                    <div class="dropdown-menu w-210p mt-4"></div>
                                                </div>
                                            </span>
                                            <select
                                                class="form-select"
                                                id="select-box-quotation-create-sale-person"
                                                data-url="{% url "EmployeeListAPI" %}"
                                                data-method="GET"
                                                data-link-detail="{% url 'EmployeeDetail' 1 %}"
                                                name="sale_person"
                                                required
                                            ></select>
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Sale person of sale order' %}</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="select-box-quotation">{% trans 'Select Quotation' %}</label>
                                    <div class="input-group">
                                        <span class="input-affix-wrapper">
                                            <span class="input-prefix">
                                                <div class="btn-group dropstart">
                                                    <i
                                                            class="fas fa-info-circle"
                                                            data-bs-toggle="dropdown"
                                                            data-dropdown-animation
                                                            aria-haspopup="true"
                                                            aria-expanded="false"
                                                            disabled
                                                    ></i>
                                                    <div class="dropdown-menu w-210p mt-4"></div>
                                                </div>
                                            </span>
                                            <select
                                                class="form-select disabled-custom-show"
                                                id="select-box-quotation"
                                                data-url="{% url "QuotationListAPI" %}"
                                                data-method="GET"
                                                data-link-detail="{% url "QuotationDetail" 1 %}"
                                                name="quotation"
                                                disabled
                                            ></select>
                                        </span>
                                    </div>
                                    <small class="form-text text-muted">{% trans 'Quotation link to sale order' %}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row collapse-arrow">
                        <i
                            class="fas fa-angle-double-up"
                            data-bs-toggle="collapse"
                            data-bs-target="#collapseExample"
                            data-bs-placement="top"
                            aria-expanded="false"
                            aria-controls="collapseExample"
                            id="quotation-info-collapse"
                        ></i>
                    </div>
                    <br>
                    <div class="row">
                        <div class="row">
                            <div class="col-7">
                                <ul class="nav nav-light nav-tabs" id="quotation-tabs">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-bs-toggle="tab" href="#tab_block_3">
                                            <span class="nav-link-text">{% trans 'Line Detail' %}</span>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-bs-toggle="tab" href="#tab_block_5">
                                            <span class="nav-link-text">{% trans 'Logistics' %}</span>
                                        </a>
                                    </li>
                                    <li class="nav-item quotation-cost">
                                        <a class="nav-link" data-bs-toggle="tab" href="#tab_block_6">
                                            <span class="nav-link-text">{% trans 'Cost' %}</span>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-bs-toggle="tab" href="#tab_block_7">
                                            <span class="nav-link-text">{% trans 'Expense' %}</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-5">
                                <div class="row">
                                    <div class="col-2">
                                        <button type="button" class="btn btn-soft-primary">{% trans 'Print' %}</button>
                                    </div>
                                    <div class="col-7">
                                        <button type="button" class="btn btn-soft-primary">{% trans 'Send Email' %}</button>
                                    </div>
                                    <div class="col-3">
                                        <button
                                                type="button"
                                                class="btn btn-soft-primary"
                                                id="btn-copy-quotation"
                                                data-bs-toggle="modal"
                                                data-bs-target="#quotationModalCenter"
                                                data-copy-type="copy-from"
                                        >{% trans 'Copy Quotation' %}</button>
                                        <div
                                                class="modal fade" id="quotationModalCenter" tabindex="-1"
                                                role="dialog" aria-labelledby="quotationModalCenter"
                                                aria-hidden="true"
                                        >
                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title">{% trans 'Select Quotation' %}</h5>
                                                        <button
                                                                type="button" class="btn-close"
                                                                data-bs-dismiss="modal" aria-label="Close"
                                                        >
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <table
                                                                id="datable-copy-quotation"
                                                                class="table nowrap w-100 mb-5"
                                                        >
                                                            <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>{% trans 'Title' %}</th>
                                                                <th>{% trans 'Code' %}</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            </tbody>
                                                        </table>
                                                        <div class="form-check" id="copy-quotation-option" hidden>
                                                            <input type="checkbox" class="form-check-input check-option" id="customCheck1" checked>
                                                            <label class="form-check-label" for="customCheck1">{% trans 'Copy all from quotation to sale order' %}</label>
                                                        </div>
                                                        <table
                                                                id="datable-copy-quotation-product"
                                                                class="table nowrap w-100 mb-5"
                                                                hidden
                                                        >
                                                            <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th></th>
                                                                <th>{% trans 'Product' %}</th>
                                                                <th>{% trans 'Quantity' %}</th>
                                                                <th>{% trans 'Input' %}</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button
                                                                type="button" class="btn btn-secondary"
                                                                data-bs-dismiss="modal"
                                                        >{% trans 'Close' %}</button>
                                                        <button type="button" class="btn btn-primary" id="btn-select-quotation-copy">Select</button>
                                                        <button type="button" class="btn btn-primary" id="btn-quotation-copy-confirm" data-copy-type="copy-from" data-bs-dismiss="modal" hidden>{% trans 'Copy' %}</button>
                                                        <input type="hidden" id="data-copy-quotation-detail">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-content-quotation-product">
                            <div class="tab-pane fade show active" id="tab_block_3">
                                <div class="row">
                                    <table
                                            id="datable-quotation-create-product"
                                            class="table nowrap w-100 mb-5"
                                    >
                                        <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>{% trans 'Product' %}<span class="required"></span></th>
                                            <th>{% trans 'Description' %}</th>
                                            <th>{% trans 'Unit Of Measure' %}<span class="required"></span></th>
                                            <th>{% trans 'Quantity' %}<span class="required"></span></th>
                                            <th>{% trans 'Unit Price' %}<span class="required"></span></th>
                                            <th>{% trans 'Discount' %}</th>
                                            <th>{% trans 'Tax' %}</th>
                                            <th>{% trans 'Subtotal Price' %}</th>
                                            <th>{% trans 'Actions' %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                    <div class="row">
                                        <div class="col-2">
                                            <button type="button" class="btn btn-link btn-animated" id="btn-add-product-quotation-create">
                                                <span><span class="icon"><span class="feather-icon"><i class="fa-regular fa-square-plus"></i></span></span><span>{% trans 'Add Product' %}</span></span>
                                            </button>
                                        </div>
                                        <div class="col-10"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-7">
                                        <div class="row mt-8">
                                            <div class="col-4">
                                                <button
                                                    type="button"
                                                    class="btn btn-soft-success"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#shippingFeeModalCenter"
                                                    id="btn-add-shipping"
                                            >{% trans 'Add Shipping Fee' %}</button>
                                            <div
                                                    class="modal fade" id="shippingFeeModalCenter" tabindex="-1"
                                                    role="dialog" aria-labelledby="shippingFeeModalCenter"
                                                    aria-hidden="true"
                                            >
                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">{% trans 'Shipping' %}</h5>
                                                            <button
                                                                    type="button" class="btn-close"
                                                                    data-bs-dismiss="modal" aria-label="Close"
                                                            >
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <table
                                                                    id="datable-quotation-create-shipping"
                                                                    class="table nowrap w-100 mb-5"
                                                            >
                                                                <thead>
                                                                <tr>
                                                                    <th>STT</th>
                                                                    <th>{% trans 'Title' %}</th>
                                                                    <th>{% trans 'Actions' %}</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button
                                                                    type="button" class="btn btn-secondary"
                                                                    data-bs-dismiss="modal"
                                                            >{% trans 'Close' %}</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            </div>
                                            <div class="col-8"></div>
                                        </div>
                                    </div>
                                    <div class="col-5" id="quotation-tab-product-totals">
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Pretax Amount' %}</p></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-product-pretax-amount"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_product_pretax_amount"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-product-pretax-amount-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                                <input
                                                    type="hidden"
                                                    id="quotation-final-revenue-before-tax"
                                                >
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Discount' %}</p></div>
                                            <div class="col-3">
                                                <div class="row">
                                                    <div class="input-group">
                                                        <span class="input-affix-wrapper">
                                                            <input type="text" class="form-control validated-number" id="quotation-create-product-discount">
                                                            <span class="input-suffix">%</span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-product-discount-amount"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_product_discount"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-product-discount-amount-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Taxes' %}</p></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-product-taxes"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_product_tax"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-product-taxes-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <hr class="quotation-horizon">
                                        <div class="row mb-2">
                                            <div class="col-3"><b>{% trans 'Total' %}</b></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-product-total"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_product"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-product-total-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <button
                                                    type="button"
                                                    class="btn btn-soft-success"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#promotionModalCenter"
                                                    id="btn-check-promotion"
                                            >{% trans 'Check available promotion' %}</button>
                                            <div
                                                    class="modal fade" id="promotionModalCenter" tabindex="-1"
                                                    role="dialog" aria-labelledby="promotionModalCenter"
                                                    aria-hidden="true"
                                            >
                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">{% trans 'Promotion' %}</h5>
                                                            <button
                                                                    type="button" class="btn-close"
                                                                    data-bs-dismiss="modal" aria-label="Close"
                                                            >
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <table
                                                                    id="datable-quotation-create-promotion"
                                                                    class="table nowrap w-100 mb-5"
                                                            >
                                                                <thead>
                                                                <tr>
                                                                    <th>STT</th>
                                                                    <th>{% trans 'Title' %}</th>
                                                                    <th>{% trans 'Actions' %}</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button
                                                                    type="button" class="btn btn-secondary"
                                                                    data-bs-dismiss="modal"
                                                            >{% trans 'Close' %}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab_block_5">
                                <div class="row logistics-body">
                                    <div class="form-group">
                                        <label class="form-label">{% trans 'Shipping Address' %}
                                            <button type="button" class="btn btn-icon btn-rounded flush-soft-hover" data-bs-toggle="modal" data-bs-target="#shippingModalCenter"><span class="icon"><i class="fa-regular fa-pen-to-square"></i></span></button>
                                        </label>
                                        <textarea class="form-control" rows="3" cols="50" name="" id="quotation-create-shipping-address"></textarea>
                                    </div>
                                    <div
                                            class="modal fade" id="shippingModalCenter" tabindex="-1"
                                            role="dialog" aria-labelledby="shippingModalCenter"
                                            aria-hidden="true"
                                    >
                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                            <div class="modal-content" id="quotation-create-modal-shipping-body">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">{% trans 'Shipping Address' %}</h5>
                                                    <button
                                                            type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                    >
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body"></div>
                                                <div class="modal-footer">
                                                    <button
                                                            type="button" class="btn btn-secondary"
                                                            data-bs-dismiss="modal"
                                                    >{% trans 'Close' %}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="form-label">{% trans 'Billing Address' %}
                                            <button type="button" class="btn btn-icon btn-rounded flush-soft-hover" data-bs-toggle="modal" data-bs-target="#billingModalCenter"><span class="icon"><i class="fa-regular fa-pen-to-square"></i></span></button>
                                        </label>
                                        <textarea class="form-control" rows="3" cols="50" name="" id="quotation-create-billing-address"></textarea>
                                    </div>
                                    <div
                                            class="modal fade" id="billingModalCenter" tabindex="-1"
                                            role="dialog" aria-labelledby="billingModalCenter"
                                            aria-hidden="true"
                                    >
                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                            <div class="modal-content" id="quotation-create-modal-billing-body">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">{% trans 'Billing Address' %}</h5>
                                                    <button
                                                            type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                    >
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body"></div>
                                                <div class="modal-footer">
                                                    <button
                                                            type="button" class="btn btn-secondary"
                                                            data-bs-dismiss="modal"
                                                    >{% trans 'Close' %}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab_block_6">
                                <div class="row">
                                    <table
                                            id="datable-quotation-create-cost"
                                            class="table nowrap w-100 mb-5"
                                    >
                                        <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>{% trans 'Product' %}</th>
                                            <th>{% trans 'Unit Of Measure' %}</th>
                                            <th>{% trans 'Quantity' %}</th>
                                            <th>{% trans 'Cost Price' %}<span class="required"></span></th>
                                            <th>{% trans 'Tax' %}</th>
                                            <th>{% trans 'Subtotal Price' %}</th>
                                            <th>{% trans 'Actions' %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-7"></div>
                                    <div class="col-5" id="quotation-tab-cost-totals">
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Pretax Amount' %}</p></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-cost-pretax-amount"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_cost_pretax_amount"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-cost-pretax-amount-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Taxes' %}</p></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-cost-taxes"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_cost_tax"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-cost-taxes-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <hr class="quotation-horizon">
                                        <div class="row mb-2">
                                            <div class="col-3"><b>{% trans 'Total' %}</b></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-cost-total"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_cost"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-cost-total-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab_block_7">
                                <div class="row">
                                    <table
                                            id="datable-quotation-create-expense"
                                            class="table nowrap w-100 mb-5"
                                    >
                                        <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>{% trans 'Expense' %}<span class="required"></span></th>
                                            <th>{% trans 'Unit Of Measure' %}<span class="required"></span></th>
                                            <th>{% trans 'Quantity' %}<span class="required"></span></th>
                                            <th>{% trans 'Expense Price' %}<span class="required"></span></th>
                                            <th>{% trans 'Tax' %}</th>
                                            <th>{% trans 'Subtotal Price' %}</th>
                                            <th>{% trans 'Actions' %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                    <div class="row">
                                        <div class="col-2">
                                            <button type="button" class="btn btn-link btn-animated" id="btn-add-expense-quotation-create">
                                                <span><span class="icon"><span class="feather-icon"><i class="fa-regular fa-square-plus"></i></span></span><span>{% trans 'Add Expense' %}</span></span>
                                            </button>
                                        </div>
                                        <div class="col-10"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-7"></div>
                                    <div class="col-5" id="quotation-tab-expense-totals">
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Pretax Amount' %}</p></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-expense-pretax-amount"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_expense_pretax_amount"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-expense-pretax-amount-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><p>{% trans 'Taxes' %}</p></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-expense-taxes"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_expense_tax"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-expense-taxes-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                        <hr class="quotation-horizon">
                                        <div class="row mb-2">
                                            <div class="col-3"><b>{% trans 'Total' %}</b></div>
                                            <div class="col-3"></div>
                                            <div class="col-6">
                                                <input
                                                    id="quotation-create-expense-total"
                                                    type="text"
                                                    class="form-control mask-money disabled-custom-show"
                                                    data-return-type="number"
                                                    name="total_expense"
                                                    disabled
                                                >
                                                <input
                                                    id="quotation-create-expense-total-raw"
                                                    type="text"
                                                    class="form-control"
                                                    value="0"
                                                    hidden
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <input
                                type="hidden"
                                id="data-init-quotation-create-tables-product"
                                data-url="{% url "ProductForSaleListAPI" %}"
                                data-link-detail="{% url "ProductDetail" 1 %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-tables-expense"
                                data-url="{% url "ExpenseForSaleListAPI" %}"
                                data-link-detail="{% url "ExpenseDetail" 1 %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-tables-uom"
                                data-url="{% url "UnitOfMeasureListAPI" %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-tables-tax"
                                data-url="{% url "TaxListAPI" %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-request-employee-id"
                                value="{{ data.data.employee_current_id }}"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-company-currency-config"
                        >
                        <input
                                type="hidden"
                                id="data-quotation"
                                value="[]"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-promotion"
                                data-url="{% url "PromotionCheckListAPI" %}"
                                data-link-detail="{% url "PromotionDetail" 1 %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-create-shipping"
                                data-url="{% url "ShippingCheckListAPI" %}"
                                data-link-detail="{% url "ShippingDetail" 1 %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-copy-quotation"
                                data-url="{% url "QuotationListAPI" %}"
                                data-url-detail="{% url "QuotationDetailAPI" 1 %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="data-init-quotation-copy-to"
                                value="{{ data.data.data_copy_to }}"
                        >
                        <input
                                type="hidden"
                                id="customer-price-list"
                        >
                        <input
                                type="hidden"
                                id="quotation-config-data"
                                class="quotation-config"
                                data-url="{% url "SaleOrderConfigDetailAPI" %}"
                                data-method="GET"
                        >
                        <input
                                type="hidden"
                                id="quotation-check-promotion"
                        >
                    </div>
                </div>


                <button type="button" class="btn btn-primary" id="btn-invalid-promotion" data-bs-toggle="modal" data-bs-target="#invalidPromotionModalCenter" hidden>
                    Vertically centered modal
                </button>
                <div class="modal fade" id="invalidPromotionModalCenter" tabindex="-1" role="dialog" aria-labelledby="invalidPromotionModalCenter" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-body modal-body-invalid-promotion mb-2">
                                <h6 class="mb-3">{% trans 'Apply Promotion Fail.' %}</h6>
                                <p>{% trans 'Document is unqualified for promotion applied. Remove promotion or select another available promotion.' %}</p>
                            </div>
                            <div class="row modal-footer-invalid-promotion">
                                <div class="col-6">
                                    <button type="button" class="btn btn-link btn-remove-promotion" data-bs-dismiss="modal" id="btn-remove-promotion">{% trans 'Remove Promotion.' %}</button>
                                </div>
                                <div class="col-6">
                                    <button type="button" class="btn btn-link btn-see-promotion" data-bs-dismiss="modal" id="btn-check-another-promotion">{% trans 'See Promotion' %}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="tab-pane fade" id="tab_block_2">
                <div class="row">
                    <div class="row mb-1">
                        <div class="col-2">
                            <button
                                    type="button"
                                    class="btn btn-soft-success"
                                    id="btn-refresh-quotation-indicator"
                            >
                            <span><span class="icon"><span class="feather-icon"><i class="fa-solid fa-arrows-rotate"></i></span></span><span>{% trans 'Refresh data' %}</span></span>
                            </button>
                        </div>
                        <div class="col-10"></div>
                    </div>
                    <table
                            id="datable-quotation-create-indicator"
                            class="table nowrap w-100 mb-5 sale-order"
                    >
                        <thead>
                        <tr>
                            <th>STT</th>
                            <th>{% trans 'Indicator name' %}</th>
                            <th>{% trans 'Quotation indicator value' %}</th>
                            <th>{% trans 'Sale order indicator value' %}</th>
                            <th>{% trans 'Difference value' %}</th>
                            <th>{% trans 'Indicator rate' %}</th>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <input
                        type="hidden"
                        id="quotation-indicator-data"
                        data-url="{% url 'SaleOrderIndicatorListAPI' %}"
                        data-method="get"
                >
            </div>
        </div>
        <input
            type="hidden"
            id="base-trans-factory"
            data-check-if-shipping-address="{% trans 'Please select shipping address' %}"
            data-select-address="{% trans 'Select this address' %}"
            data-view-detail-info="{% trans 'View detail' %}"
            data-btn-close="{% trans 'Close' %}"
            data-more-information="{% trans 'More information' %}"
            data-apply="{% trans 'Apply' %}"
            data-refreshed="{% trans 'Data is refreshed' %}"
        >
    </form>
{% endblock %}


{% block jsFooter %}
    <!-- Select2 -->
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>

    <!-- Daterangepicker JS -->
    <script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'vendors/daterangepicker/daterangepicker.js' %}"></script>

    <script src="{% static 'assets/sales/quotation/js/quotation_promote_shipping.js' %}"></script>
    <script src="{% static 'assets/sales/quotation/js/quotation_common.js' %}"></script>
    <script src="{% static 'assets/sales/quotation/js/quotation_create.js' %}"></script>
    <script src="{% static 'assets/sales/quotation/js/quotation_indicator.js' %}"></script>
{% endblock %}