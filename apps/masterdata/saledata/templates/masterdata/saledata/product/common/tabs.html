{% load i18n %}

<div class="row mt-5">
    <div class="col-12">
        <ul class="nav nav-tabs nav-icon nav-light">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#tab_general">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fa-solid fa-list"></i></span></span>
                    <span class="nav-link-text">{% trans 'General' %}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#tab_sale" id="link-tab-sale">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fa-solid fa-sack-dollar"></i></span></span>
                    <span class="nav-link-text">{% trans 'Sale' %}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#tab_inventory" id="link-tab-inventory">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fas fa-warehouse"></i></span></span>
                    <span class="nav-link-text">{% trans 'Inventory' %}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" id="link-tab-purchase" href="#tab_purchase">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fa-solid fa-cart-shopping"></i></span></span>
                    <span class="nav-link-text">{% trans 'Purchase' %}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" id="link-tab-variants" href="#tab_component">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fa-solid fa-puzzle-piece"></i></span></span>
                    <span class="nav-link-text">{% trans 'Component description' %}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" id="link-tab-variants" href="#tab_variants">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fa-solid fa-palette"></i></span></span>
                    <span class="nav-link-text">{% trans 'Variants' %}</span>
                </a>
            </li>
            <li class="nav-item" id="accounting-determination-tab">
                <a class="nav-link" data-bs-toggle="tab" href="#tab_account_determination">
                    <span class="nav-icon-wrap"><span class="feather-icon"><i class="fa-solid fa-book"></i></span></span>
                    <span class="nav-link-text">{% trans 'Account determination' %}</span>
                </a>
            </li>
        </ul>
    </div>
</div>
<div class="tab-content">
    <div class="tab-pane fade show active" id="tab_general">
        <div class="row">
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="general-product-type" class="form-label required">{% trans "Product Type" %}</label>
                    <select id="general-product-type" class="form-select select2" data-method="GET"
                            data-url="{% url 'ProductTypeListAPI' %}"></select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="general-product-category" class="form-label required">{% trans "Product Category" %}</label>
                    <select id="general-product-category" class="form-select" data-method="GET"
                            data-url="{% url "ProductCategoryListAPI" %}"></select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="general-uom-group" class="form-label required">{% trans "UoM Group" %}</label>
                    <select id="general-uom-group" class="form-select" data-method="GET"
                            data-url="{% url "UnitOfMeasureGroupListAPI" %}"
                            data-url-detail="{% url "UnitOfMeasureGroupDetailAPI" pk=0 %}"></select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="general-manufacturer" class="form-label">{% trans "Manufacturer" %}</label>
                    <select id="general-manufacturer" class="form-select" data-method="GET"
                            data-url="{% url "ManufacturerListAPI" %}"></select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="general-traceability-method" class="form-label">{% trans "Traceability method" %}</label>
                    <select id="general-traceability-method" class="form-select" data-method="GET">
                        <option value="0">{% trans "None" %}</option>
                        <option value="1">{% trans "Batch/Lot number" %}</option>
                        <option value="2">{% trans "Serial number" %}</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="general-standard-price" class="form-label">{% trans "Standard cost" %}</label>
                    <input id="general-standard-price" class="form-control mask-money" value="0">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h6 class="heading-wth-icon text-primary">
                            <span class="head-icon"><i data-feather="package"></i></span>
                            {% trans "Product Dimension and Weight Control" %}
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 col-md-4 col-lg-4">
                                <div class="form-group">
                                    <label for="length" class="form-label">{% trans "Length" %}</label>
                                    <span class="input-affix-wrapper affix-wth-text">
                                        <input class="form-control inpDimension" id="length">
                                        <span class="input-suffix">cm</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-4">
                                <div class="form-group">
                                    <label for="width" class="form-label">{% trans "Width" %}</label>
                                    <span class="input-affix-wrapper affix-wth-text">
                                        <input class="form-control inpDimension" id="width">
                                        <span class="input-suffix">cm</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-4">
                                <div class="form-group">
                                    <label for="height" class="form-label">{% trans "Height" %}</label>
                                    <span class="input-affix-wrapper affix-wth-text">
                                        <input class="form-control inpDimension" id="height">
                                        <span class="input-suffix">cm</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-4">
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="volume" class="form-label">{% trans "Volume" %}</label>
                                        </div>
                                        <div class="col-6 text-right">
                                            <a href="#" id="to-fix-left"><i class="fas fa-caret-left text-primary"></i></a>
                                            <span style="font-size: small">.00</span>
                                            <a href="#" id="to-fix-right"><i class="fas fa-caret-right text-primary"></i></a>
                                        </div>
                                    </div>
                                    <span class="input-affix-wrapper affix-wth-text">
                                        <input class="form-control" id="volume">
                                        <span id="VolumeSpan" class="input-suffix"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-4">
                                <div class="form-group">
                                    <label for="weight" class="form-label">{% trans "Weight" %}</label>
                                    <span class="input-affix-wrapper affix-wth-text">
                                        <input class="form-control" id="weight">
                                        <span id="WeightSpan" class="input-suffix"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_sale">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="check-tab-sale">
            <label class="form-check-label" for="check-tab-sale">{% trans "Enable tab" %}</label>
        </div>
        <div hidden class="row mt-5">
            <div class="col-12 col-md-12 col-lg-4">
                <div class="row">
                    <div class="col-12 col-md-12 col-lg-6">
                        <div class="form-group">
                            <label for="sale-uom" class="form-label required">{% trans "Default UoM" %}</label>
                            <select id="sale-uom" class="form-select" data-method="GET"
                                    data-url="{% url "UnitOfMeasureListAPI" %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-12 col-lg-6">
                        <div class="form-group">
                            <label for="sale-tax" class="form-label required">{% trans "Tax" %}</label>
                            <select id="sale-tax" class="form-select" data-method="GET"
                                    data-url="{% url "TaxListAPI" %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-12 col-lg-12">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-6">
                                    <label class="form-label" for="price_list_for_sale_online">{% trans "Price list for sale online" %}</label>
                                </div>
                                <div class="col-6 text-right">
                                    <div class="form-check form-switch">
                                        <input type="checkbox" class="form-check-input" id="is_publish_website">
                                        <label class="form-check-label" for="is_publish_website">{% trans "Sale online" %}</label>
                                    </div>
                                </div>
                            </div>
                            <select id="price_list_for_sale_online" data-url="{% url 'PriceListAPI' %}" class="select2 form-select" data-placeholder="{% trans 'From Price List in right side' %}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-12 col-lg-12">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-12 col-lg-12 col-md-12">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="available_notify_checkbox">
                                        <label class="form-check-label" for="available_notify_checkbox">{% trans "Notify when available quantity is less than" %}</label>
                                    </div>
                                </div>
                            </div>
                            <input id="less_than_number" type="number" min="0" class="form-control">
                            <label for="less_than_number"></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-12 col-lg-8 ul-price-list" id="sale-select-price-list" data-method="GET" data-url="{% url "PriceListAPI" %}">
                <table class="table nowrap w-100" id="table_price_list" data-method="GET" data-url="{% url "PriceListAPI" %}">
                    <thead class="bg-secondary-light-5">
                        <tr>
                            <th style="min-width: 50px"></th>
                            <th style="min-width: 50px">{% trans 'Select' %}</th>
                            <th style="min-width: 150px">{% trans 'Price list' %}</th>
                            <th style="min-width: 150px">{% trans 'Start' %}</th>
                            <th style="min-width: 150px">{% trans 'End' %}</th>
                            <th style="min-width: 150px">{% trans 'Price' %}</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_inventory">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="check-tab-inventory">
            <label class="form-check-label" for="check-tab-inventory">{% trans "Enable tab" %}</label>
        </div>
        <span hidden class="small text-danger" id="notify-inventory">
            {% trans 'Inventory tab is not allowed for Service product.' %}
        </span>
        <div hidden class="row mt-5">
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="inventory-uom" class="form-label required">{% trans "UoM Name" %}</label>
                    <select id="inventory-uom" class="form-select" data-method="GET"
                            data-url="{% url 'UnitOfMeasureListAPI' %}">
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="inventory-level-min" class="form-label">{% trans "Inventory Level Min" %}</label>
                    <div class="input-group">
                        <span class="input-group-text" id="inputGroup-sizing-sm">MIN</span>
                        <input id="inventory-level-min" type="number" class="form-control" min="0" step="1">
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="inventory-level-max" class="form-label">{% trans "Inventory Level Max" %}</label>
                    <div class="input-group">
                        <span class="input-group-text" id="inputGroup-sizing-sm">MAX</span>
                        <input id="inventory-level-max" type="number" class="form-control" min="0" step="1">
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="valuation-method" class="form-label required">{% trans "Valuation method" %}</label>
                    <select id="valuation-method"
                            class="form-select required">
                        <option value="0">{% trans 'FIFO' %}</option>
                        <option value="1">{% trans 'Weighted average' %}</option>
{#                        <option value="2" disabled>{% trans 'Specific identification method' %}</option>#}
                    </select>
                </div>
            </div>
        </div>
        <div hidden class="row">
            <div class="col-12 mt-5">
                <div class="row">
                    <div class="col-12 col-md-9 col-lg-6">
                        <span class="text-muted">{% trans 'Product overview' %}</span>
                        <table id="datatable-warehouse-overview" class="table nowrap w-100">
                            <thead>
                                <tr class="bg-secondary-light-5">
                                    <th>{% trans "Stock" %}</th>
                                    <th>{% trans "Sale order" %}</th>
                                    <th>{% trans "Purchase" %}</th>
                                    <th>{% trans "Production" %}</th>
                                    <th>{% trans "Available" %}</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="col-12 col-md-9 col-lg-6">
                        <span class="text-muted">{% trans 'Product warehouse detail' %}</span>
                        <table id="datatable-warehouse-list" class="table nowrap w-100"
                               data-url="{% url "WareHouseListAPI" %}"
                               data-method="GET">
                            <thead>
                                <tr class="bg-secondary-light-5">
                                    <th>{% trans "WH Code" %}</th>
                                    <th>{% trans "WH Name" %}</th>
                                    <th>{% trans "Stock" %}</th>
                                    <th>{% trans "Cost" %}</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_purchase">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="check-tab-purchase">
            <label class="form-check-label" for="check-tab-purchase">{% trans "Enable tab" %}</label>
        </div>
        <div hidden class="row mt-5">
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="purchase-uom" class="form-label required">{% trans "Default UoM" %}</label>
                    <select id="purchase-uom" class="form-select" data-method="GET"
                            data-url="{% url "UnitOfMeasureListAPI" %}"></select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="purchase-tax" class="form-label required">{% trans "Tax" %}</label>
                    <select id="purchase-tax" class="form-select" data-method="GET"
                            data-url="{% url "TaxListAPI" %}"></select>
                </div>
            </div>
            <div class="col-12 col-md-3 col-lg-2">
                <div class="form-group">
                    <label for="purchase-supplied-by" class="form-label required">{% trans "Supplied by" %}</label>
                    <select id="purchase-supplied-by" class="form-select">
                        <option value="0">{% trans 'Purchasing' %}</option>
                        <option value="1">{% trans 'Making' %}</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_component">
        <div class="row">
            <div class="col-12">
                <span class="small">{% trans "This table is for reference only - used to preload data for 'Product modification'." %}</span>
                <table class="table nowrap w-100" id="component-table">
                    <thead class="bg-secondary-light-5">
                    <tr>
                        <th style="min-width: 50px"></th>
                        <th style="min-width: 200px">{% trans 'Name' %}</th>
                        <th style="min-width: 200px">{% trans 'Description' %}</th>
                        <th style="min-width: 150px">{% trans 'Quantity' %}</th>
                        <th style="min-width: 50px"></th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <button id="btn-add-row-component" class="btn btn-sm btn-primary mt-2" type="button">
                    <span>
                        <span>{% trans "Add new component" %}</span>
                        <span class="icon">
                            <i class="fas fa-plus-circle"></i>
                        </span>
                    </span>
                </button>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_variants">
        <div class="row">
            <div class="col-12">
                <table class="table nowrap w-100" id="table-variant-attributes">
                    <thead class="bg-secondary-light-5">
                        <tr>
                            <th></th>
                            <th class="required">{% trans 'Attributes' %}</th>
                            <th class="required">{% trans 'Values' %}</th>
                            <th></th>
                            <th class="required">{% trans 'Configurations' %}</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <button id="btn-add-row-variant-attributes" class="btn btn-sm btn-primary mt-2" type="button">
                    <span>
                        <span>{% trans "Add new attribute" %}</span>
                        <span class="icon">
                            <i class="fas fa-plus-circle"></i>
                        </span>
                    </span>
                </button>
            </div>
        </div>
        <div class="row" id="table-variant-items-div" hidden>
            <div class="col-12">
                <table id="table-variant-items" class="table  nowrap w-100">
                    <thead class="thead-primary">
                        <tr>
                            <th class="w-5"></th>
                            <th class="w-45">
                                {% trans 'Variant' %}
                                <span class="badge-label text-white"><span class="badge badge-soft-primary" id="table-variant-items-label">0</span></span>
                            </th>
                            <th class="w-5"></th>
                            <th class="w-20">{% trans 'SKU' %}</th>
                            <th class="w-20">{% trans 'Extra Price' %}</th>
                            <th class="w-5">{% trans 'Active' %}</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="tab_account_determination">
        <div class="row">
            <div class="col-12 col-md-4 col-lg-2">
                <div class="form-group">
                    <label for="account-deter-referenced-by" class="form-label required">{% trans "Referenced by" %}</label>
                    <select id="account-deter-referenced-by" class="form-select">
                        <option value="0">{% trans 'Warehouse' %}</option>
                        <option value="1">{% trans 'Product type' %}</option>
                        <option value="2">{% trans 'This product' %}</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row" hidden>
            <div class="col-12">
                {% if pk %}
                    <table class="table nowrap w-100"
                           id="product-account-determination-table"
                           data-method="GET"
                           data-trans-change-confirm="{% trans 'Confirm this change?' %}"
                           data-trans-change-noti="{% trans 'This action can not be undo!' %}"
                           data-chart-of-account-url="{% url 'ChartOfAccountsListAPI' %}"
                           data-url-detail="{% url 'ProductAccountDeterminationDetailAPI' pk=0 %}"
                           data-url="{% url 'ProductAccountDeterminationListAPI' %}">
                        <thead class="bg-secondary-light-5">
                        <tr>
                            <th></th>
                            <th>{% trans 'Type' %}</th>
                            <th>{% trans 'Trading account type' %}</th>
                            <th>{% trans 'Account' %}</th>
                            <th>{% trans 'Description' %}</th>
                            <th>{% trans 'Change' %}</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                {% else %}
                    <div hidden class="alert alert-warning alert-wth-icon alert-dismissible fade show" id="account-deter-create-noti" role="alert">
                        <span class="alert-icon-wrap"><i class="fa-solid fa-triangle-exclamation"></i></span> {% trans 'Transactions referencing this product will use the accounts here to create Journal Entry. By default, the accounts are taken by Warehouse, you can update it.' %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
