{% load static i18n compress string_utils person_utils %}
<!DOCTYPE html>
<html lang="{{ base.language }}">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block title %}{{ base.tenant_current_data.code|upper }}{% endblock %}
        &#8901; {{ base.tenant_current_data|parsed_title_page|safe }}
    </title>
    <meta name="description" content="Management Information System"/>

    <meta property="og:url" content="www.bflow.vn"/>
    <meta property="og:type" content="website"/>
    <meta
            property="og:title"
            content="{{ base.tenant_current_data.code|upper }} &#8901; {{ base.tenant_current_data|parsed_title_page|safe }}"
    />
    <meta property="og:description" content="Bflow - Giải pháp toàn diện cho doanh nghiệp"/>

    <link rel="shortcut icon" href="{{ request.user.company_icon_uri }}">
    <link rel="icon" href="{{ request.user.company_icon_uri }}" type="image/x-icon">
    <meta property="og:image" content="{{ request.user.company_icon_uri }}"/>

    <link href="{% static 'vendors/bootstrap@4.0.0/dist/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css"/>
    {% compress css %}
        <!-- Data Table CSS -->
        <link
                href="{% static 'vendors/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}" rel="stylesheet"
                type="text/css"
        />
        <link
                href="{% static 'vendors/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css' %}"
                rel="stylesheet" type="text/css"
        />
        <link
                href="{% static 'vendors/datatables-advance/fixed-columns.css' %}"
                rel="stylesheet" type="text/css"
        />

        <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" type="text/css">
        <link
                href="{% static 'vendors/select2/dist/css/select2-bootstrap4.min.css' %}" rel="stylesheet"
                type="text/css"
        >
        <link href="{% static 'vendors/sweetalert2/dist/sweetalert2.min.css' %}" rel="stylesheet" type="text/css">

        <!-- Tour -->
        <link href="{% static 'vendors/hopscotch/dist/css/hopscotch.min.css' %}" rel="stylesheet" type="text/css">

        <!-- Dropify -->
        <link href="{% static 'vendors/dropify/dist/css/dropify.min.css' %}" rel="stylesheet" type="text/css">
    {% endcompress %}

    <link rel="stylesheet" href="{% static 'assets/fonts/inter/Inter-VariableFont_slnt,wght.ttf' %}">
    {% compress css %}
        <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/loading-spinner.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/my-style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/notify.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'assets/css/plugins/drawer.css' %}" rel="stylesheet" type="text/css">
        <link
                href="{% static 'assets/css/plugins/datatable/dist/css/table-advance-1.css' %}" rel="stylesheet"
                type="text/css"
        >
        <link href="{% static 'vendors/timeline-me/jquery.timelineMe.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'vendors/timeline-me/timelineMe.custom.css' %}" rel="stylesheet" type="text/css">
        <link
                href="{% static 'vendors/dm-uploader/dist/css/jquery.dm-uploader.min.css' %}" rel="stylesheet"
                type="text/css"
        >
        <link rel="stylesheet" href="{% static 'assets/css/base_and_head_system_right.css' %}">
        <link rel="stylesheet" href="{% static 'assets/css/page-content-always.css' %}">
        {% if enable_page_content_css %}
            <link rel="stylesheet" href="{% static 'assets/css/page-content-advance.css' %}">
        {% endif %}
        {% block cssHeader %}{% endblock %}
    {% endcompress %}
    {% block cssHeaderUncompress %}{% endblock %}

    {% compress js %}
        <script src="{% static 'vendors/jquery/dist/jquery.min.js' %}"></script>
        <script src="{% static 'vendors/jquery-validate/jquery.validate.min.js' %}"></script>
        <script src="{% static 'assets/js/cdn-clone/jquery-validation/customize-add-method.js' %}"></script>
        {% if is_ga_enabled %}
            <script type="text/javascript">
                window.dataLayer = window.dataLayer || [];

                function gtag() {
                    dataLayer.push(arguments);
                }

                gtag('js', new Date());

                gtag('config', '{{ ga_config.code }}', {
                    'user_id': `{{ base.username_auth }} {{ base.user_id }}`,
                });
            </script>
        {% endif %}
        {% block jsHeader %}{% endblock %}
    {% endcompress %}
    {% block jsHeaderUnCompress %}{% endblock %}
</head>
<body>

    <!-- Wrapper -->
	<div class="hk-wrapper" data-layout="navbar" data-layout-style="default" data-menu="light" data-footer="simple">
		<!-- Top Navbar -->
		<nav class="hk-navbar navbar navbar-expand-xl navbar-light fixed-top">
			<div class="container-fluid">
				<!-- Start Nav -->
				<div class="nav-start-wrap flex-fill">
					<!-- Brand -->
                    {% include 'extends/vertical_nav_brand.html' %}
					<!-- /Brand -->
					<button class="btn btn-icon btn-rounded btn-flush-dark flush-soft-hover navbar-toggle d-xl-none"><span class="icon"><span class="feather-icon"><i data-feather="align-left"></i></span></span></button>

					<!-- Navbar Nav -->
					<div class="hk-menu">
						<!-- Brand -->
						<div class="menu-header d-xl-none">
							<span>
								<a class="navbar-brand" href="index.html">
									<img class="brand-img img-fluid" src="dist/img/brand-sm.svg" alt="brand" />
									<img class="brand-img img-fluid" src="dist/img/Jampack.svg" alt="brand" />
								</a>
								<button class="btn btn-icon btn-rounded btn-flush-dark flush-soft-hover navbar-toggle">
									<span class="icon">
										<span class="svg-icon fs-5">
											<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-bar-to-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
												<path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
												<line x1="10" y1="12" x2="20" y2="12"></line>
												<line x1="10" y1="12" x2="14" y2="16"></line>
												<line x1="10" y1="12" x2="14" y2="8"></line>
												<line x1="4" y1="4" x2="4" y2="20"></line>
											</svg>
										</span>
									</span>
								</button>
							</span>
						</div>
						<!-- /Brand -->

						<!-- Main Menu -->
						<div data-simplebar class="nicescroll-bar">
							<div class="menu-content-wrap">
								<div class="menu-group">
									<ul class="navbar-nav flex-column">

                                        <li class="nav-item">
											<a class="nav-link" href="javascript:void(0);" data-bs-toggle="collapse" data-bs-target="#space">
												<span class="nav-link-text fs-4">
                                                    {% if base.space_current_detail.name %}
                                                        {{ base.space_current_detail.icon|safe }} {{ base.space_current_detail.name }}
                                                    {% else %}
                                                        _
                                                    {% endif %}
                                                </span>
											</a>
											<ul id="space" class="nav flex-column collapse nav-children">
												<li class="nav-item">
													<ul class="nav flex-column">
                                                        {% csrf_token %}
                                                        {% for item in base.space_list %}
                                                            {% if item.child|length > 0 %}
                                                                {% for item_child in item.child %}
                                                                    <li class="nav-item">
                                                                        <a
                                                                                class="nav-link space-item d-flex align-items-center gap-2 {% if base.space_current_detail.code == item_child.code %} text-primary {% endif %}"
                                                                                data-space-code="{{ item_child.code }}"
                                                                                data-space-name="{{ item_child.name }}"
                                                                                href="#"
                                                                        >
                                                                            {{ item_child.icon|safe }}
                                                                            <span class="nav-link-text">{{ item_child.name }}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endfor %}
                                                            {% else %}
                                                                <li class="nav-item">
                                                                    <a
                                                                            class="nav-link  {% if base.space_current_detail.code == item_child.code %} text-success {% endif %}"
                                                                            href="#"
                                                                    >{{ item.name }}
                                                                    </a>
                                                                </li>
                                                            {% endif %}
                                                        {% endfor %}
													</ul>
												</li>
											</ul>
										</li>

                                        {% for item in base.menus %}
                                            {% if item.child|length > 0 %}
                                                <li class="nav-item">
                                                    <a
                                                            class="nav-link d-flex align-items-center gap-2" href="javascript:void(0);" data-bs-toggle="collapse"
                                                            data-bs-target="#{{ item.code }}"
                                                            aria-expanded="{% if item.expanded %}true{% else %}false{% endif %}"
                                                    >
                                                        <span class="nav-link-text">{% trans item.name %}</span>
                                                    </a>
                                                    <ul id="{{ item.code }}" class="nav flex-column collapse nav-children {% if item.expanded %} show {% endif %}">
                                                        <li class="nav-item">
                                                            <ul class="nav flex-column">
                                                                {% for child in item.child %}
                                                                    <li class="nav-item" id="{{ child.code }}">
                                                                        <a class="nav-link d-flex align-items-center gap-2" href="{{ child.url }}">
                                                                        <span class="nav-icon-wrap d-flex align-items-center justify-content-center">
                                                                            <span class="svg-icon menu-child-icon">
                                                                                {{ child.icon|safe }}
                                                                            </span>
                                                                        </span>
                                                                            <span class="nav-link-text">
                                                                            {% trans child.name %}
                                                                        </span>
                                                                        </a>
                                                                    </li>
                                                                {% endfor %}
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </li>
                                            {% else %}
                                                <li class="nav-item" id="{{ item.code }}">
                                                    <a class="nav-link d-flex align-items-center gap-2" href="{{ item.url }}">
                                                        <span class="nav-link-text">{% trans item.name %}</span>
                                                    </a>
                                                </li>
                                            {% endif %}
                                        {% endfor %}
									</ul>
								</div>
							</div>
						</div>
						<!-- /Main Menu -->
					</div>
					<div id="hk_menu_backdrop" class="hk-menu-backdrop"></div>
					<!-- /Navbar Nav -->

				</div>
				<!-- /Start Nav -->

				<!-- End Nav -->
				<div class="nav-end-wrap">
					<!-- Search -->
					<form class="dropdown navbar-search me-2">
						<div class="dropdown-toggle no-caret" data-bs-toggle="dropdown" data-dropdown-animation data-bs-auto-close="outside">
							<a href="#" class="btn btn-icon btn-rounded btn-flush-dark flush-soft-hover  d-xl-none"><span class="icon"><span class="feather-icon"><i data-feather="search"></i></span></span></a>
							<div class="input-group d-xl-flex d-none">
								<span class="input-affix-wrapper input-search affix-border">
									<input type="text" class="form-control  bg-transparent"  data-navbar-search-close="false" placeholder="Search..." aria-label="Search">
									<span class="input-suffix"><span>/</span>
										<span class="btn-input-clear"><i class="bi bi-x-circle-fill"></i></span>
										<span class="spinner-border spinner-border-sm input-loader text-primary" role="status">
											<span class="sr-only">Loading...</span>
										</span>
									</span>
								</span>
							</div>
						</div>
						<div  class="dropdown-menu p-0">
							<!-- Mobile Search -->
							<div class="dropdown-item d-xl-none bg-transparent">
								<div class="input-group mobile-search">
									<span class="input-affix-wrapper input-search">
										<input type="text" class="form-control" placeholder="Search..." aria-label="Search">
										<span class="input-suffix">
											<span class="btn-input-clear"><i class="bi bi-x-circle-fill"></i></span>
											<span class="spinner-border spinner-border-sm input-loader text-primary" role="status">
												<span class="sr-only">Loading...</span>
											</span>
										</span>
									</span>
								</div>
							</div>
							<!--/ Mobile Search -->
							<div data-simplebar class="dropdown-body p-2">
								<h6 class="dropdown-header">Recent Search
								</h6>
								<div class="dropdown-item bg-transparent">
									<a href="#" class="badge badge-pill badge-soft-secondary">Grunt</a>
									<a href="#" class="badge badge-pill badge-soft-secondary">Node JS</a>
									<a href="#" class="badge badge-pill badge-soft-secondary">SCSS</a>
								</div>
								<div class="dropdown-divider"></div>
								<h6 class="dropdown-header">Help
								</h6>
								<a href="javascript:void(0);" class="dropdown-item">
									<div class="media align-items-center">
										<div class="media-head me-2">
											<div class="avatar avatar-icon avatar-xs avatar-soft-light avatar-rounded">
												<span class="initial-wrap">
													<span class="svg-icon">
														<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-corner-down-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
															<path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
															<path d="M6 6v6a3 3 0 0 0 3 3h10l-4 -4m0 8l4 -4"></path>
														 </svg>
													</span>
												</span>
											</div>
										</div>
										<div class="media-body">
											How to setup theme?
										</div>
									</div>
								</a>
								<a href="javascript:void(0);" class="dropdown-item">
									<div class="media align-items-center">
										<div class="media-head me-2">
											<div class="avatar avatar-icon avatar-xs avatar-soft-light avatar-rounded">
												<span class="initial-wrap">
													<span class="svg-icon">
														<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-corner-down-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
															<path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
															<path d="M6 6v6a3 3 0 0 0 3 3h10l-4 -4m0 8l4 -4"></path>
														 </svg>
													</span>
												</span>
											</div>
										</div>
										<div class="media-body">
											View detail documentation
										</div>
									</div>
								</a>
								<div class="dropdown-divider"></div>
								<h6 class="dropdown-header">Users
								</h6>
								<a href="javascript:void(0);" class="dropdown-item">
									<div class="media align-items-center">
										<div class="media-head me-2">
											<div class="avatar avatar-xs avatar-rounded">
												<img src="dist/img/avatar3.jpg" alt="user" class="avatar-img">
											</div>
										</div>
										<div class="media-body">
											Sarah Jone
										</div>
									</div>
								</a>
								<a href="javascript:void(0);" class="dropdown-item">
									<div class="media align-items-center">
										<div class="media-head me-2">
											<div class="avatar avatar-xs avatar-soft-primary avatar-rounded">
												<span class="initial-wrap">J</span>
											</div>
										</div>
										<div class="media-body">
											Joe Jackson
										</div>
									</div>
								</a>
								<a href="javascript:void(0);" class="dropdown-item">
									<div class="media align-items-center">
										<div class="media-head me-2">
											<div class="avatar avatar-xs avatar-rounded">
												<img src="dist/img/avatar4.jpg" alt="user" class="avatar-img">
											</div>
										</div>
										<div class="media-body">
											Maria Richard
										</div>
									</div>
								</a>
							</div>
							<div class="dropdown-footer d-xl-flex d-none"><a href="#"><u>Search all</u></a></div>
						</div>
					</form>
					<!-- /Search -->

					<ul class="navbar-nav flex-row">
						<div>
                            <div class="v-separator d-lg-inline-block d-none"></div>
                            {% include 'extends/head_system_right.html' %}
                        </div>
					</ul>
				</div>
				<!-- /End Nav -->
			</div>
		</nav>
		<!-- /Top Navbar -->

		<!-- Main Content -->
		<div class="hk-pg-wrapper pb-0">
			<!-- Page Body -->
			<div class="hk-pg-body py-0">
				<div class="contactapp-wrap">
					<nav class="contactapp-sidebar">
						<div data-simplebar class="nicescroll-bar">
							<div class="menu-content-wrap">
								<button type="button" class="btn btn-primary btn-rounded btn-block mb-4" data-bs-toggle="modal" data-bs-target="#add_new_contact">
									Add new contact
								</button>
								<div class="menu-group">
									<ul class="nav nav-light navbar-nav flex-column">
										<li class="nav-item active">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="inbox"></i></span></span>
												<span class="nav-link-text">All Contacts</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="star"></i></span></span>
												<span class="nav-link-text">Important</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="archive"></i></span></span>
												<span class="nav-link-text">Archive</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="edit"></i></span></span>
												<span class="nav-link-text">Pending</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="trash-2"></i></span></span>
												<span class="nav-link-text">Deleted</span>
											</a>
										</li>
									</ul>
								</div>
								<div class="separator separator-light"></div>
								<div class="menu-group">
									<ul class="nav nav-light navbar-nav flex-column">
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="upload"></i></span></span>
												<span class="nav-link-text">Export</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="download"></i></span></span>
												<span class="nav-link-text">Import</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" href="javascript:void(0);">
												<span class="nav-icon-wrap"><span class="feather-icon"><i data-feather="printer"></i></span></span>
												<span class="nav-link-text">Print</span>
											</a>
										</li>
									</ul>
								</div>
								<div class="separator separator-light"></div>
								<div class="d-flex align-items-center justify-content-between mb-2">
									<div class="title-sm text-primary mb-0">Labels</div>
									<a href="#" class="btn btn-xs btn-icon btn-rounded btn-light" data-bs-toggle="modal" data-bs-target="#add_new_label"><span class="icon" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Add Label"><span class="feather-icon"><i data-feather="plus"></i></span></span></a>
								</div>
								<div class="menu-group">
									<ul class="nav nav-light navbar-nav flex-column">
										<li class="nav-item">
											<a class="nav-link link-badge-right" href="#">
												<span class="nav-link-text">Design</span>
												<span class="badge badge-pill badge-sm badge-soft-primary ms-auto">136</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link link-badge-right" href="#">
												<span class="nav-link-text">Development</span>
												<span class="badge badge-pill badge-sm badge-soft-primary ms-auto">2</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link link-badge-right" href="#">
												<span class="nav-link-text">Inventory</span>
												<span class="badge badge-pill badge-sm badge-soft-primary ms-auto">86</span>
											</a>
										</li>
										<li class="nav-item">
											<a class="nav-link link-badge-right" href="#">
												<span class="nav-link-text">Human Resource</span>
												<span class="badge badge-pill badge-sm badge-soft-primary ms-auto">34</span>
											</a>
										</li>
									</ul>
								</div>
								<div class="separator separator-light"></div>
								<div class="d-flex align-items-center justify-content-between mb-4">
									<div class="title-sm text-primary mb-0">Tags</div>
									<a href="#" class="btn btn-xs btn-icon btn-rounded btn-light" data-bs-toggle="modal" data-bs-target="#add_new_tag"><span class="icon" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Add Tag"><span class="feather-icon"><i data-feather="plus"></i></span></span></a>
								</div>
								<div class="tag-cloud">
									<a href="#" class="badge badge-outline badge-light">Collaboration</a>
									<a href="#" class="badge badge-outline badge-light">React Developer</a>
									<a href="#" class="badge badge-outline badge-light">Angular Developer</a>
									<a href="#" class="badge badge-outline badge-light">promotion</a>
									<a href="#" class="badge badge-outline badge-light">Advertisement</a>
								</div>
							</div>
						</div>
						<!--Sidebar Fixnav-->
						<div class="contactapp-fixednav">
							<div class="hk-toolbar">
								<ul class="nav nav-light">
									<li class="nav-item nav-link">
										<a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Settings" href="#"><span class="icon"><span class="feather-icon"><i data-feather="settings"></i></span></span></a>
									</li>
									<li class="nav-item nav-link">
										<a href="#" class="btn btn-icon btn-rounded btn-flush-dark flush-soft-hover" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Archive"><span class="icon"><span class="feather-icon"><i data-feather="archive"></i></span></span></a>
									</li>
									<li class="nav-item nav-link">
										<a href="#" class="btn btn-icon btn-rounded btn-flush-dark flush-soft-hover" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Help"><span class="icon"><span class="feather-icon"><i data-feather="book"></i></span></span></a>
									</li>
								</ul>
							</div>
						</div>
						<!--/ Sidebar Fixnav-->
					</nav>
					<div class="contactapp-content">
						<div class="contactapp-detail-wrap">
							<header class="contact-header">
								<div class="d-flex align-items-center">
                                    <button class="btn mr-1 hidden" id="btn-show-breadcrumb"><i
                                            class="fa-solid fa-bars"
                                    ></i></button>
                                    {% if icon_cls %}
                                        <div class="d-flex align-items-center justify-content-center mr-2 p-1 w-35p h-35p border rounded-2 {{ icon_bg }}">
                                            <i class="{{ icon_cls }} text-white fs-4"></i>
                                        </div>
                                    {% endif %}
                                    <div id="breadcrumb-data">
                                        {% include 'extends/breadcrumb.html' %}
                                    </div>
                                </div>
								<div
                                        class="blog-options-wrap" id="idxPageAction"
                                        style="display: flex; align-items: center;"
                                >
                                    {% include 'extends/direct_btn_group.html' %}
                                    <div class="{% if pk %}hidden{% endif %} mr-1" id="idxRealAction">
                                        {% block pageAction %}{% endblock %}
                                    </div>
                                    <button
                                            type="button"
                                            class="hidden btn btn-icon btn-flush-dark btn-rounded flush-soft-hover"
                                            id="btn-active-edit-zone-wf"
                                    >
                                        <span
                                                class="icon"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="bottom"
                                                data-bs-original-title="{% trans 'Open edit in Zones' %}"
                                        >
                                            <i class="fa-solid fa-unlock"></i>
                                        </span>
                                    </button>
                                    <div class="d-flex justify-content-between">
                                        <button
                                                class="hidden btn-action-wf btn btn-outline-primary mr-1"
                                                type="submit"
                                                form=""
                                                data-value=""
                                                id="idxSaveInZoneWF"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="bottom"
                                                title="{% trans 'Save edit zone' %}"
                                        >{% trans 'Save' %}</button>
                                        <button
                                                class="hidden btn-action-wf btn btn-outline-primary mr-1"
                                                type="submit"
                                                form=""
                                                data-wf-action=""
                                                id="idxSaveInZoneWFThenNext"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="bottom"
                                                title="{% trans 'Save edit zone and approve' %}"
                                        >{% trans 'Save and approve' %}</button>
                                        <button
                                                type="button"
                                                class="hidden btn-action-wf btn btn-primary"
                                                data-value=""
                                                id="btnMainApprove"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="bottom"
                                                title="{% trans 'Approval' %}"
                                        >{% trans 'Approve' %}</button>
                                    </div>
                                    <div class="dropdown hidden">
                                        <button
                                                aria-expanded="false" data-bs-toggle="dropdown"
                                                class="btn btn-default btn-icon btn-flush-dark btn-rounded flush-soft-hover"
                                                type="button"
                                        >
                                        <span
                                                class="icon"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="bottom"
                                                data-bs-original-title="{% trans 'More actions' %}"
                                        >
                                            <i class="fas fa-ellipsis-h"></i>
                                        </span>
                                        </button>
                                        <div role="menu" class="dropdown-menu dropdown-bordered" id="idxGroupAction">
                                            {% for key, value in base_workflow.items %}
                                                <li class="hidden btn-action-wf" data-value="{{ key }}">
                                                    <div class="dropdown-item"><i
                                                            class="icon-action-wf mr-1 {{ value.1 }}"
                                                    ></i> {{ value.0 }}</div>
                                                </li>
                                            {% endfor %}
                                        </div>
                                        {% if base_workflow.length > 0 %}
                                            {% csrf_token %}
                                        {% endif %}
                                    </div>
                                    <button
                                            id="btnLogShow"
                                            class="hidden btn btn-icon btn-rounded bg-dark-hover mr-1 ntt-drawer-toggle-link"
                                            data-drawer-target="#drawer_log_data"
                                            data-drawer-active="false"
                                            href="#"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="bottom"
                                            data-bs-original-title="{% trans 'Log' %}"
                                            data-url-runtime-detail="{% url 'FlowRuntimeDetailAPI' pk=1 %}"
                                            data-url-current-wf="{% url 'WorkflowCurrentOfAppListAPI' %}"
                                            data-url-app-emp-config="{% url 'AppEmpConfigListAPI' %}"
                                    >
                                        <span class="icon icon-xs">
                                            <i class="fas fa-history fa-sm"></i>
                                        </span>
                                    </button>
                                </div>
								<div class="hk-sidebar-togglable"></div>
							</header>
							<div class="contact-body">
								<div id="idxPageContent">
                                    {% block pageContent %}
                                    {% endblock %}
                                </div>
							</div>
                            <div class="blog-utility">
                                <!-- /Message translate base -->
                                {% include 'trans.html' %}
                                <!-- /Message translate base -->

                                <!-- Some data in single page | please override block in feature template-->
                                <div class="hidden">
                                    <!-- Render Company Config and some json -->
                                    {% if data.input_mapping_properties %}
                                        {{ data.input_mapping_properties|json_script:"input_mapping_properties" }}
                                    {% endif %}
                                    {{ config|json_script:"idConfigValue" }}
                                    <!-- // Render Company Config and some json -->

                                    {% block dataHiddenGroup %}{% endblock %}
                                </div>
                                <!-- // Some data in single page | please override block in feature template-->

                                <!-- Drawer Log and Activity -->
                                {% include "extends/utility/drawer_log.html" %}
                                <!-- // Drawer Log and Activity -->
                            </div>

						</div>
					</div>
				</div>
			</div>
			<!-- /Page Body -->
		</div>
		<!-- /Main Content -->
	</div>
    <!-- /Wrapper -->

<!-- Bubble -->
<button
        id="bubble-scrollToTop"
        class="scrollToTop btn btn-sm btn-icon btn-rounded"
        data-bs-toggle="tooltip"
        title="{% trans 'Back to top' %}"
>
    <span class="icon">
        <svg width="16px" height="16px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g>
                <path
                        d="M4 2C3.44772 2 3 2.44772 3 3C3 3.55228 3.44772 4 4 4H20C20.5523 4 21 3.55228 21 3C21 2.44772 20.5523 2 20 2H4Z"
                        fill="#ffffff"
                />
                <path
                        d="M6.29289 13.7071C6.68342 14.0976 7.31658 14.0976 7.70711 13.7071L11 10.4142L11 21C11 21.5523 11.4477 22 12 22C12.5523 22 13 21.5523 13 21L13 10.4142L16.2929 13.7071C16.6834 14.0976 17.3166 14.0976 17.7071 13.7071C18.0976 13.3166 18.0976 12.6834 17.7071 12.2929L12.7071 7.29289C12.3166 6.90237 11.6834 6.90237 11.2929 7.29289L6.29289 12.2929C5.90237 12.6834 5.90237 13.3166 6.29289 13.7071Z"
                        fill="#ffffff"
                />
            </g>
        </svg>
    </span>
</button>
<!-- // Bubble -->

<!-- Wrapper -->
<!-- /Wrapper -->

<!-- Modal -->
<!-- Raise a ticket -->
{% include "extends/utility/raise_ticket.html" %}
<!-- // Raise a ticket -->
<!-- Some plugin import to base -->
{% include 'extends/extends_of_base.html' %}
<!-- // Some plugin import to base -->
<div class="idxModalData">
{% block modalData %}{% endblock %}
</div>
<!-- /Modal -->

{% block jsCatalog %}
    {% if jsi18n %}
        <script src="{% url 'javascript-catalog' packages=jsi18n %}"></script>
    {% else %}
        <script src="{% url 'javascript-catalog' packages='null' %}"></script>
    {% endif %}
{% endblock %}

{% compress js %}
    <!-- Bootstrap Core JS -->
    <script src="{% static 'vendors/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>
    <!-- // Bootstrap Core JS -->

    <!-- FeatherIcons JS -->
    <script src="{% static 'assets/js/feather.min.js' %}"></script>
    <!-- // FeatherIcons JS -->

    <!-- Fancy Dropdown JS -->
    <script src="{% static 'assets/js/dropdown-bootstrap-extended.js' %}"></script>
    <!-- // Fancy Dropdown JS -->

    <!-- Simplebar JS -->
    <script src="{% static 'vendors/simplebar/dist/simplebar.min.js' %}"></script>
    <!-- // Simplebar JS -->

    <!-- Data Table JS -->
    <script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.v1.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-bs5/js/dataTables.bootstrap5.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-select/js/dataTables.select.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-buttons-bs5/js/buttons.bootstrap5.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-buttons/js/buttons.flash.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'vendors/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js' %}"></script>
    <script src="{% static 'vendors/datatables-advance/fixed-columns.js' %}"></script>
    <!-- // Data Table JS -->

    <!-- Timeline ME -->
    <script src="{% static 'vendors/timeline-me/jquery.timelineMe.js' %}"></script>
    <script src="{% static 'vendors/timeline-me/timelineMe.custom.js' %}"></script>
    <!-- // Timeline ME -->

    <!-- Select2 JS -->
    <script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>
    <!-- // Select2 JS -->

    <!-- Sweet Alert 2 -->
    <script src="{% static 'vendors/sweetalert2/dist/sweetalert2.min.js' %}"></script>

    <!-- Tour -->
    <script src="{% static 'vendors/hopscotch/dist/js/hopscotch.min.js' %}"></script>

    <!-- Init JS -->
    <script src="{% static 'assets/js/plugins/drawer.js' %}"></script>
    <script src="{% static 'assets/js/notify.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-notify.min.js' %}"></script>

    <script type="application/javascript">
        // all variable data global with CONST!! --> keep don't change value of variable
        const globeLanguage = $('html').attr('lang');
        const globeApiStatusOfRender = "{{ data.render_api_status }}";
        const globeUrlNotDeny = ['/log/notify/me/count'];
        const globePK = "{{ pk }}";
        const globeMediaDomain = "{{ base.domain_cloud }}";
        const globePrefixAvatar = "{{ base.avatar_prefix }}";
        const globeIsDebug = "{{ is_debug }}";
        const staticStart = "{% static '' %}";

        // url
        const globeUrlCompanyConfig = "{% url 'CompanyConfigDetailAPI' %}";

        // DataTable
        const globeDTBLanguageConfig = "{% if base.language == 'en' %}{% static 'assets/js/cdn-clone/datatable/i18n/en.json' %}{% else %}{% static 'assets/js/cdn-clone/datatable/i18n/vi.json' %}{% endif %}";

        // gateway
        const globeGatewayMiddleListView = "{% url 'GatewayMiddleListView' plan='_plan_' app='_app_' %}";
        const globeGatewayMiddleDetailView = "{% url 'GatewayMiddleDetailView' plan='_plan_' app='_app_' pk='_pk_' %}";
        const globeGatewayPKMiddleDetailView = "{% url 'GatewayPKMiddleDetailView' pk_app='__pk_app__' pk_doc='__pk_doc__' %}"
        const globeGatewayViewNameListView = "{% url 'GatewayViewNameListView' %}";
        const globeGatewayViewNameParseView = "{% url 'GatewayViewNameParseView' view_name='_view_name_' %}";

        // attachment
        const globeUrlAttachmentUpload = "{% url 'AttachmentUpload' %}";

        // workflow
        const globeTaskDetail = "{% url 'FlowRuntimeTaskDetailAPI' pk=1 %}";
        const globeFormMappedZone = "{% if data.form_id %}{{ data.form_id }}{% endif %}";
        const globeRuntimeAfterFinishDetail = "{% url 'FlowRuntimeAfterFinishDetailAPI' pk=1 %}";

        //
        const globeFileNotFoundImg = "{% static 'assets/images/systems/file-not-found.png' %}";
        const globeAvatarNotFoundImg = "{% static 'assets/images/systems/person-avt.png' %}";

        // diagram
        const globeDiagramList = "{% url 'DiagramListAPI' %}";
    </script>

    <!-- Moment JS -->
    <script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/moment-upgrade/moment-locales-upgrade-vi-en.js' %}"></script>
    <script>
        moment.locale(globeLanguage.trim());
    </script>
    <!-- // Moment JS -->

    <script src="{% static 'assets/js/init.js' %}"></script>
    {% if base.language == 'vi' %}
        <script src="{% static 'assets/js/cdn-clone/select2/i18n/vi-1.js' %}"></script>
        <script src="{% static 'assets/js/cdn-clone/jquery-validation/localization/message_vi.js' %}"></script>
    {% else %}
        <script src="{% static 'assets/js/cdn-clone/select2/i18n/en.js' %}"></script>
    {% endif %}
    <script src="{% static 'assets/js/cdn-clone/select2/init-select2.js' %}"></script>
    <script src="{% static 'assets/js/chips-init.js' %}"></script>
    <script src="{% static 'vendors/jquery-mockjax_2.6.0/jquery.mockjax.min.js' %}"></script>
    <script src="{% static 'assets/js/extends/the-documents/bastion_field.js' %}"></script>
    <script src="{% static 'assets/js/init-setup.js' %}"></script>
    <script src="{% static 'assets/js/init-loader.js' %}"></script>
    <script src="{% static 'assets/js/plugins/card-tools.js' %}"></script>
    <script src="{% static 'vendors/dm-uploader/src/js/jquery.dm-uploader.js' %}"></script>

    <script src="{% static 'vendors/dropify/dist/js/dropify.min.js' %}"></script>
    <!-- // Init JS -->

    <script type="application/javascript">
        let isDenied = false;
        switch (globeApiStatusOfRender) {
            case "1401":
                isDenied = true;
                WindowControl.showUnauthenticated();
                break;
            case "1403":
                isDenied = true;
                WindowControl.showForbidden();
                break;
            case "1404":
                isDenied = true;
                WindowControl.showNotFound();
                break;
            case "1500":
                isDenied = true;
                WindowControl.showSVErrors();
                break;
        }
        $(window).on("load", function () {
            if (!$('#menu-tenant').attr('data-space-selected')) {
                hopscotch.startTour({
                    id: "hopscotch-light",
                    steps: [
                        {
                            target: "menu-tenant",
                            placement: 'bottom',
                            title: "{% trans 'Choose a space menus' %}",
                            content: "{% trans 'Each Space has different menus.' %}",
                        },
                    ],
                    showPrevButton: true,
                });
            }
        });

        function checkSizeScreen() {
            let wWidth = $(window).width();
            if (wWidth < 768) {
                let realActionEle = $('#idxRealAction');
                realActionEle.find('.icon').parent('span').each(function () {
                    let spanShowEle = $(this).children('span:not(.icon)');
                    $(this).attr('data-bs-toggle', 'tooltip');
                    $(this).attr('data-bs-placement', 'bottom');
                    $(this).attr('title', spanShowEle.text());
                    spanShowEle.remove();
                });
                $('#btn-show-breadcrumb').addClass('hidden');
                $('#breadcrumb-data').addClass('hidden');
            }
            if (wWidth < 350) {
                $('#menu-tenant-text').text("_");
            }
        }

        checkSizeScreen();

        $(window).on("resize", function () {
            checkSizeScreen();
        })

        {# Auto init select2 #}
        $(document).ready(function () {
            $('.auto-init-select2').each(function () {
                if ($(this).data('url')) {
                    $(this).initSelect2();
                }
            });

            // set css of Modal fit screen display
            $('.modal').on('show.bs.modal', function () {
                const outsideFrame = $('.hk-pg-wrapper').css('padding-top');
                $(this).css('margin-top', outsideFrame).css('height', `calc(100vh - ${outsideFrame})`);
            })

            //
            $('button[type=submit]').on('click', function (e) {
                let frmID = $(this).attr('form');
                const avtiveElement = $(document.activeElement).closest('.dataTables_filter').length
                if (avtiveElement === 1) return false
                if (frmID) {
                    $(this).prop('disabled', true);
                    setTimeout(() => $(this).prop('disabled', false), 1000);
                    $('#' + frmID).trigger('submit');
                } else {
                    let formOutSide = $(this).closest('form');
                    if (formOutSide.length > 0) {
                        $(this).prop('disabled', true);
                        setTimeout(() => $(this).prop('disabled', false), 1000);
                        formOutSide.trigger('submit');
                    }
                }
            })
            $('button:not([type])').on('click', function () {
                let formOutSide = $(this).closest('form');
                if (formOutSide.length > 0) {
                    $(this).prop('disabled', true);
                    setTimeout(() => $(this).prop('disabled', false), 1000);
                    formOutSide.trigger('submit');
                }
            })

            // warning not link employee | not company
            let eleDataBase = $('#data-current-base');
            if (eleDataBase.length > 0) {
                let hasCompanyList = eleDataBase.attr('data-has-company-list') === 'true';
                let hasCurrentCompany = eleDataBase.attr('data-has-current-company') === 'true';
                let hasCurrentEmployee = eleDataBase.attr('data-has-current-employee') === 'true';
                let urlAdminTenant = eleDataBase.attr('data-url-admin-tenant');
                let urlAdminCompany = eleDataBase.attr('data-url-admin-company');

                if (!hasCompanyList) {
                    let msgTmp = $.fn.gettext("You do not belong to any company in the organization. Please contact the organization administrator to update the company information for you in the Tenant Administration section.");
                    $.fn.callAjax2({
                        url: urlAdminTenant,
                        method: 'GET',
                    }).then(
                        resp => {
                            let data = $.fn.switcherResp(resp);
                            if (typeof data == 'object' && data.hasOwnProperty('user_admin_tenant')) {
                                let userData = data['user_admin_tenant'];
                                if (Array.isArray(userData)) {
                                    let htmlTmp = `<p class="mb-1 mr-1">${$.fn.gettext('Admin')}:</p>`;
                                    userData.map(
                                        (item) => {
                                            htmlTmp += `<span class="badge no-transform badge-primary mb-1 mr-1">${item?.['full_name'] || ''} - ${item?.['email'] || ''}</span>`
                                        }
                                    )
                                    return htmlTmp;
                                }
                            }
                            return '';
                        },
                        errs => '',
                    ).then(
                        msg => Swal.fire({
                            title: $.fn.gettext("Some apps will not work correctly"),
                            html: `<p>${msgTmp}</p><br/>${msg}`,
                            icon: 'warning',
                            showConfirmButton: true,
                            confirmButtonText: 'Ok',
                            showDenyButton: false,
                            denyButtonText: $.fn.transEle.attr('data-cancel'),
                        })
                    )
                } else if (!hasCurrentCompany) {
                    let msgTmp = $.fn.gettext("Please update the company information in the Current Company Switch section for your account.");
                    Swal.fire({
                        title: $.fn.gettext("Some apps will not work correctly"),
                        html: `<p>${msgTmp}</p>`,
                        icon: 'warning',
                        showConfirmButton: true,
                        confirmButtonText: $.fn.gettext("Goto switch current company"),
                        showDenyButton: false,
                        denyButtonText: $.fn.transEle.attr('data-cancel'),
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#btnChangeCurrentCompany').trigger('click');
                        }
                    })
                } else if (!hasCurrentEmployee) {
                    let msgTmp = $.fn.gettext("The account is not linked to an employee. Please contact the company administrator to update the employee information for the account.");
                    $.fn.callAjax2({
                        url: urlAdminCompany,
                        method: "GET",
                    }).then(
                        resp => {
                            let data = $.fn.switcherResp(resp);
                            if (typeof data === 'object' && data.hasOwnProperty('employee_admin_company')) {
                                let empData = data['employee_admin_company'];
                                if (Array.isArray(empData)) {
                                    let htmlTmp = `<p class="mb-1 mr-1">${$.fn.gettext('Admin')}:</p>`;
                                    empData.map(
                                        item => {
                                            htmlTmp += `<span class="badge no-transform badge-primary mb-1 mr-1">${item?.['full_name'] || ''} - ${item?.['email'] || ''}</span>`
                                        },
                                    )
                                    return htmlTmp;
                                }
                            }
                            return '';
                        },
                        errs => '',
                    ).then(
                        msg => Swal.fire({
                            title: $.fn.gettext("Some apps will not work correctly"),
                            html: `<p>${msgTmp}</p><br/>${msg}`,
                            icon: 'warning',
                            showConfirmButton: true,
                            confirmButtonText: "Ok",
                        })
                    )


                } else {
                }
            }

            // language
            $('#link-language').on('click', function () {
                let currentLanguage = $(this).attr('data-value');
                let urlUpdateLanguage = $(this).attr('data-url');
                let html = `
                    <div class="d-flex justify-content-center">
                        <select class="form-select w-250p" id="sel-change-language-to">
                            <option value="vi" ${currentLanguage === 'vi' ? 'selected' : ''}>Tiếng Việt</option>
                            <option value="en" ${currentLanguage === 'en' ? 'selected' : ''}>English</option>
                        </select>
                    </div>
                `;
                Swal.fire({
                    title: "{% trans 'Change language to' %}",
                    html: html,
                    showCancelButton: true,
                    confirmButtonText: "{% trans 'Yes, update it!' %}",
                    cancelButtonText: "{% trans 'Cancel' %}",
                    showLoaderOnConfirm: true,
                    allowOutsideClick: () => !Swal.isLoading()
                }).then(
                    (result) => {
                        if (result.isConfirmed) {
                            $.fn.callAjax2({
                                url: urlUpdateLanguage,
                                method: 'PUT',
                                data: {
                                    'language': $('#sel-change-language-to').val(),
                                },
                                isLoading: true,
                            }).then(
                                (resp) => {
                                    let data = $.fn.switcherResp(resp);
                                    window.location.reload();
                                }
                            )
                        }
                    }
                )
            })
        })

        {# Bubble #}
        $(function () {
            let eleOnTop = $('#bubble-scrollToTop');
            let docCheck = $('#idxPageContent .simplebar-content-wrapper');

            $(docCheck).scroll(function () {
                $(this).scrollTop() > 100 ? eleOnTop.fadeIn() : eleOnTop.fadeOut();
            });

            eleOnTop.click(function () {
                docCheck.animate({scrollTop: 0}, "slow");
                return false;
            });
        })
    </script>

    <!-- Customize JS -->
    {% block jsFooter %}{% endblock %}
    <!-- // Customize JS -->
{% endcompress %}
<!-- TinyMCE | Not compress because it depends on load another file -->
<script src="{% static 'vendors/tinymce/tinymce.min.js' %}"></script>
<script src="{% static 'vendors/tinymce/jquery.tinymce.min.js' %}"></script>
<!-- // TinyMCE -->

<!-- Firebase -->
<script src="{% static 'firebase/handle_message.js' %}"></script>
{{ fcm|json_script:"fcm" }}
<script src="{% static 'firebase/foreground.js' %}" type="module"></script>
<!-- // Firebase -->

{% block jsFooterUnCompress %}{% endblock %}

{% if is_ga_enabled %}
    <script async src="{{ ga_config.script }}"></script>
{% endif %}
</body>
</html>
